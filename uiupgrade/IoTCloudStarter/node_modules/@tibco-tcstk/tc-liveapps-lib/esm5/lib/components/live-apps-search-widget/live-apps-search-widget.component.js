/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
import * as tslib_1 from "tslib";
import { Component, ElementRef, EventEmitter, Input, Output, ViewChild, ViewChildren } from '@angular/core';
import { CaseType } from '../../models/liveappsdata';
import { LiveAppsComponent } from '../live-apps-component/live-apps-component.component';
import { LiveAppsCaseSearchComponent } from '../live-apps-case-search/live-apps-case-search.component';
import { LiveAppsService } from '../../services/live-apps.service';
/**
 * High Level search widget component (wraps others)
 * This Component allows to search for existing Cases and list Case Cards.
 *
 * ![alt-text](../live-apps-search-widget.png "")
 *
 * \@example <tcla-live-apps-search-widget></tcla-live-apps-search-widget>
 */
var LiveAppsSearchWidgetComponent = /** @class */ (function (_super) {
    tslib_1.__extends(LiveAppsSearchWidgetComponent, _super);
    function LiveAppsSearchWidgetComponent(liveapps) {
        var _this = _super.call(this) || this;
        _this.liveapps = liveapps;
        /**
         * The fixed height of the case list results pane
         */
        _this.resultsHeight = _this.resultsHeight ? _this.resultsHeight : '400px';
        /**
         * ~event caseSelected : Case Clicked
         * ~payload string : emits case reference when a case is clicked (so parent can navigate to case)
         */
        _this.caseSelected = new EventEmitter();
        // case search
        _this.matchedRefs = [];
        // handle case search results
        _this.handleSearchResults = (/**
         * @param {?} data
         * @return {?}
         */
        function (data) {
            _this.message = undefined;
            _this.matchedRefs = data.caserefs;
            _this.searchString = data.searchString;
        });
        _this.handleClearMatches = (/**
         * @return {?}
         */
        function () {
            _this.caseSearchComponent.clearResults();
            _this.matchedRefs = [];
            _this.message = undefined;
        });
        // case clicked
        _this.clickCaseAction = (/**
         * @param {?} caseReference
         * @return {?}
         */
        function (caseReference) {
            _this.caseSelected.emit(caseReference);
        });
        _this.refresh = (/**
         * @return {?}
         */
        function () {
            if (_this.caseSearchComponent) {
                _this.caseSearchComponent.refresh();
            }
        });
        _this.searchCasesByState = (/**
         * @param {?} stateId
         * @param {?} stateLabel
         * @param {?} appId
         * @param {?} typeId
         * @param {?} message
         * @return {?}
         */
        function (stateId, stateLabel, appId, typeId, message) {
            _this.caseSearchComponent.setCaseType(new CaseType().deserialize({ applicationId: appId, id: typeId }));
            _this.caseSearchComponent.setSelectedStateId(stateId, stateLabel);
            _this.message = message;
            _this.liveapps.caseSearchEntries('', _this.sandboxId, appId, typeId, true, 0, 1000, stateId).subscribe((/**
             * @param {?} results
             * @return {?}
             */
            function (results) {
                _this.matchedRefs = results.caserefs;
            }));
        });
        return _this;
    }
    /**
     * @return {?}
     */
    LiveAppsSearchWidgetComponent.prototype.ngAfterViewInit = /**
     * @return {?}
     */
    function () {
        _super.prototype.ngAfterViewInit.call(this);
        this.containerChanges$.subscribe();
    };
    /**
     * @return {?}
     */
    LiveAppsSearchWidgetComponent.prototype.ngOnInit = /**
     * @return {?}
     */
    function () {
        _super.prototype.ngOnInit.call(this);
    };
    LiveAppsSearchWidgetComponent.decorators = [
        { type: Component, args: [{
                    selector: 'tcla-live-apps-search-widget',
                    template: "<div fxFill fxLayout=\"column\" #componentDiv>\n  <div fxLayout=\"row\" style=\"margin-top: 10px; margin-bottom: 10px;\">\n    <tcla-live-apps-case-search fxFlex fxLayoutAlign=\"center center\" [sandboxId]=\"sandboxId\" [appIds]=\"appIds\" (foundRefs)=\"handleSearchResults($event)\"></tcla-live-apps-case-search>\n  </div>\n  <div *ngIf=\"matchedRefs.length>0\" fxLayout=\"row\" fxLayoutAlign=\"space-around start\" [ngStyle]=\"{'min-height' : resultsHeight}\" style=\"margin-left: 50px; margin-right: 50px; margin-top: 20px; margin-bottom: 20px; height: 100%;\">\n    <tcla-live-apps-case-list #componentChildDiv fxFlex style=\"height: 100%\" [sandboxId]=\"sandboxId\" [uiAppId]=\"uiAppId\" [caseRefs]=\"matchedRefs\" [displayType]=\"widget.gtXs ? 'list' : 'miniCard'\" [headerText]=\"'Matching Cases'\" [headerMessage]=\"message\" [highlight]=\"searchString\" (clickCase)=\"clickCaseAction($event)\" (clearMatches)=\"handleClearMatches()\"></tcla-live-apps-case-list>\n    <!--tcla-live-apps-case-list #componentChildDiv fxFlex style=\"height: 100%\" [sandboxId]=\"sandboxId\" [uiAppId]=\"uiAppId\" [caseRefs]=\"matchedRefs\" [displayType]=\"'list'\" [headerText]=\"'Matching Cases'\" [headerMessage]=\"message\" [highlight]=\"searchString\" (clickCase)=\"clickCaseAction($event)\" (clearMatches)=\"handleClearMatches()\"></tcla-live-apps-case-list-->\n  </div>\n</div>\n\n",
                    styles: [""]
                }] }
    ];
    /** @nocollapse */
    LiveAppsSearchWidgetComponent.ctorParameters = function () { return [
        { type: LiveAppsService }
    ]; };
    LiveAppsSearchWidgetComponent.propDecorators = {
        sandboxId: [{ type: Input }],
        uiAppId: [{ type: Input }],
        appIds: [{ type: Input }],
        resultsHeight: [{ type: Input }],
        caseSelected: [{ type: Output }],
        caseSearchComponent: [{ type: ViewChild, args: [LiveAppsCaseSearchComponent, { static: false },] }],
        componentDiv: [{ type: ViewChild, args: ['componentDiv', { static: false },] }],
        componentDivs: [{ type: ViewChildren, args: ['componentDiv',] }]
    };
    return LiveAppsSearchWidgetComponent;
}(LiveAppsComponent));
export { LiveAppsSearchWidgetComponent };
if (false) {
    /**
     * sandboxId - this comes from claims resolver
     * @type {?}
     */
    LiveAppsSearchWidgetComponent.prototype.sandboxId;
    /**
     * The Application ID of the UI (should ideally be unique as it is shared state key)
     * @type {?}
     */
    LiveAppsSearchWidgetComponent.prototype.uiAppId;
    /**
     * The list of LA Application IDs you want to handle
     * @type {?}
     */
    LiveAppsSearchWidgetComponent.prototype.appIds;
    /**
     * The fixed height of the case list results pane
     * @type {?}
     */
    LiveAppsSearchWidgetComponent.prototype.resultsHeight;
    /**
     * ~event caseSelected : Case Clicked
     * ~payload string : emits case reference when a case is clicked (so parent can navigate to case)
     * @type {?}
     */
    LiveAppsSearchWidgetComponent.prototype.caseSelected;
    /** @type {?} */
    LiveAppsSearchWidgetComponent.prototype.caseSearchComponent;
    /** @type {?} */
    LiveAppsSearchWidgetComponent.prototype.componentDiv;
    /** @type {?} */
    LiveAppsSearchWidgetComponent.prototype.componentDivs;
    /** @type {?} */
    LiveAppsSearchWidgetComponent.prototype.widget;
    /** @type {?} */
    LiveAppsSearchWidgetComponent.prototype.matchedRefs;
    /** @type {?} */
    LiveAppsSearchWidgetComponent.prototype.searchString;
    /** @type {?} */
    LiveAppsSearchWidgetComponent.prototype.message;
    /** @type {?} */
    LiveAppsSearchWidgetComponent.prototype.handleSearchResults;
    /** @type {?} */
    LiveAppsSearchWidgetComponent.prototype.handleClearMatches;
    /** @type {?} */
    LiveAppsSearchWidgetComponent.prototype.clickCaseAction;
    /** @type {?} */
    LiveAppsSearchWidgetComponent.prototype.refresh;
    /** @type {?} */
    LiveAppsSearchWidgetComponent.prototype.searchCasesByState;
    /**
     * @type {?}
     * @protected
     */
    LiveAppsSearchWidgetComponent.prototype.liveapps;
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibGl2ZS1hcHBzLXNlYXJjaC13aWRnZXQuY29tcG9uZW50LmpzIiwic291cmNlUm9vdCI6Im5nOi8vQHRpYmNvLXRjc3RrL3RjLWxpdmVhcHBzLWxpYi8iLCJzb3VyY2VzIjpbImxpYi9jb21wb25lbnRzL2xpdmUtYXBwcy1zZWFyY2gtd2lkZ2V0L2xpdmUtYXBwcy1zZWFyY2gtd2lkZ2V0LmNvbXBvbmVudC50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOzs7OztBQUFBLE9BQU8sRUFHTCxTQUFTLEVBQ1QsVUFBVSxFQUNWLFlBQVksRUFDWixLQUFLLEVBRUwsTUFBTSxFQUNOLFNBQVMsRUFDVCxZQUFZLEVBQ2IsTUFBTSxlQUFlLENBQUM7QUFDdkIsT0FBTyxFQUFvQixRQUFRLEVBQUMsTUFBTSwyQkFBMkIsQ0FBQztBQUN0RSxPQUFPLEVBQUMsaUJBQWlCLEVBQUMsTUFBTSxzREFBc0QsQ0FBQztBQUN2RixPQUFPLEVBQUMsMkJBQTJCLEVBQUMsTUFBTSwwREFBMEQsQ0FBQztBQUNyRyxPQUFPLEVBQUMsZUFBZSxFQUFDLE1BQU0sa0NBQWtDLENBQUM7Ozs7Ozs7OztBQWFqRTtJQUttRCx5REFBaUI7SUFzQ2xFLHVDQUFzQixRQUF5QjtRQUEvQyxZQUNFLGlCQUFPLFNBQ1I7UUFGcUIsY0FBUSxHQUFSLFFBQVEsQ0FBaUI7Ozs7UUFuQnRDLG1CQUFhLEdBQVcsS0FBSSxDQUFDLGFBQWEsQ0FBQyxDQUFDLENBQUUsS0FBSSxDQUFDLGFBQWEsQ0FBQyxDQUFDLENBQUMsT0FBTyxDQUFDOzs7OztRQU0xRSxrQkFBWSxHQUF5QixJQUFJLFlBQVksRUFBVSxDQUFDOztRQVMxRSxpQkFBVyxHQUFhLEVBQUUsQ0FBQzs7UUFTcEIseUJBQW1COzs7O1FBQUcsVUFBQyxJQUF1QjtZQUNuRCxLQUFJLENBQUMsT0FBTyxHQUFHLFNBQVMsQ0FBQztZQUN6QixLQUFJLENBQUMsV0FBVyxHQUFHLElBQUksQ0FBQyxRQUFRLENBQUM7WUFDakMsS0FBSSxDQUFDLFlBQVksR0FBRyxJQUFJLENBQUMsWUFBWSxDQUFDO1FBQ3hDLENBQUMsRUFBQTtRQUVNLHdCQUFrQjs7O1FBQUc7WUFDMUIsS0FBSSxDQUFDLG1CQUFtQixDQUFDLFlBQVksRUFBRSxDQUFDO1lBQ3hDLEtBQUksQ0FBQyxXQUFXLEdBQUcsRUFBRSxDQUFDO1lBQ3RCLEtBQUksQ0FBQyxPQUFPLEdBQUcsU0FBUyxDQUFDO1FBQzNCLENBQUMsRUFBQTs7UUFHTSxxQkFBZTs7OztRQUFHLFVBQUMsYUFBYTtZQUNyQyxLQUFJLENBQUMsWUFBWSxDQUFDLElBQUksQ0FBQyxhQUFhLENBQUMsQ0FBQztRQUN4QyxDQUFDLEVBQUE7UUFFTSxhQUFPOzs7UUFBRztZQUNmLElBQUksS0FBSSxDQUFDLG1CQUFtQixFQUFFO2dCQUM1QixLQUFJLENBQUMsbUJBQW1CLENBQUMsT0FBTyxFQUFFLENBQUM7YUFDcEM7UUFDSCxDQUFDLEVBQUE7UUFFTSx3QkFBa0I7Ozs7Ozs7O1FBQUcsVUFBQyxPQUFlLEVBQUUsVUFBa0IsRUFBRSxLQUFhLEVBQUUsTUFBYyxFQUFFLE9BQWU7WUFDOUcsS0FBSSxDQUFDLG1CQUFtQixDQUFDLFdBQVcsQ0FBQyxJQUFJLFFBQVEsRUFBRSxDQUFDLFdBQVcsQ0FBRSxFQUFFLGFBQWEsRUFBRyxLQUFLLEVBQUUsRUFBRSxFQUFFLE1BQU0sRUFBRSxDQUFDLENBQUMsQ0FBQztZQUN6RyxLQUFJLENBQUMsbUJBQW1CLENBQUMsa0JBQWtCLENBQUMsT0FBTyxFQUFFLFVBQVUsQ0FBQyxDQUFDO1lBQ2pFLEtBQUksQ0FBQyxPQUFPLEdBQUcsT0FBTyxDQUFDO1lBQ3ZCLEtBQUksQ0FBQyxRQUFRLENBQUMsaUJBQWlCLENBQUMsRUFBRSxFQUFFLEtBQUksQ0FBQyxTQUFTLEVBQUUsS0FBSyxFQUFFLE1BQU0sRUFBRSxJQUFJLEVBQUUsQ0FBQyxFQUFFLElBQUksRUFBRSxPQUFPLENBQUMsQ0FBQyxTQUFTOzs7O1lBQ2xHLFVBQUEsT0FBTztnQkFDTCxLQUFJLENBQUMsV0FBVyxHQUFHLE9BQU8sQ0FBQyxRQUFRLENBQUM7WUFDdEMsQ0FBQyxFQUNGLENBQUM7UUFDSixDQUFDLEVBQUE7O0lBbkNELENBQUM7Ozs7SUFxQ0QsdURBQWU7OztJQUFmO1FBQ0UsaUJBQU0sZUFBZSxXQUFFLENBQUM7UUFDeEIsSUFBSSxDQUFDLGlCQUFpQixDQUFDLFNBQVMsRUFBRSxDQUFDO0lBQ3JDLENBQUM7Ozs7SUFFRCxnREFBUTs7O0lBQVI7UUFDRSxpQkFBTSxRQUFRLFdBQUUsQ0FBQztJQUNuQixDQUFDOztnQkF6RkYsU0FBUyxTQUFDO29CQUNULFFBQVEsRUFBRSw4QkFBOEI7b0JBQ3hDLDQyQ0FBdUQ7O2lCQUV4RDs7OztnQkFqQk8sZUFBZTs7OzRCQXNCcEIsS0FBSzswQkFLTCxLQUFLO3lCQUtMLEtBQUs7Z0NBS0wsS0FBSzsrQkFNTCxNQUFNO3NDQUdOLFNBQVMsU0FBQywyQkFBMkIsRUFBRSxFQUFDLE1BQU0sRUFBRSxLQUFLLEVBQUM7K0JBQ3RELFNBQVMsU0FBQyxjQUFjLEVBQUUsRUFBRSxNQUFNLEVBQUUsS0FBSyxFQUFFO2dDQUMzQyxZQUFZLFNBQUUsY0FBYzs7SUF3RC9CLG9DQUFDO0NBQUEsQUEzRkQsQ0FLbUQsaUJBQWlCLEdBc0ZuRTtTQXRGWSw2QkFBNkI7Ozs7OztJQUl4QyxrREFBMkI7Ozs7O0lBSzNCLGdEQUF5Qjs7Ozs7SUFLekIsK0NBQTBCOzs7OztJQUsxQixzREFBb0Y7Ozs7OztJQU1wRixxREFBMEU7O0lBRzFFLDREQUEwRzs7SUFDMUcscURBQXVFOztJQUN2RSxzREFBa0U7O0lBRWxFLCtDQUFvQjs7SUFFcEIsb0RBQTJCOztJQUMzQixxREFBcUI7O0lBQ3JCLGdEQUFnQjs7SUFPaEIsNERBSUM7O0lBRUQsMkRBSUM7O0lBR0Qsd0RBRUM7O0lBRUQsZ0RBSUM7O0lBRUQsMkRBU0M7Ozs7O0lBckNXLGlEQUFtQyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7XG4gIEFmdGVyVmlld0NoZWNrZWQsXG4gIEFmdGVyVmlld0luaXQsXG4gIENvbXBvbmVudCxcbiAgRWxlbWVudFJlZixcbiAgRXZlbnRFbWl0dGVyLFxuICBJbnB1dCxcbiAgT25Jbml0LFxuICBPdXRwdXQsXG4gIFZpZXdDaGlsZCxcbiAgVmlld0NoaWxkcmVuXG59IGZyb20gJ0Bhbmd1bGFyL2NvcmUnO1xuaW1wb3J0IHtDYXNlU2VhcmNoUmVzdWx0cywgQ2FzZVR5cGV9IGZyb20gJy4uLy4uL21vZGVscy9saXZlYXBwc2RhdGEnO1xuaW1wb3J0IHtMaXZlQXBwc0NvbXBvbmVudH0gZnJvbSAnLi4vbGl2ZS1hcHBzLWNvbXBvbmVudC9saXZlLWFwcHMtY29tcG9uZW50LmNvbXBvbmVudCc7XG5pbXBvcnQge0xpdmVBcHBzQ2FzZVNlYXJjaENvbXBvbmVudH0gZnJvbSAnLi4vbGl2ZS1hcHBzLWNhc2Utc2VhcmNoL2xpdmUtYXBwcy1jYXNlLXNlYXJjaC5jb21wb25lbnQnO1xuaW1wb3J0IHtMaXZlQXBwc1NlcnZpY2V9IGZyb20gJy4uLy4uL3NlcnZpY2VzL2xpdmUtYXBwcy5zZXJ2aWNlJztcbmltcG9ydCB7U3ViamVjdH0gZnJvbSAncnhqcyc7XG5pbXBvcnQge1RjQ29tcG9uZW50LCBUY0NvcmVDb21tb25GdW5jdGlvbnN9IGZyb20gJ0B0aWJjby10Y3N0ay90Yy1jb3JlLWxpYic7XG5cbi8qKlxuICogSGlnaCBMZXZlbCBzZWFyY2ggd2lkZ2V0IGNvbXBvbmVudCAod3JhcHMgb3RoZXJzKVxuICogVGhpcyBDb21wb25lbnQgYWxsb3dzIHRvIHNlYXJjaCBmb3IgZXhpc3RpbmcgQ2FzZXMgYW5kIGxpc3QgQ2FzZSBDYXJkcy5cbiAqXG4gKiAhW2FsdC10ZXh0XSguLi9saXZlLWFwcHMtc2VhcmNoLXdpZGdldC5wbmcgXCJcIilcbiAqXG4gKkBleGFtcGxlIDx0Y2xhLWxpdmUtYXBwcy1zZWFyY2gtd2lkZ2V0PjwvdGNsYS1saXZlLWFwcHMtc2VhcmNoLXdpZGdldD5cbiAqL1xuXG5AQ29tcG9uZW50KHtcbiAgc2VsZWN0b3I6ICd0Y2xhLWxpdmUtYXBwcy1zZWFyY2gtd2lkZ2V0JyxcbiAgdGVtcGxhdGVVcmw6ICcuL2xpdmUtYXBwcy1zZWFyY2gtd2lkZ2V0LmNvbXBvbmVudC5odG1sJyxcbiAgc3R5bGVVcmxzOiBbJy4vbGl2ZS1hcHBzLXNlYXJjaC13aWRnZXQuY29tcG9uZW50LmNzcyddXG59KVxuZXhwb3J0IGNsYXNzIExpdmVBcHBzU2VhcmNoV2lkZ2V0Q29tcG9uZW50IGV4dGVuZHMgTGl2ZUFwcHNDb21wb25lbnQgaW1wbGVtZW50cyBPbkluaXQsIEFmdGVyVmlld0luaXQge1xuICAvKipcbiAgICogc2FuZGJveElkIC0gdGhpcyBjb21lcyBmcm9tIGNsYWltcyByZXNvbHZlclxuICAgKi9cbiAgQElucHV0KCkgc2FuZGJveElkOiBudW1iZXI7XG5cbiAgLyoqXG4gICAqIFRoZSBBcHBsaWNhdGlvbiBJRCBvZiB0aGUgVUkgKHNob3VsZCBpZGVhbGx5IGJlIHVuaXF1ZSBhcyBpdCBpcyBzaGFyZWQgc3RhdGUga2V5KVxuICAgKi9cbiAgQElucHV0KCkgdWlBcHBJZDogc3RyaW5nO1xuXG4gIC8qKlxuICAgKiBUaGUgbGlzdCBvZiBMQSBBcHBsaWNhdGlvbiBJRHMgeW91IHdhbnQgdG8gaGFuZGxlXG4gICAqL1xuICBASW5wdXQoKSBhcHBJZHM6IHN0cmluZ1tdO1xuXG4gIC8qKlxuICAgKiBUaGUgZml4ZWQgaGVpZ2h0IG9mIHRoZSBjYXNlIGxpc3QgcmVzdWx0cyBwYW5lXG4gICAqL1xuICBASW5wdXQoKSByZXN1bHRzSGVpZ2h0OiBzdHJpbmcgPSB0aGlzLnJlc3VsdHNIZWlnaHQgPyAgdGhpcy5yZXN1bHRzSGVpZ2h0IDogJzQwMHB4JztcblxuICAvKipcbiAgICogfmV2ZW50IGNhc2VTZWxlY3RlZCA6IENhc2UgQ2xpY2tlZFxuICAgKiB+cGF5bG9hZCBzdHJpbmcgOiBlbWl0cyBjYXNlIHJlZmVyZW5jZSB3aGVuIGEgY2FzZSBpcyBjbGlja2VkIChzbyBwYXJlbnQgY2FuIG5hdmlnYXRlIHRvIGNhc2UpXG4gICAqL1xuICBAT3V0cHV0KCkgY2FzZVNlbGVjdGVkOiBFdmVudEVtaXR0ZXI8c3RyaW5nPiA9IG5ldyBFdmVudEVtaXR0ZXI8c3RyaW5nPigpO1xuXG5cbiAgQFZpZXdDaGlsZChMaXZlQXBwc0Nhc2VTZWFyY2hDb21wb25lbnQsIHtzdGF0aWM6IGZhbHNlfSkgY2FzZVNlYXJjaENvbXBvbmVudDogTGl2ZUFwcHNDYXNlU2VhcmNoQ29tcG9uZW50O1xuICBAVmlld0NoaWxkKCdjb21wb25lbnREaXYnLCB7IHN0YXRpYzogZmFsc2UgfSkgY29tcG9uZW50RGl2OiBFbGVtZW50UmVmO1xuICBAVmlld0NoaWxkcmVuICgnY29tcG9uZW50RGl2JykgY29tcG9uZW50RGl2czogTGl2ZUFwcHNDb21wb25lbnRbXTtcblxuICB3aWRnZXQ6IFRjQ29tcG9uZW50O1xuICAvLyBjYXNlIHNlYXJjaFxuICBtYXRjaGVkUmVmczogc3RyaW5nW10gPSBbXTtcbiAgc2VhcmNoU3RyaW5nOiBzdHJpbmc7XG4gIG1lc3NhZ2U6IHN0cmluZztcblxuICBjb25zdHJ1Y3Rvcihwcm90ZWN0ZWQgbGl2ZWFwcHM6IExpdmVBcHBzU2VydmljZSkge1xuICAgIHN1cGVyKCk7XG4gIH1cblxuICAvLyBoYW5kbGUgY2FzZSBzZWFyY2ggcmVzdWx0c1xuICBwdWJsaWMgaGFuZGxlU2VhcmNoUmVzdWx0cyA9IChkYXRhOiBDYXNlU2VhcmNoUmVzdWx0cykgPT4ge1xuICAgIHRoaXMubWVzc2FnZSA9IHVuZGVmaW5lZDtcbiAgICB0aGlzLm1hdGNoZWRSZWZzID0gZGF0YS5jYXNlcmVmcztcbiAgICB0aGlzLnNlYXJjaFN0cmluZyA9IGRhdGEuc2VhcmNoU3RyaW5nO1xuICB9XG5cbiAgcHVibGljIGhhbmRsZUNsZWFyTWF0Y2hlcyA9ICgpID0+IHtcbiAgICB0aGlzLmNhc2VTZWFyY2hDb21wb25lbnQuY2xlYXJSZXN1bHRzKCk7XG4gICAgdGhpcy5tYXRjaGVkUmVmcyA9IFtdO1xuICAgIHRoaXMubWVzc2FnZSA9IHVuZGVmaW5lZDtcbiAgfVxuXG4gIC8vIGNhc2UgY2xpY2tlZFxuICBwdWJsaWMgY2xpY2tDYXNlQWN0aW9uID0gKGNhc2VSZWZlcmVuY2UpID0+IHtcbiAgICB0aGlzLmNhc2VTZWxlY3RlZC5lbWl0KGNhc2VSZWZlcmVuY2UpO1xuICB9XG5cbiAgcHVibGljIHJlZnJlc2ggPSAoKSA9PiB7XG4gICAgaWYgKHRoaXMuY2FzZVNlYXJjaENvbXBvbmVudCkge1xuICAgICAgdGhpcy5jYXNlU2VhcmNoQ29tcG9uZW50LnJlZnJlc2goKTtcbiAgICB9XG4gIH1cblxuICBwdWJsaWMgc2VhcmNoQ2FzZXNCeVN0YXRlID0gKHN0YXRlSWQ6IG51bWJlciwgc3RhdGVMYWJlbDogc3RyaW5nLCBhcHBJZDogc3RyaW5nLCB0eXBlSWQ6IHN0cmluZywgbWVzc2FnZTogc3RyaW5nKSA9PiB7XG4gICAgdGhpcy5jYXNlU2VhcmNoQ29tcG9uZW50LnNldENhc2VUeXBlKG5ldyBDYXNlVHlwZSgpLmRlc2VyaWFsaXplKCB7IGFwcGxpY2F0aW9uSWQgOiBhcHBJZCwgaWQ6IHR5cGVJZCB9KSk7XG4gICAgdGhpcy5jYXNlU2VhcmNoQ29tcG9uZW50LnNldFNlbGVjdGVkU3RhdGVJZChzdGF0ZUlkLCBzdGF0ZUxhYmVsKTtcbiAgICB0aGlzLm1lc3NhZ2UgPSBtZXNzYWdlO1xuICAgIHRoaXMubGl2ZWFwcHMuY2FzZVNlYXJjaEVudHJpZXMoJycsIHRoaXMuc2FuZGJveElkLCBhcHBJZCwgdHlwZUlkLCB0cnVlLCAwLCAxMDAwLCBzdGF0ZUlkKS5zdWJzY3JpYmUoXG4gICAgICByZXN1bHRzID0+IHtcbiAgICAgICAgdGhpcy5tYXRjaGVkUmVmcyA9IHJlc3VsdHMuY2FzZXJlZnM7XG4gICAgICB9XG4gICAgKTtcbiAgfVxuXG4gIG5nQWZ0ZXJWaWV3SW5pdCgpIHtcbiAgICBzdXBlci5uZ0FmdGVyVmlld0luaXQoKTtcbiAgICB0aGlzLmNvbnRhaW5lckNoYW5nZXMkLnN1YnNjcmliZSgpO1xuICB9XG5cbiAgbmdPbkluaXQoKSB7XG4gICAgc3VwZXIubmdPbkluaXQoKTtcbiAgfVxuXG59XG4iXX0=