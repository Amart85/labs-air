/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
import * as tslib_1 from "tslib";
import { Component, ElementRef, EventEmitter, Input, Output, ViewChild } from '@angular/core';
import { LiveAppsService } from '../../services/live-apps.service';
import { CaseInfo, CaseRoute } from '../../models/liveappsdata';
import { take, takeUntil } from 'rxjs/operators';
import { DomSanitizer } from '@angular/platform-browser';
import { LiveAppsStateIconComponent } from '../live-apps-state-icon/live-apps-state-icon.component';
import { LiveAppsComponent } from '../live-apps-component/live-apps-component.component';
import { TcCaseCardConfigService } from '../../services/tc-case-card-config.service';
/**
 * Renders case summary cards
 *
 * ![alt-text](../live-apps-case-summary.png "Image")
 *
 * ![alt-text](../live-apps-case-summary-2.png "Image")
 *
 * \@example <tcla-live-apps-case-summary></tcla-live-apps-case-summary>
 */
var LiveAppsCaseSummaryComponent = /** @class */ (function (_super) {
    tslib_1.__extends(LiveAppsCaseSummaryComponent, _super);
    function LiveAppsCaseSummaryComponent(liveapps, caseCardConfigService, sanitizer) {
        var _this = _super.call(this) || this;
        _this.liveapps = liveapps;
        _this.caseCardConfigService = caseCardConfigService;
        _this.sanitizer = sanitizer;
        /**
         * ~event clickCase : Case clicked
         * ~payload CaseRoute : CaseRoute object output when case is clicked so calling component can route accordingly - ie. route to case
         */
        _this.clickCase = new EventEmitter();
        /**
         * ~event deleted : Case Displayed has been deleted
         * ~payload string : string emitted when summary tries to load data for a case that has been deleted (so it can be hidden.removed from - for example recent cases list)
         */
        _this.deleted = new EventEmitter();
        _this.clickCaseAction = (/**
         * @return {?}
         */
        function () {
            /** @type {?} */
            var caseRoute = new CaseRoute().deserialize({ caseRef: _this.caseRef, appId: _this.appId, typeId: _this.typeId, workitemId: _this.workitemId });
            _this.clickCase.emit(caseRoute);
        });
        _this.restylePreview = (/**
         * @param {?} icon
         * @param {?} fill
         * @return {?}
         */
        function (icon, fill) {
            _this.metadata.stateIcon = icon;
            _this.metadata.stateColor = fill;
            _this.stateIconComponent.refresh(icon, fill);
        });
        _this.restylePreviewCaseType = (/**
         * @param {?} icon
         * @param {?} fill
         * @return {?}
         */
        function (icon, fill) {
            _this.metadata.caseTypeIcon = icon;
            _this.metadata.caseTypeColor = fill;
            _this.caseTypeIconComponent.refresh(icon, fill);
        });
        _this.refresh = (/**
         * @return {?}
         */
        function () {
            if (!_this.configMode) {
                _this.caseCardConfigService.getCaseWithSummary(_this.caseRef, _this.sandboxId, _this.uiAppId)
                    .pipe(take(1), takeUntil(_this._destroyed$)).subscribe((/**
                 * @param {?} caseinfo
                 * @return {?}
                 */
                function (caseinfo) {
                    if (!caseinfo.deleted) {
                        _this.appId = caseinfo.metadata.applicationId;
                        _this.typeId = caseinfo.metadata.typeId;
                        _this.casedata = caseinfo.untaggedCasedataObj;
                        _this.metadata = caseinfo.metadata;
                        _this.summary = caseinfo.summaryObj;
                        _this.summaryKeys = Object.keys(_this.summary);
                        _this.summaryValues = Object.values(_this.summary);
                    }
                    else {
                        // notify parent case has been deleted
                        _this.deleted.emit(_this.caseRef);
                    }
                }), (/**
                 * @param {?} error
                 * @return {?}
                 */
                function (error) {
                    _this.errorMessage = 'Error retrieving case data: ' + error.error.errorMsg;
                }));
            }
            else {
                /** @type {?} */
                var sampleCaseInfoJSON = '{\n' +
                    '  "untaggedCasedata": "",\n' +
                    '  "summary": "{\\"state\\":\\"Current State\\",\\"Summary1\\":\\"000001\\",\\"Summary2\\":\\"summary data\\",\\"Summary3\\":\\"summary data\\"}",\n' +
                    '  "metadata": {\n' +
                    '    "createdBy": "-1",\n' +
                    '    "creationTimestamp": "2018-11-27T08:40:03.404Z",\n' +
                    '    "createdByDetails": {\n' +
                    '      "username": "creator@mycompany.com"\n' +
                    '    },\n' +
                    '    "modifiedBy": "-1",\n' +
                    '    "modificationTimestamp": "2018-11-27T08:40:22.010Z",\n' +
                    '    "lockType": "1",\n' +
                    '    "msLockExpiry": "1543308022271",\n' +
                    '    "msSystemTime": "1545127800839",\n' +
                    '    "applicationId": "934",\n' +
                    '    "typeId": "1"\n' +
                    '  },\n' +
                    '  "summaryObj": {\n' +
                    '    "state": "Current State",\n' +
                    '    "Summary 1": "000001",\n' +
                    '    "Summary 2": "The case name",\n' +
                    '    "Summary 3": "The case description"\n' +
                    '  },\n' +
                    '  "untaggedCasedataObj": {\n' +
                    '  }\n' +
                    '}';
                /** @type {?} */
                var caseinfo = new CaseInfo().deserialize(JSON.parse(sampleCaseInfoJSON));
                _this.casedata = caseinfo.untaggedCasedataObj;
                _this.metadata = caseinfo.metadata;
                _this.summary = caseinfo.summaryObj;
                _this.summaryKeys = Object.keys(_this.summary);
                _this.summaryValues = Object.values(_this.summary);
                _this.metadata.stateIcon = _this.configModeIcon;
                _this.metadata.stateColor = _this.configModeColor;
                _this.metadata.caseTypeColor = _this.configModeCaseTypeColor;
                _this.metadata.caseTypeIcon = _this.configModeCaseTypeIcon;
                _this.metadata.applicationLabel = _this.configModeAppTypeLabel;
            }
        });
        return _this;
    }
    /**
     * @return {?}
     */
    LiveAppsCaseSummaryComponent.prototype.ngAfterViewInit = /**
     * @return {?}
     */
    function () {
        _super.prototype.ngAfterViewInit.call(this);
        this.containerChanges$.subscribe();
    };
    /**
     * @return {?}
     */
    LiveAppsCaseSummaryComponent.prototype.ngOnInit = /**
     * @return {?}
     */
    function () {
        _super.prototype.ngOnInit.call(this);
        this.refresh();
    };
    /**
     * @param {?} changes
     * @return {?}
     */
    LiveAppsCaseSummaryComponent.prototype.ngOnChanges = /**
     * @param {?} changes
     * @return {?}
     */
    function (changes) {
        if (changes.configModeAppTypeLabel && !changes.configModeAppTypeLabel.isFirstChange() && (changes.configModeAppTypeLabel.currentValue !== changes.configModeAppTypeLabel.previousValue)) {
            this.refresh();
        }
    };
    LiveAppsCaseSummaryComponent.decorators = [
        { type: Component, args: [{
                    selector: 'tcla-live-apps-case-summary',
                    template: "<div #componentDiv fxFill>\n  <div *ngIf=\"displayType === 'miniCard'\" (click)=\"clickCaseAction()\" style=\"height: 100%\">\n    <mat-card *ngIf=\"configMode || (metadata && metadata.applicationLabel && metadata.createdByDetails && metadata.stateColor && metadata.stateIcon && metadata.caseTypeIcon && metadata.caseTypeColor)\" class=\"tcs-case-summary-mini-card\" [ngClass]=\"{border: borderCard}\" fxLayout=\"row\" fxLayoutAlign=\"start stretch\">\n      <div *ngIf=\"typeBar\" class=\"tcs-case-summary-mini-card-side-bar\" [style.background-color]=\"metadata.useCaseTypeColor ? metadata.caseTypeColor : metadata.stateColor\"></div>\n      <div class=\"tcs-case-summary-mini-card-right-content\" fxFlex>\n        <div class=\"tcs-case-summary-mini-card-left\" fxLayout=\"column\" fxLayoutAlign=\"space-between start\" fxFlex>\n          <div *ngIf=\"description\" class=\"tcs-case-summary-summary1-text mini\" matTooltip=\"{{description}}\" matTooltipShowDelay=\"1000\" matTooltipPosition=\"above\">{{description | ellipsis: 45}}</div>\n          <div *ngIf=\"!description && summaryValues[1]\" class=\"tcs-case-summary-summary1-text mini\" matTooltip=\"{{summaryKeys[1]}}\" matTooltipShowDelay=\"1000\" matTooltipPosition=\"above\">{{summaryValues[1]  | ellipsis: 45}}</div>\n          <div class=\"tcs-case-summary-creation-text\" fxLayout=\"row\">\n            <div *ngIf=\"metadata.createdByDetails\">Created {{metadata.creationTimestamp | durationSince}} by {{metadata.createdByDetails.username ? metadata.createdByDetails.username: 'system'}}</div>\n          </div>\n          <div *ngIf=\"summaryValues[2]\" class=\"tcs-case-summary-summary2-text mini\" matTooltip=\"{{summaryValues[2]}}\" matTooltipShowDelay=\"1000\" matTooltipPosition=\"below\">{{summaryValues[2] | ellipsis: 45}}</div>\n          <div class=\"tcs-case-summary-mini-card-state-box\" fxLayout=\"row\" fxLayoutAlign=\"start center\">\n            <tcla-live-apps-state-icon #caseTypeIcon class=\"tcs-case-summary-state-icon\" [iconPath]=\"metadata.caseTypeIcon\" [color]=\"metadata.caseTypeColor\" matTooltipShowDelay=\"1000\" matTooltip=\"Case type: {{metadata.applicationLabel}}\"></tcla-live-apps-state-icon>\n            <div class=\"tcs-case-summary-state-text\" matTooltip=\"{{summaryValues[1]}}\" matTooltipShowDelay=\"1000\" matTooltipPosition=\"above\">{{metadata.applicationLabel}}</div>\n            <div fxLayout=\"row\" fxLayoutAlign=\"end center\" fxFlex>\n              <tcla-live-apps-state-icon #caseStateIcon class=\"tcs-case-summary-state-icon\" [iconPath]=\"metadata.stateIcon\" [color]=\"metadata.stateColor\" [appId]=\"appId\"></tcla-live-apps-state-icon>\n              <div class=\"tcs-case-summary-state-text\">{{summaryValues[0]}}</div>\n            </div>\n          </div>\n        </div>\n        <div class=\"tcs-case-summary-mini-card-right\" fxLayout=\"row\" fxLayoutAlign=\"end center\" matTooltipPosition=\"left\" matTooltipShowDelay=\"1000\" matTooltip=\"Open Case\">\n          <mat-icon class=\"tcs-icon tcs-case-summary-details-icon\" svgIcon=\"tcs-summary-details-button\"></mat-icon>\n        </div>\n      </div>\n    </mat-card>\n  </div>\n\n  <div *ngIf=\"displayType === 'wiMiniCard'\" (click)=\"clickCaseAction()\" style=\"height: 100%\">\n    <mat-card *ngIf=\"configMode || (metadata && metadata.applicationLabel && metadata.createdByDetails && metadata.stateColor && metadata.stateIcon && metadata.caseTypeIcon && metadata.caseTypeColor)\" class=\"tcs-case-summary-mini-card\" [ngClass]=\"{border: borderCard}\" fxLayout=\"row\" fxLayoutAlign=\"start stretch\">\n      <div *ngIf=\"typeBar\" class=\"tcs-case-summary-mini-card-side-bar\" [style.background-color]=\"metadata.useCaseTypeColor ? metadata.caseTypeColor : metadata.stateColor\"></div>\n      <div class=\"tcs-case-summary-mini-card-right-content\" fxFlex>\n        <div class=\"tcs-case-summary-mini-card-left\" fxLayout=\"column\" fxLayoutAlign=\"space-between start\" fxFlex>\n          <div fxLayout=\"row\">\n            <div *ngIf=\"workitemId\" class=\"tcs-case-summary-summary1-text mini\">{{workitemId}}:&nbsp;</div>\n            <div *ngIf=\"description\" class=\"tcs-case-summary-summary1-text mini\" matTooltip=\"{{description}}\" matTooltipShowDelay=\"1000\" matTooltipPosition=\"above\">{{description | ellipsis: 45}}</div>\n          </div>\n          <div class=\"tcs-case-summary-creation-text\" fxLayout=\"row\">\n            <div *ngIf=\"metadata.createdByDetails\">Created {{metadata.creationTimestamp | durationSince}} by {{metadata.createdByDetails.username ? metadata.createdByDetails.username: 'system'}}</div>\n          </div>\n          <div *ngIf=\"summaryValues[2]\" class=\"tcs-case-summary-summary2-text mini\" matTooltip=\"{{summaryValues[2]}}\" matTooltipShowDelay=\"1000\" matTooltipPosition=\"below\">{{summaryValues[2] | ellipsis: 45}}</div>\n          <div class=\"tcs-case-summary-mini-card-state-box\" fxLayout=\"row\" fxLayoutAlign=\"start center\">\n            <tcla-live-apps-state-icon #caseTypeIcon class=\"tcs-case-summary-state-icon\" [iconPath]=\"metadata.caseTypeIcon\" [color]=\"metadata.caseTypeColor\" matTooltipShowDelay=\"1000\" matTooltip=\"Case type: {{metadata.applicationLabel}}\"></tcla-live-apps-state-icon>\n            <div class=\"tcs-case-summary-state-text\" matTooltip=\"{{summaryValues[1]}}\" matTooltipShowDelay=\"1000\" matTooltipPosition=\"above\">{{metadata.applicationLabel}}</div>\n            <div fxLayout=\"row\" fxLayoutAlign=\"end center\" fxFlex>\n              <tcla-live-apps-state-icon #caseStateIcon class=\"tcs-case-summary-state-icon\" [iconPath]=\"metadata.stateIcon\" [color]=\"metadata.stateColor\" [appId]=\"appId\"></tcla-live-apps-state-icon>\n              <div class=\"tcs-case-summary-state-text\">{{summaryValues[0]}}</div>\n            </div>\n          </div>\n        </div>\n        <div class=\"tcs-case-summary-mini-card-right\" fxLayout=\"row\" fxLayoutAlign=\"end center\" matTooltipPosition=\"left\" matTooltipShowDelay=\"1000\" matTooltip=\"Open Case\">\n          <mat-icon class=\"tcs-icon tcs-case-summary-details-icon\" svgIcon=\"tcs-summary-details-button\"></mat-icon>\n        </div>\n      </div>\n    </mat-card>\n  </div>\n\n  <div *ngIf=\"displayType === 'card'\" style=\"height: 100%\">\n  <mat-card *ngIf=\"configMode || (metadata && metadata.applicationLabel && metadata.createdByDetails && metadata.stateColor && metadata.stateIcon && metadata.caseTypeIcon && metadata.caseTypeColor)\" class=\"tcs-case-summary-card\" fxLayout=\"column\" fxLayoutAlign=\"start start\" (click)=\"clickCaseAction()\">\n    <div *ngIf=\"typeBar\" class=\"tcs-case-summary-header\" [style.background-color]=\"metadata.useCaseTypeColor ? metadata.caseTypeColor : metadata.stateColor\"></div>\n    <div class=\"tcs-case-summary-card-contents\" fxFlex fxLayout=\"column\" fxLayoutAlign=\"center center\">\n      <div fxFlex>\n        <div class=\"tcs-case-summary-case-type-text\">{{metadata.applicationLabel}}</div>\n      </div>\n      <div fxFlex>\n        <div *ngIf=\"summaryValues[1]\" class=\"tcs-case-summary-summary1-text\" matTooltip=\"{{summaryKeys[1]}}\" matTooltipShowDelay=\"1000\" matTooltipPosition=\"above\">{{summaryValues[1] | ellipsis: 45}}</div>\n      </div>\n      <div fxFlex>\n        <div class=\"tcs-case-summary-creation-text\">\n          <div *ngIf=\"metadata.createdByDetails\">Created {{metadata.creationTimestamp | durationSince}} by {{metadata.createdByDetails.username ? metadata.createdByDetails.username : 'system'}}</div>\n        </div>\n      </div>\n      <div fxFlex>\n        <div class=\"tcs-case-summary-line\"></div>\n      </div>\n      <div fxFlex>\n        <div *ngIf=\"summaryValues[2]\" class=\"tcs-case-summary-summary2-text\">{{summaryValues[2]}}</div>\n      </div>\n    </div>\n    <div class=\"tcs-case-summary-case-footer\" fxLayout=\"row\" fxLayoutAlign=\"space-between center\">\n      <div fxLayout=\"row\" fxLayoutAlign=\"start center\">\n        <tcla-live-apps-state-icon #caseTypeIcon class=\"tcs-case-summary-state-icon\" [iconPath]=\"metadata.caseTypeIcon\" [color]=\"metadata.caseTypeColor\" matTooltipShowDelay=\"1000\" matTooltip=\"Case type: {{metadata.applicationLabel}}\"></tcla-live-apps-state-icon>\n        <tcla-live-apps-state-icon #caseStateIcon class=\"tcs-case-summary-state-icon\" [iconPath]=\"metadata.stateIcon\" [color]=\"metadata.stateColor\" [appId]=\"appId\"></tcla-live-apps-state-icon>\n        <div class=\"tcs-case-summary-state-text\">{{summaryValues[0]}}</div>\n      </div>\n      <div class=\"tcs-case-summary-view-details\" fxLayout=\"row\" fxLayoutAlign=\"end center\" matTooltipPosition=\"above\" matTooltip=\"Open Case\" matTooltipShowDelay=\"1000\">\n        <div class=\"tcs-case-summary-view-details-text\">View Details</div>\n        <mat-icon class=\"tcs-icon tcs-case-summary-details-icon\" svgIcon=\"tcs-summary-details-button\"></mat-icon>\n      </div>\n    </div>\n  </mat-card>\n  </div>\n  <div class=\"summary-card-list-format\" *ngIf=\"displayType === 'list'\" style=\"min-height: 50px; height: 100%; background-color: white\">\n    <mat-card *ngIf=\"configMode || (metadata && metadata.applicationLabel && metadata.createdByDetails && metadata.stateColor && metadata.stateIcon && metadata.caseTypeIcon && metadata.caseTypeColor)\" class=\"tcs-case-summary-list-card\" [ngClass]=\"{border: borderCard}\" fxLayout=\"row\" fxLayoutAlign=\"start stretch\" (click)=\"clickCaseAction()\">\n      <div *ngIf=\"typeBar\" class=\"tcs-case-summary-mini-card-side-bar\" [style.background-color]=\"metadata.useCaseTypeColor ? metadata.caseTypeColor : metadata.stateColor\"></div>\n      <div class=\"tcs-case-summary-mini-card-right-content\" fxFlex>\n        <div class=\"tcs-case-summary-list-card-left\" fxLayout=\"row\" fxLayoutAlign=\"start center\" fxFlex fxLayoutGap=\"10px\">\n          <div class=\"tcs-case-summary-list-summary1-text tcs-case-summary-list-details-box\">\n            <div fxFlex=\"nogrow\" *ngIf=\"summaryValues[1]\" matTooltipShowDelay=\"1000\" matTooltipPosition=\"above\" [innerHTML]=\"summaryValues[1] | ellipsis : 20 | highlight : highlight : 'Multi-Match' : false : 'tcs-case-summary-highlight'\" matTooltipShowDelay=\"1000\" matTooltip=\"{{summaryValues[1]}}\"></div>\n          </div>\n          <div *ngIf=\"widget.gtXs\">\n            <div *ngIf=\"widget.ltMd\" fxLayout=\"column\" fxLayoutAlign=\"center center\" fxLayoutGap=\"5px\">\n              <!-- App Icon and label -->\n              <div fxFlex fxLayout=\"row\" fxLayoutAlign=\"start center\" class=\"tcs-case-summary-list-details-box\">\n                <tcla-live-apps-state-icon #caseTypeIcon class=\"tcs-case-summary-state-icon\" [iconPath]=\"metadata.caseTypeIcon\" [color]=\"metadata.caseTypeColor\" matTooltipShowDelay=\"1000\" matTooltip=\"Case type: {{metadata.applicationLabel}}\"></tcla-live-apps-state-icon>\n                <div class=\"tcs-case-summary-state-text\">{{metadata.applicationLabel |  ellipsis: 20}}</div>\n              </div>\n              <!-- State Icon and Label -->\n              <div fxFlex fxLayout=\"row\" fxLayoutAlign=\"start center\" class=\"tcs-case-summary-list-details-box\">\n                <tcla-live-apps-state-icon #caseStateIcon class=\"tcs-case-summary-state-icon\" [iconPath]=\"metadata.stateIcon\" [color]=\"metadata.stateColor\" [appId]=\"appId\"></tcla-live-apps-state-icon>\n                <div class=\"tcs-case-summary-state-text\">{{summaryValues[0]}}</div>\n              </div>\n            </div>\n            <div *ngIf=\"widget.gtSm\" fxFlex fxLayout=\"row\" fxLayoutAlign=\"start center\" class=\"tcs-case-summary-list-details-box\">\n              <tcla-live-apps-state-icon #caseTypeIcon class=\"tcs-case-summary-state-icon\" [iconPath]=\"metadata.caseTypeIcon\" [color]=\"metadata.caseTypeColor\" matTooltipShowDelay=\"1000\" matTooltip=\"Case type: {{metadata.applicationLabel}}\"></tcla-live-apps-state-icon>\n              <div class=\"tcs-case-summary-state-text\">{{metadata.applicationLabel |  ellipsis: 20}}</div>\n            </div>\n            <div *ngIf=\"widget.gtSm\" fxFlex fxLayout=\"row\" fxLayoutAlign=\"start center\" class=\"tcs-case-summary-list-details-box\">\n              <tcla-live-apps-state-icon #caseStateIcon class=\"tcs-case-summary-state-icon\" [iconPath]=\"metadata.stateIcon\" [color]=\"metadata.stateColor\" [appId]=\"appId\"></tcla-live-apps-state-icon>\n              <div class=\"tcs-case-summary-state-text\">{{summaryValues[0]}}</div>\n            </div>\n          </div>\n          <div *ngIf=\"widget.ltMd\" class=\"summary-text-ltmd\" fxLayout=\"column\" fxLayoutAlign=\"center start\" fxLayoutGap=\"5px\" style=\"max-width: 180px;width: 180px\">\n            <div class=\"tcs-case-summary-list-summary2-text tcs-case-summary-list-large-details-box\">\n              <div fxFlex *ngIf=\"summaryValues[2]\" [innerHTML]=\"summaryValues[2] | highlight : highlight : 'Multi-Match' : false : 'tcs-case-summary-highlight'\" matTooltipShowDelay=\"1000\" matTooltip=\"{{summaryValues[2]}}\"></div>\n            </div>\n            <div class=\"tcs-case-summary-list-summary3-text tcs-case-summary-list-details-box\">\n              <div fxFlex=\"nogrow\" *ngIf=\"summaryValues[3]\" [innerHTML]=\"summaryValues[3] | ellipsis : 20 | highlight : highlight : 'Multi-Match' : false : 'tcs-case-summary-highlight'\" matTooltipShowDelay=\"1000\" matTooltip=\"{{summaryValues[3]}}\"></div>\n            </div>\n          </div>\n          <div *ngIf=\"widget.gtSm\" class=\"tcs-case-summary-list-summary2-text tcs-case-summary-list-large-details-box\">\n            <div fxFlex *ngIf=\"summaryValues[2]\" [innerHTML]=\"summaryValues[2] | highlight : highlight : 'Multi-Match' : false : 'tcs-case-summary-highlight'\" matTooltipShowDelay=\"1000\" matTooltip=\"{{summaryValues[2]}}\"></div>\n          </div>\n          <div *ngIf=\"widget.gtSm\" fxFlex=\"nogrow\" class=\"tcs-case-summary-list-summary3-text tcs-case-summary-list-details-box\">\n            <div fxFlex=\"nogrow\" *ngIf=\"summaryValues[3]\" [innerHTML]=\"summaryValues[3] | ellipsis : 20 | highlight : highlight : 'Multi-Match' : false : 'tcs-case-summary-highlight'\" matTooltipShowDelay=\"1000\" matTooltip=\"{{summaryValues[3]}}\"></div>\n          </div>\n          <div fxFlex class=\"tcs-case-summary-list-details-box tcs-case-summary-creation-text\" fxLayoutAlign=\"center center\">\n            <div *ngIf=\"metadata.createdByDetails\">Created {{metadata.creationTimestamp | durationSince}} by {{metadata.createdByDetails.username ? metadata.createdByDetails.username : 'system'}}</div>\n          </div>\n        </div>\n\n        <div class=\"tcs-case-summary-mini-card-right\" fxLayout=\"row\" fxLayoutAlign=\"end center\" matTooltipPosition=\"left\" matTooltipShowDelay=\"1000\" matTooltip=\"Open Case\">\n          <mat-icon class=\"tcs-icon tcs-case-summary-details-icon\" svgIcon=\"tcs-summary-details-button\"></mat-icon>\n        </div>\n      </div>\n    </mat-card>\n  </div>\n\n  <div *ngIf=\"displayType === 'miniList'\" style=\"min-height: 50px; background-color: white\">\n    <mat-card *ngIf=\"configMode || (metadata && metadata.applicationLabel && metadata.createdByDetails && metadata.stateColor && metadata.stateIcon && metadata.caseTypeIcon && metadata.caseTypeColor)\" class=\"tcs-case-summary-list-card\" [ngClass]=\"{border: borderCard}\" fxLayout=\"row\" fxLayoutAlign=\"start stretch\" (click)=\"clickCaseAction()\">\n      <div *ngIf=\"typeBar\" class=\"tcs-case-summary-mini-card-side-bar\" [style.background-color]=\"metadata.useCaseTypeColor ? metadata.caseTypeColor : metadata.stateColor\"></div>\n      <div class=\"tcs-case-summary-mini-card-right-content\" fxFlex>\n        <div class=\"tcs-case-summary-list-card-left\" fxLayout=\"row\" fxLayoutAlign=\"start center\" fxFlex fxLayoutGap=\"10px\">\n          <div class=\"tcs-case-summary-list-summary1-text tcs-case-summary-list-details-box\">\n            <div fxFlex=\"nogrow\" *ngIf=\"summaryValues[1]\" matTooltipShowDelay=\"1000\" matTooltipPosition=\"above\" [innerHTML]=\"summaryValues[1] | ellipsis : 20 | highlight : highlight : 'Multi-Match' : false : 'tcs-case-summary-highlight'\" matTooltipShowDelay=\"1000\" matTooltip=\"{{summaryValues[1]}}\"></div>\n          </div>\n        </div>\n        <div class=\"tcs-case-summary-mini-card-right\" fxLayout=\"row\" fxLayoutAlign=\"end center\" matTooltipPosition=\"left\" matTooltipShowDelay=\"1000\" matTooltip=\"Open Case\">\n          <mat-icon class=\"tcs-icon tcs-case-summary-details-icon\" svgIcon=\"tcs-summary-details-button\"></mat-icon>\n        </div>\n      </div>\n    </mat-card>\n  </div>\n\n\n  <div *ngIf=\"displayType === 'staticlist'\" style=\"min-height: 50px;  height: 100%; background-color: white\">\n    <mat-card *ngIf=\"configMode || (metadata && metadata.applicationLabel && metadata.createdByDetails && metadata.stateColor && metadata.stateIcon && metadata.caseTypeIcon && metadata.caseTypeColor)\" class=\"tcs-case-summary-static-list-card\" [ngClass]=\"{border: borderCard}\" fxLayout=\"row\" fxLayoutAlign=\"start stretch\">\n      <div *ngIf=\"typeBar\" class=\"tcs-case-summary-mini-card-side-bar\" [style.background-color]=\"metadata.useCaseTypeColor ? metadata.caseTypeColor : metadata.stateColor\"></div>\n      <div class=\"tcs-case-summary-mini-card-right-content\" fxFlex>\n        <div class=\"tcs-case-summary-list-card-left\" fxLayout=\"row\" fxLayoutAlign=\"start center\" fxFlex fxLayoutGap=\"10px\">\n          <div class=\"tcs-case-summary-list-summary1-text tcs-case-summary-list-details-box\">\n            <div fxFlex=\"nogrow\" *ngIf=\"summaryValues[1]\" matTooltipShowDelay=\"1000\" matTooltipPosition=\"above\" [innerHTML]=\"summaryValues[1] | ellipsis : 20 | highlight : highlight : 'Multi-Match' : false : 'tcs-case-summary-highlight'\" matTooltipShowDelay=\"1000\" matTooltip=\"{{summaryValues[1]}}\"></div>\n          </div>\n          <div *ngIf=\"widget.ltMd\" class=\"summary-text-ltmd\" fxLayout=\"column\" fxLayoutAlign=\"center start\" fxLayoutGap=\"5px\" style=\"max-width: 180px;width: 180px\">\n            <div class=\"tcs-case-summary-list-summary2-text tcs-case-summary-list-large-details-box\">\n              <div fxFlex *ngIf=\"summaryValues[2]\" [innerHTML]=\"summaryValues[2] | highlight : highlight : 'Multi-Match' : false : 'tcs-case-summary-highlight'\" matTooltipShowDelay=\"1000\" matTooltip=\"{{summaryValues[2]}}\"></div>\n            </div>\n            <div class=\"tcs-case-summary-list-summary3-text tcs-case-summary-list-details-box\">\n              <div fxFlex=\"nogrow\" *ngIf=\"summaryValues[3]\" [innerHTML]=\"summaryValues[3] | ellipsis : 20 | highlight : highlight : 'Multi-Match' : false : 'tcs-case-summary-highlight'\" matTooltipShowDelay=\"1000\" matTooltip=\"{{summaryValues[3]}}\"></div>\n            </div>\n          </div>\n          <div *ngIf=\"widget.gtSm\" class=\"tcs-case-summary-list-summary2-text tcs-case-summary-list-large-details-box\">\n            <div fxFlex *ngIf=\"summaryValues[2]\" [innerHTML]=\"summaryValues[2] | highlight : highlight : 'Multi-Match' : false : 'tcs-case-summary-highlight'\" matTooltipShowDelay=\"1000\" matTooltip=\"{{summaryValues[2]}}\"></div>\n          </div>\n          <div *ngIf=\"widget.gtSm\" fxFlex=\"nogrow\" class=\"tcs-case-summary-list-summary3-text tcs-case-summary-list-details-box\">\n            <div fxFlex=\"nogrow\" *ngIf=\"summaryValues[3]\" [innerHTML]=\"summaryValues[3] | ellipsis : 20 | highlight : highlight : 'Multi-Match' : false : 'tcs-case-summary-highlight'\" matTooltipShowDelay=\"1000\" matTooltip=\"{{summaryValues[3]}}\"></div>\n          </div>\n          <div *ngIf=\"widget.gtXs\">\n            <div *ngIf=\"widget.ltMd\" fxLayout=\"column\" fxLayoutAlign=\"center center\" fxLayoutGap=\"5px\">\n              <!-- App Icon and label -->\n              <div fxFlex fxLayout=\"row\" fxLayoutAlign=\"start center\" class=\"tcs-case-summary-list-details-box\">\n                <tcla-live-apps-state-icon #caseTypeIcon class=\"tcs-case-summary-state-icon\" [iconPath]=\"metadata.caseTypeIcon\" [color]=\"metadata.caseTypeColor\" matTooltipShowDelay=\"1000\" matTooltip=\"Case type: {{metadata.applicationLabel}}\"></tcla-live-apps-state-icon>\n                <div class=\"tcs-case-summary-state-text\">{{metadata.applicationLabel |  ellipsis: 20}}</div>\n              </div>\n              <!-- State Icon and Label -->\n              <div fxFlex fxLayout=\"row\" fxLayoutAlign=\"start center\" class=\"tcs-case-summary-list-details-box\">\n                <tcla-live-apps-state-icon #caseStateIcon class=\"tcs-case-summary-state-icon\" [iconPath]=\"metadata.stateIcon\" [color]=\"metadata.stateColor\" [appId]=\"appId\"></tcla-live-apps-state-icon>\n                <div class=\"tcs-case-summary-state-text\">{{summaryValues[0]}}</div>\n              </div>\n            </div>\n            <div *ngIf=\"widget.gtSm\" fxFlex fxLayout=\"row\" fxLayoutAlign=\"start center\" class=\"tcs-case-summary-list-details-box\">\n              <tcla-live-apps-state-icon #caseTypeIcon class=\"tcs-case-summary-state-icon\" [iconPath]=\"metadata.caseTypeIcon\" [color]=\"metadata.caseTypeColor\" matTooltipShowDelay=\"1000\" matTooltip=\"Case type: {{metadata.applicationLabel}}\"></tcla-live-apps-state-icon>\n              <div class=\"tcs-case-summary-state-text\">{{metadata.applicationLabel |  ellipsis: 20}}</div>\n            </div>\n            <div *ngIf=\"widget.gtSm\" fxFlex fxLayout=\"row\" fxLayoutAlign=\"start center\" class=\"tcs-case-summary-list-details-box\">\n              <tcla-live-apps-state-icon #caseStateIcon class=\"tcs-case-summary-state-icon\" [iconPath]=\"metadata.stateIcon\" [color]=\"metadata.stateColor\" [appId]=\"appId\"></tcla-live-apps-state-icon>\n              <div class=\"tcs-case-summary-state-text\">{{summaryValues[0]}}</div>\n            </div>\n          </div>\n          <div fxFlex class=\"tcs-case-summary-list-details-box tcs-case-summary-creation-text\" fxLayoutAlign=\"center center\">\n            <div *ngIf=\"metadata.createdByDetails\">Created {{metadata.creationTimestamp | durationSince}} by {{metadata.createdByDetails.username ? metadata.createdByDetails.username : 'system'}}</div>\n          </div>\n        </div>\n      </div>\n    </mat-card>\n  </div>\n</div>\n",
                    styles: [".tcs-case-summary-list{width:100%;height:190px;border-radius:3px;box-shadow:0 2px 4px 0 rgba(0,0,0,.33);background-color:#fff;padding:0}.tcs-case-summary-card{width:100%;height:100%;border-radius:3px;box-shadow:0 2px 4px 0 rgba(0,0,0,.33);background-color:#fff;padding:0}.tcs-case-summary-mini-card{padding:0;height:100%;min-width:285px;min-height:91px;background-color:#fff;box-shadow:none;border-radius:3px}.tcs-case-summary-list-card{padding:0;height:100%;min-height:50px;overflow:hidden;background-color:#fff;box-shadow:none;border-radius:3px}.tcs-case-summary-static-list-card{padding:0;height:50px;min-height:50px;background-color:#fff;box-shadow:none;border-radius:3px}.tcs-case-summary-mini-card-right-content{padding:7px 5px}.tcs-case-summary-mini-card.border{box-shadow:0 2px 4px 0 rgba(0,0,0,.33);border-radius:3px}.tcs-case-summary-mini-card:hover{box-shadow:0 3px 8px 4px rgba(0,0,0,.33);border-radius:3px;cursor:pointer}.tcs-case-summary-card:hover{box-shadow:0 3px 8px 4px rgba(0,0,0,.33);cursor:pointer}.tcs-case-summary-list-card:hover{box-shadow:0 3px 8px 4px rgba(0,0,0,.33);border-radius:3px;cursor:pointer}.tcs-case-summary-header{width:100%;height:20px;border-radius:3px 3px 0 0}.tcs-case-summary-mini-card-side-bar{border-radius:3px 0 0 3px;width:20px}.tcs-case-summary-card-contents{width:100%;padding:4px 12px}.tcs-case-summary-case-footer{width:100%;height:36px;border-radius:0 0 3px 3px;background-color:#fff;padding-left:12px;padding-right:12px}.tcs-case-summary-case-type-text{font-family:Source Sans Pro;font-size:12px;font-weight:600;font-style:normal;font-stretch:normal;line-height:normal;letter-spacing:normal;text-align:center;color:#727272}.tcs-case-summary-summary1-text{font-family:Source Sans Pro;font-size:16px;font-weight:600;font-style:normal;font-stretch:normal;line-height:normal;letter-spacing:normal;text-align:center;color:#212121;margin-top:12px;height:18px;min-height:18px}.tcs-case-summary-summary1-text.mini{margin-top:0}.tcs-case-summary-creation-text{min-height:15px}.tcs-case-summary-creation-text div{font-family:Source Sans Pro;font-size:10px;font-weight:400;font-style:normal;font-stretch:normal;line-height:normal;letter-spacing:normal;color:#727272}.tcs-case-summary-line{padding:0;width:100%;margin:12px 20px 0;border-bottom:1.1px solid #f4f4f4}.tcs-case-summary-summary2-text{font-family:Source Sans Pro;font-size:12px;font-weight:400;font-style:normal;font-stretch:normal;line-height:normal;letter-spacing:normal;text-align:center;color:#000;margin-top:8px}.tcs-case-summary-list-summary2-text{font-family:Source Sans Pro;font-size:12px;font-weight:400;font-style:normal;font-stretch:normal;line-height:normal;letter-spacing:normal;color:#000;padding-right:10px}.tcs-case-summary-list-summary3-text{font-family:Source Sans Pro;font-size:12px;font-weight:400;font-style:normal;font-stretch:normal;line-height:normal;letter-spacing:normal;color:#000}.tcs-case-summary-summary2-text.mini{margin-top:0}.tcs-case-summary-case-footer:hover,.tcs-case-summary-mini-card-right:hover{cursor:pointer}.tcs-case-summary-view-details-text{font-family:Source Sans Pro;font-size:10px;font-weight:600;font-style:normal;font-stretch:normal;line-height:normal;letter-spacing:normal;text-align:right;color:#0081cb}.tcs-case-summary-state-text{font-family:Source Sans Pro;font-size:10px;font-weight:600;font-style:normal;font-stretch:normal;line-height:normal;letter-spacing:normal;color:#727272}.tcs-case-summary-details-icon{height:14px;width:14px;margin-left:5px}.tcs-case-summary-mini-card-state-box{width:100%}.tcs-case-summary-state-icon{margin-right:5px}.tcs-case-summary-list-card-left{margin-left:10px;margin-right:10px;overflow:hidden}.tcs-case-summary-list-details-box{min-width:130px}.tcs-case-summary-list-details-box.tcs-case-summary-creation-text{min-width:110px}.tcs-case-summary-list-summary1-text{min-width:100px;font-family:Source Sans Pro;font-size:16px;font-weight:600;font-style:normal;font-stretch:normal;line-height:normal;letter-spacing:normal;color:#212121;height:18px;min-height:18px}.tcs-case-summary-list-large-details-box{min-width:30%}:host ::ng-deep .tcs-case-summary-highlight{color:#000;font-weight:900}"]
                }] }
    ];
    /** @nocollapse */
    LiveAppsCaseSummaryComponent.ctorParameters = function () { return [
        { type: LiveAppsService },
        { type: TcCaseCardConfigService },
        { type: DomSanitizer }
    ]; };
    LiveAppsCaseSummaryComponent.propDecorators = {
        stateIconComponent: [{ type: ViewChild, args: ['caseStateIcon', { static: false },] }],
        caseTypeIconComponent: [{ type: ViewChild, args: ['caseTypeIcon', { static: false },] }],
        componentDiv: [{ type: ViewChild, args: ['componentDiv', { static: false },] }],
        configMode: [{ type: Input }],
        configModeColor: [{ type: Input }],
        configModeIcon: [{ type: Input }],
        configModeCaseTypeColor: [{ type: Input }],
        configModeCaseTypeIcon: [{ type: Input }],
        configModeAppTypeLabel: [{ type: Input }],
        caseRef: [{ type: Input }],
        description: [{ type: Input }],
        workitemId: [{ type: Input }],
        sandboxId: [{ type: Input }],
        displayType: [{ type: Input }],
        borderCard: [{ type: Input }],
        typeBar: [{ type: Input }],
        uiAppId: [{ type: Input }],
        highlight: [{ type: Input }],
        clickCase: [{ type: Output }],
        deleted: [{ type: Output }]
    };
    return LiveAppsCaseSummaryComponent;
}(LiveAppsComponent));
export { LiveAppsCaseSummaryComponent };
if (false) {
    /** @type {?} */
    LiveAppsCaseSummaryComponent.prototype.stateIconComponent;
    /** @type {?} */
    LiveAppsCaseSummaryComponent.prototype.caseTypeIconComponent;
    /** @type {?} */
    LiveAppsCaseSummaryComponent.prototype.componentDiv;
    /**
     * Whether to use static data (ie. when in app config box)
     * @type {?}
     */
    LiveAppsCaseSummaryComponent.prototype.configMode;
    /**
     * static data for app config box
     * @type {?}
     */
    LiveAppsCaseSummaryComponent.prototype.configModeColor;
    /**
     * static data for app config box
     * @type {?}
     */
    LiveAppsCaseSummaryComponent.prototype.configModeIcon;
    /**
     * static data for app config box
     * @type {?}
     */
    LiveAppsCaseSummaryComponent.prototype.configModeCaseTypeColor;
    /**
     * static data for app config box
     * @type {?}
     */
    LiveAppsCaseSummaryComponent.prototype.configModeCaseTypeIcon;
    /**
     * static data for app config box
     * @type {?}
     */
    LiveAppsCaseSummaryComponent.prototype.configModeAppTypeLabel;
    /**
     * The case reference
     * @type {?}
     */
    LiveAppsCaseSummaryComponent.prototype.caseRef;
    /**
     * Card Description
     * @type {?}
     */
    LiveAppsCaseSummaryComponent.prototype.description;
    /**
     * Workitem Id
     * @type {?}
     */
    LiveAppsCaseSummaryComponent.prototype.workitemId;
    /**
     * sandboxId - this comes from claims resolver
     * @type {?}
     */
    LiveAppsCaseSummaryComponent.prototype.sandboxId;
    /**
     * case card format - list, card, miniCard, staticList (no click event)
     * @type {?}
     */
    LiveAppsCaseSummaryComponent.prototype.displayType;
    /**
     * Whether to display a border around the card
     * @type {?}
     */
    LiveAppsCaseSummaryComponent.prototype.borderCard;
    /**
     * Whether to display the colored "bar" on a summary card (on left or top)
     * @type {?}
     */
    LiveAppsCaseSummaryComponent.prototype.typeBar;
    /**
     * The Application ID of the UI (should ideally be unique as it is shared state key)
     * @type {?}
     */
    LiveAppsCaseSummaryComponent.prototype.uiAppId;
    /**
     * Text to highlight in the list of cases (normall text that was searched)
     * @type {?}
     */
    LiveAppsCaseSummaryComponent.prototype.highlight;
    /**
     * ~event clickCase : Case clicked
     * ~payload CaseRoute : CaseRoute object output when case is clicked so calling component can route accordingly - ie. route to case
     * @type {?}
     */
    LiveAppsCaseSummaryComponent.prototype.clickCase;
    /**
     * ~event deleted : Case Displayed has been deleted
     * ~payload string : string emitted when summary tries to load data for a case that has been deleted (so it can be hidden.removed from - for example recent cases list)
     * @type {?}
     */
    LiveAppsCaseSummaryComponent.prototype.deleted;
    /** @type {?} */
    LiveAppsCaseSummaryComponent.prototype.casedata;
    /** @type {?} */
    LiveAppsCaseSummaryComponent.prototype.summary;
    /** @type {?} */
    LiveAppsCaseSummaryComponent.prototype.summaryKeys;
    /** @type {?} */
    LiveAppsCaseSummaryComponent.prototype.summaryValues;
    /** @type {?} */
    LiveAppsCaseSummaryComponent.prototype.metadata;
    /** @type {?} */
    LiveAppsCaseSummaryComponent.prototype.appStateConfig;
    /** @type {?} */
    LiveAppsCaseSummaryComponent.prototype.errorMessage;
    /** @type {?} */
    LiveAppsCaseSummaryComponent.prototype.appId;
    /** @type {?} */
    LiveAppsCaseSummaryComponent.prototype.typeId;
    /** @type {?} */
    LiveAppsCaseSummaryComponent.prototype.color;
    /** @type {?} */
    LiveAppsCaseSummaryComponent.prototype.clickCaseAction;
    /** @type {?} */
    LiveAppsCaseSummaryComponent.prototype.restylePreview;
    /** @type {?} */
    LiveAppsCaseSummaryComponent.prototype.restylePreviewCaseType;
    /** @type {?} */
    LiveAppsCaseSummaryComponent.prototype.refresh;
    /**
     * @type {?}
     * @protected
     */
    LiveAppsCaseSummaryComponent.prototype.liveapps;
    /**
     * @type {?}
     * @protected
     */
    LiveAppsCaseSummaryComponent.prototype.caseCardConfigService;
    /**
     * @type {?}
     * @protected
     */
    LiveAppsCaseSummaryComponent.prototype.sanitizer;
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibGl2ZS1hcHBzLWNhc2Utc3VtbWFyeS5jb21wb25lbnQuanMiLCJzb3VyY2VSb290Ijoibmc6Ly9AdGliY28tdGNzdGsvdGMtbGl2ZWFwcHMtbGliLyIsInNvdXJjZXMiOlsibGliL2NvbXBvbmVudHMvbGl2ZS1hcHBzLWNhc2Utc3VtbWFyeS9saXZlLWFwcHMtY2FzZS1zdW1tYXJ5LmNvbXBvbmVudC50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOzs7OztBQUFBLE9BQU8sRUFFTCxTQUFTLEVBQUUsVUFBVSxFQUNyQixZQUFZLEVBQ1osS0FBSyxFQUdMLE1BQU0sRUFFTixTQUFTLEVBR1YsTUFBTSxlQUFlLENBQUM7QUFDdkIsT0FBTyxFQUFDLGVBQWUsRUFBQyxNQUFNLGtDQUFrQyxDQUFDO0FBQ2pFLE9BQU8sRUFBYSxRQUFRLEVBQUUsU0FBUyxFQUFXLE1BQU0sMkJBQTJCLENBQUM7QUFDcEYsT0FBTyxFQUFNLElBQUksRUFBRSxTQUFTLEVBQUMsTUFBTSxnQkFBZ0IsQ0FBQztBQUVwRCxPQUFPLEVBQUMsWUFBWSxFQUFpQixNQUFNLDJCQUEyQixDQUFDO0FBQ3ZFLE9BQU8sRUFBQywwQkFBMEIsRUFBQyxNQUFNLHdEQUF3RCxDQUFDO0FBQ2xHLE9BQU8sRUFBQyxpQkFBaUIsRUFBQyxNQUFNLHNEQUFzRCxDQUFDO0FBQ3ZGLE9BQU8sRUFBQyx1QkFBdUIsRUFBQyxNQUFNLDRDQUE0QyxDQUFDOzs7Ozs7Ozs7O0FBY25GO0lBTWtELHdEQUFpQjtJQTBMakUsc0NBQXNCLFFBQXlCLEVBQVkscUJBQThDLEVBQVksU0FBdUI7UUFBNUksWUFDRSxpQkFBTyxTQUNSO1FBRnFCLGNBQVEsR0FBUixRQUFRLENBQWlCO1FBQVksMkJBQXFCLEdBQXJCLHFCQUFxQixDQUF5QjtRQUFZLGVBQVMsR0FBVCxTQUFTLENBQWM7Ozs7O1FBcEdsSSxlQUFTLEdBQTRCLElBQUksWUFBWSxFQUFhLENBQUM7Ozs7O1FBTW5FLGFBQU8sR0FBeUIsSUFBSSxZQUFZLEVBQVUsQ0FB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QUV2QywwREFBNEY7O0lBQzVGLDZEQUE4Rjs7SUFDOUYsb0RBQXFFOzs7OztJQUtyRSxrREFBNkI7Ozs7O0lBSzdCLHVEQUFpQzs7Ozs7SUFLakMsc0RBQWdDOzs7OztJQUtoQywrREFBeUM7Ozs7O0lBS3pDLDhEQUF3Qzs7Ozs7SUFLeEMsOERBQXdDOzs7OztJQUt4QywrQ0FBeUI7Ozs7O0lBS3pCLG1EQUE2Qjs7Ozs7SUFLN0Isa0RBQTRCOzs7OztJQUs1QixpREFBMkI7Ozs7O0lBSzNCLG1EQUE2Qjs7Ozs7SUFLN0Isa0RBQTZCOzs7OztJQUs3QiwrQ0FBMEI7Ozs7O0lBSzFCLCtDQUF5Qjs7Ozs7SUFLekIsaURBQTJCOzs7Ozs7SUFPM0IsaURBQTZFOzs7Ozs7SUFNN0UsK0NBQXFFOztJQUVyRSxnREFBcUI7O0lBQ3JCLCtDQUFvQjs7SUFDcEIsbURBQTZCOztJQUM3QixxREFBK0I7O0lBQy9CLGdEQUEwQjs7SUFDMUIsc0RBQWtDOztJQUNsQyxvREFBb0I7O0lBQ3BCLDZDQUFxQjs7SUFDckIsOENBQXNCOztJQUN0Qiw2Q0FBYzs7SUFFZCx1REFHQzs7SUFFRCxzREFJQzs7SUFFRCw4REFJQzs7SUFFRCwrQ0E4REM7Ozs7O0lBRVcsZ0RBQW1DOzs7OztJQUFFLDZEQUF3RDs7Ozs7SUFBRSxpREFBaUMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQge1xuICBBZnRlclZpZXdJbml0LFxuICBDb21wb25lbnQsIEVsZW1lbnRSZWYsXG4gIEV2ZW50RW1pdHRlcixcbiAgSW5wdXQsIE9uQ2hhbmdlcyxcbiAgT25EZXN0cm95LFxuICBPbkluaXQsXG4gIE91dHB1dCxcbiAgUXVlcnlMaXN0LCBTaW1wbGVDaGFuZ2VzLFxuICBWaWV3Q2hpbGQsXG4gIFZpZXdDaGlsZHJlbixcbiAgVmlld0VuY2Fwc3VsYXRpb25cbn0gZnJvbSAnQGFuZ3VsYXIvY29yZSc7XG5pbXBvcnQge0xpdmVBcHBzU2VydmljZX0gZnJvbSAnLi4vLi4vc2VydmljZXMvbGl2ZS1hcHBzLnNlcnZpY2UnO1xuaW1wb3J0IHtDYXJkQ29uZmlnLCBDYXNlSW5mbywgQ2FzZVJvdXRlLCBNZXRhZGF0YX0gZnJvbSAnLi4vLi4vbW9kZWxzL2xpdmVhcHBzZGF0YSc7XG5pbXBvcnQge21hcCwgdGFrZSwgdGFrZVVudGlsfSBmcm9tICdyeGpzL29wZXJhdG9ycyc7XG5pbXBvcnQge1N1YmplY3R9IGZyb20gJ3J4anMnO1xuaW1wb3J0IHtEb21TYW5pdGl6ZXIsIE1ldGEsIFNhZmVIdG1sfSBmcm9tICdAYW5ndWxhci9wbGF0Zm9ybS1icm93c2VyJztcbmltcG9ydCB7TGl2ZUFwcHNTdGF0ZUljb25Db21wb25lbnR9IGZyb20gJy4uL2xpdmUtYXBwcy1zdGF0ZS1pY29uL2xpdmUtYXBwcy1zdGF0ZS1pY29uLmNvbXBvbmVudCc7XG5pbXBvcnQge0xpdmVBcHBzQ29tcG9uZW50fSBmcm9tICcuLi9saXZlLWFwcHMtY29tcG9uZW50L2xpdmUtYXBwcy1jb21wb25lbnQuY29tcG9uZW50JztcbmltcG9ydCB7VGNDYXNlQ2FyZENvbmZpZ1NlcnZpY2V9IGZyb20gJy4uLy4uL3NlcnZpY2VzL3RjLWNhc2UtY2FyZC1jb25maWcuc2VydmljZSc7XG5pbXBvcnQge1RjQ29tcG9uZW50LCBUY0NvcmVDb21tb25GdW5jdGlvbnN9IGZyb20gJ0B0aWJjby10Y3N0ay90Yy1jb3JlLWxpYic7XG5pbXBvcnQge0FjdGl2YXRlZFJvdXRlLCBSb3V0ZXJ9IGZyb20gJ0Bhbmd1bGFyL3JvdXRlcic7XG5cbi8qKlxuICogUmVuZGVycyBjYXNlIHN1bW1hcnkgY2FyZHNcbiAqXG4gKiAhW2FsdC10ZXh0XSguLi9saXZlLWFwcHMtY2FzZS1zdW1tYXJ5LnBuZyBcIkltYWdlXCIpXG4gKlxuICogIVthbHQtdGV4dF0oLi4vbGl2ZS1hcHBzLWNhc2Utc3VtbWFyeS0yLnBuZyBcIkltYWdlXCIpXG4gKlxuICpAZXhhbXBsZSA8dGNsYS1saXZlLWFwcHMtY2FzZS1zdW1tYXJ5PjwvdGNsYS1saXZlLWFwcHMtY2FzZS1zdW1tYXJ5PlxuICovXG5cbkBDb21wb25lbnQoe1xuICBzZWxlY3RvcjogJ3RjbGEtbGl2ZS1hcHBzLWNhc2Utc3VtbWFyeScsXG4gIHRlbXBsYXRlVXJsOiAnLi9saXZlLWFwcHMtY2FzZS1zdW1tYXJ5LmNvbXBvbmVudC5odG1sJyxcbiAgc3R5bGVVcmxzOiBbJy4vbGl2ZS1hcHBzLWNhc2Utc3VtbWFyeS5jb21wb25lbnQuY3NzJ11cbn0pXG5cbmV4cG9ydCBjbGFzcyBMaXZlQXBwc0Nhc2VTdW1tYXJ5Q29tcG9uZW50IGV4dGVuZHMgTGl2ZUFwcHNDb21wb25lbnQgaW1wbGVtZW50cyBPbkluaXQsIE9uQ2hhbmdlcywgQWZ0ZXJWaWV3SW5pdCB7XG4gIC8vIFRoZSBWaWV3Q2hpbGQgZGVjbGFyYXRpb25zIGdpdmUgYWNjZXNzIHRvIGNvbXBvbmVudHMgbWFya2VkIG9uIHRoZSB0ZW1wbGF0ZSBzbyB0aGF0IEkgY2FuIGNhbGwgcHVibGljIGZ1bmN0aW9ucyBsaWtlIHJlZnJlc2hcbiAgQFZpZXdDaGlsZCgnY2FzZVN0YXRlSWNvbicsIHtzdGF0aWM6IGZhbHNlfSkgc3RhdGVJY29uQ29tcG9uZW50OiBMaXZlQXBwc1N0YXRlSWNvbkNvbXBvbmVudDtcbiAgQFZpZXdDaGlsZCgnY2FzZVR5cGVJY29uJywge3N0YXRpYzogZmFsc2V9KSBjYXNlVHlwZUljb25Db21wb25lbnQ6IExpdmVBcHBzU3RhdGVJY29uQ29tcG9uZW50O1xuICBAVmlld0NoaWxkKCdjb21wb25lbnREaXYnLCB7c3RhdGljOiBmYWxzZX0pIGNvbXBvbmVudERpdjogRWxlbWVudFJlZjtcblxuICAvKipcbiAgICogV2hldGhlciB0byB1c2Ugc3RhdGljIGRhdGEgKGllLiB3aGVuIGluIGFwcCBjb25maWcgYm94KVxuICAgKi9cbiAgQElucHV0KCkgY29uZmlnTW9kZTogYm9vbGVhbjtcblxuICAvKipcbiAgICogc3RhdGljIGRhdGEgZm9yIGFwcCBjb25maWcgYm94XG4gICAqL1xuICBASW5wdXQoKSBjb25maWdNb2RlQ29sb3I6IHN0cmluZztcblxuICAvKipcbiAgICogc3RhdGljIGRhdGEgZm9yIGFwcCBjb25maWcgYm94XG4gICAqL1xuICBASW5wdXQoKSBjb25maWdNb2RlSWNvbjogc3RyaW5nO1xuXG4gIC8qKlxuICAgKiBzdGF0aWMgZGF0YSBmb3IgYXBwIGNvbmZpZyBib3hcbiAgICovXG4gIEBJbnB1dCgpIGNvbmZpZ01vZGVDYXNlVHlwZUNvbG9yOiBzdHJpbmc7XG5cbiAgLyoqXG4gICAqIHN0YXRpYyBkYXRhIGZvciBhcHAgY29uZmlnIGJveFxuICAgKi9cbiAgQElucHV0KCkgY29uZmlnTW9kZUNhc2VUeXBlSWNvbjogc3RyaW5nO1xuXG4gIC8qKlxuICAgKiBzdGF0aWMgZGF0YSBmb3IgYXBwIGNvbmZpZyBib3hcbiAgICovXG4gIEBJbnB1dCgpIGNvbmZpZ01vZGVBcHBUeXBlTGFiZWw6IHN0cmluZztcblxuICAvKipcbiAgICogVGhlIGNhc2UgcmVmZXJlbmNlXG4gICAqL1xuICBASW5wdXQoKSBjYXNlUmVmOiBzdHJpbmc7XG5cbiAgLyoqXG4gICAqIENhcmQgRGVzY3JpcHRpb25cbiAgICovXG4gIEBJbnB1dCgpIGRlc2NyaXB0aW9uOiBzdHJpbmc7XG5cbiAgLyoqXG4gICAqIFdvcmtpdGVtIElkXG4gICAqL1xuICBASW5wdXQoKSB3b3JraXRlbUlkOiBzdHJpbmc7XG5cbiAgLyoqXG4gICAqIHNhbmRib3hJZCAtIHRoaXMgY29tZXMgZnJvbSBjbGFpbXMgcmVzb2x2ZXJcbiAgICovXG4gIEBJbnB1dCgpIHNhbmRib3hJZDogbnVtYmVyO1xuXG4gIC8qKlxuICAgKiBjYXNlIGNhcmQgZm9ybWF0IC0gbGlzdCwgY2FyZCwgbWluaUNhcmQsIHN0YXRpY0xpc3QgKG5vIGNsaWNrIGV2ZW50KVxuICAgKi9cbiAgQElucHV0KCkgZGlzcGxheVR5cGU6IHN0cmluZzsgLy8gbWluaUNhcmQsIGNhcmQsIGxpc3RcblxuICAvKipcbiAgICogV2hldGhlciB0byBkaXNwbGF5IGEgYm9yZGVyIGFyb3VuZCB0aGUgY2FyZFxuICAgKi9cbiAgQElucHV0KCkgYm9yZGVyQ2FyZDogYm9vbGVhbjtcblxuICAvKipcbiAgICogV2hldGhlciB0byBkaXNwbGF5IHRoZSBjb2xvcmVkIFwiYmFyXCIgb24gYSBzdW1tYXJ5IGNhcmQgKG9uIGxlZnQgb3IgdG9wKVxuICAgKi9cbiAgQElucHV0KCkgdHlwZUJhcjogYm9vbGVhbjtcblxuICAvKipcbiAgICogVGhlIEFwcGxpY2F0aW9uIElEIG9mIHRoZSBVSSAoc2hvdWxkIGlkZWFsbHkgYmUgdW5pcXVlIGFzIGl0IGlzIHNoYXJlZCBzdGF0ZSBrZXkpXG4gICAqL1xuICBASW5wdXQoKSB1aUFwcElkOiBzdHJpbmc7XG5cbiAgLyoqXG4gICAqIFRleHQgdG8gaGlnaGxpZ2h0IGluIHRoZSBsaXN0IG9mIGNhc2VzIChub3JtYWxsIHRleHQgdGhhdCB3YXMgc2VhcmNoZWQpXG4gICAqL1xuICBASW5wdXQoKSBoaWdobGlnaHQ6IHN0cmluZztcblxuXG4gIC8qKlxuICAgKiB+ZXZlbnQgY2xpY2tDYXNlIDogQ2FzZSBjbGlja2VkXG4gICAqIH5wYXlsb2FkIENhc2VSb3V0ZSA6IENhc2VSb3V0ZSBvYmplY3Qgb3V0cHV0IHdoZW4gY2FzZSBpcyBjbGlja2VkIHNvIGNhbGxpbmcgY29tcG9uZW50IGNhbiByb3V0ZSBhY2NvcmRpbmdseSAtIGllLiByb3V0ZSB0byBjYXNlXG4gICAqL1xuICBAT3V0cHV0KCkgY2xpY2tDYXNlOiBFdmVudEVtaXR0ZXI8Q2FzZVJvdXRlPiA9IG5ldyBFdmVudEVtaXR0ZXI8Q2FzZVJvdXRlPigpO1xuXG4gIC8qKlxuICAgKiB+ZXZlbnQgZGVsZXRlZCA6IENhc2UgRGlzcGxheWVkIGhhcyBiZWVuIGRlbGV0ZWRcbiAgICogfnBheWxvYWQgc3RyaW5nIDogc3RyaW5nIGVtaXR0ZWQgd2hlbiBzdW1tYXJ5IHRyaWVzIHRvIGxvYWQgZGF0YSBmb3IgYSBjYXNlIHRoYXQgaGFzIGJlZW4gZGVsZXRlZCAoc28gaXQgY2FuIGJlIGhpZGRlbi5yZW1vdmVkIGZyb20gLSBmb3IgZXhhbXBsZSByZWNlbnQgY2FzZXMgbGlzdClcbiAgICovXG4gIEBPdXRwdXQoKSBkZWxldGVkOiBFdmVudEVtaXR0ZXI8c3RyaW5nPiA9IG5ldyBFdmVudEVtaXR0ZXI8c3RyaW5nPigpO1xuXG4gIHB1YmxpYyBjYXNlZGF0YTogYW55O1xuICBwdWJsaWMgc3VtbWFyeTogYW55O1xuICBwdWJsaWMgc3VtbWFyeUtleXM6IHN0cmluZ1tdO1xuICBwdWJsaWMgc3VtbWFyeVZhbHVlczogc3RyaW5nW107XG4gIHB1YmxpYyBtZXRhZGF0YTogTWV0YWRhdGE7XG4gIHB1YmxpYyBhcHBTdGF0ZUNvbmZpZzogQ2FyZENvbmZpZztcbiAgcHVibGljIGVycm9yTWVzc2FnZTtcbiAgcHVibGljIGFwcElkOiBzdHJpbmc7XG4gIHB1YmxpYyB0eXBlSWQ6IHN0cmluZztcbiAgY29sb3I6IHN0cmluZztcblxuICBwdWJsaWMgY2xpY2tDYXNlQWN0aW9uID0gKCkgPT4ge1xuICAgIGNvbnN0IGNhc2VSb3V0ZSA9IG5ldyBDYXNlUm91dGUoKS5kZXNlcmlhbGl6ZSh7IGNhc2VSZWY6IHRoaXMuY2FzZVJlZiwgYXBwSWQ6IHRoaXMuYXBwSWQsIHR5cGVJZDogdGhpcy50eXBlSWQsIHdvcmtpdGVtSWQ6IHRoaXMud29ya2l0ZW1JZH0pO1xuICAgIHRoaXMuY2xpY2tDYXNlLmVtaXQoY2FzZVJvdXRlKTtcbiAgfVxuXG4gIHB1YmxpYyByZXN0eWxlUHJldmlldyA9IChpY29uLCBmaWxsKSA9PiB7XG4gICAgdGhpcy5tZXRhZGF0YS5zdGF0ZUljb24gPSBpY29uO1xuICAgIHRoaXMubWV0YWRhdGEuc3RhdGVDb2xvciA9IGZpbGw7XG4gICAgdGhpcy5zdGF0ZUljb25Db21wb25lbnQucmVmcmVzaChpY29uLCBmaWxsKTtcbiAgfVxuXG4gIHB1YmxpYyByZXN0eWxlUHJldmlld0Nhc2VUeXBlID0gKGljb24sIGZpbGwpID0+IHtcbiAgICB0aGlzLm1ldGFkYXRhLmNhc2VUeXBlSWNvbiA9IGljb247XG4gICAgdGhpcy5tZXRhZGF0YS5jYXNlVHlwZUNvbG9yID0gZmlsbDtcbiAgICB0aGlzLmNhc2VUeXBlSWNvbkNvbXBvbmVudC5yZWZyZXNoKGljb24sIGZpbGwpO1xuICB9XG5cbiAgcHVibGljIHJlZnJlc2ggPSAoKSA9PiB7XG4gICAgaWYgKCF0aGlzLmNvbmZpZ01vZGUpIHtcbiAgICAgIHRoaXMuY2FzZUNhcmRDb25maWdTZXJ2aWNlLmdldENhc2VXaXRoU3VtbWFyeSh0aGlzLmNhc2VSZWYsIHRoaXMuc2FuZGJveElkLCB0aGlzLnVpQXBwSWQpXG4gICAgICAgIC5waXBlKFxuICAgICAgICAgIHRha2UoMSksXG4gICAgICAgICAgdGFrZVVudGlsKHRoaXMuX2Rlc3Ryb3llZCQpLFxuICAgICAgICApLnN1YnNjcmliZShcbiAgICAgICAgY2FzZWluZm8gPT4ge1xuICAgICAgICAgIGlmICghY2FzZWluZm8uZGVsZXRlZCkge1xuICAgICAgICAgICAgdGhpcy5hcHBJZCA9IGNhc2VpbmZvLm1ldGFkYXRhLmFwcGxpY2F0aW9uSWQ7XG4gICAgICAgICAgICB0aGlzLnR5cGVJZCA9IGNhc2VpbmZvLm1ldGFkYXRhLnR5cGVJZDtcbiAgICAgICAgICAgIHRoaXMuY2FzZWRhdGEgPSBjYXNlaW5mby51bnRhZ2dlZENhc2VkYXRhT2JqO1xuICAgICAgICAgICAgdGhpcy5tZXRhZGF0YSA9IGNhc2VpbmZvLm1ldGFkYXRhO1xuICAgICAgICAgICAgdGhpcy5zdW1tYXJ5ID0gY2FzZWluZm8uc3VtbWFyeU9iajtcbiAgICAgICAgICAgIHRoaXMuc3VtbWFyeUtleXMgPSBPYmplY3Qua2V5cyh0aGlzLnN1bW1hcnkpO1xuICAgICAgICAgICAgdGhpcy5zdW1tYXJ5VmFsdWVzID0gT2JqZWN0LnZhbHVlcyh0aGlzLnN1bW1hcnkpO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAvLyBub3RpZnkgcGFyZW50IGNhc2UgaGFzIGJlZW4gZGVsZXRlZFxuICAgICAgICAgICAgdGhpcy5kZWxldGVkLmVtaXQodGhpcy5jYXNlUmVmKTtcbiAgICAgICAgICB9XG4gICAgICAgIH0sIGVycm9yID0+IHtcbiAgICAgICAgICB0aGlzLmVycm9yTWVzc2FnZSA9ICdFcnJvciByZXRyaWV2aW5nIGNhc2UgZGF0YTogJyArIGVycm9yLmVycm9yLmVycm9yTXNnO1xuICAgICAgICB9KTtcbiAgICB9IGVsc2Uge1xuICAgICAgY29uc3Qgc2FtcGxlQ2FzZUluZm9KU09OID0gJ3tcXG4nICtcbiAgICAgICAgJyAgXCJ1bnRhZ2dlZENhc2VkYXRhXCI6IFwiXCIsXFxuJyArXG4gICAgICAgICcgIFwic3VtbWFyeVwiOiBcIntcXFxcXCJzdGF0ZVxcXFxcIjpcXFxcXCJDdXJyZW50IFN0YXRlXFxcXFwiLFxcXFxcIlN1bW1hcnkxXFxcXFwiOlxcXFxcIjAwMDAwMVxcXFxcIixcXFxcXCJTdW1tYXJ5MlxcXFxcIjpcXFxcXCJzdW1tYXJ5IGRhdGFcXFxcXCIsXFxcXFwiU3VtbWFyeTNcXFxcXCI6XFxcXFwic3VtbWFyeSBkYXRhXFxcXFwifVwiLFxcbicgK1xuICAgICAgICAnICBcIm1ldGFkYXRhXCI6IHtcXG4nICtcbiAgICAgICAgJyAgICBcImNyZWF0ZWRCeVwiOiBcIi0xXCIsXFxuJyArXG4gICAgICAgICcgICAgXCJjcmVhdGlvblRpbWVzdGFtcFwiOiBcIjIwMTgtMTEtMjdUMDg6NDA6MDMuNDA0WlwiLFxcbicgK1xuICAgICAgICAnICAgIFwiY3JlYXRlZEJ5RGV0YWlsc1wiOiB7XFxuJyArXG4gICAgICAgICcgICAgICBcInVzZXJuYW1lXCI6IFwiY3JlYXRvckBteWNvbXBhbnkuY29tXCJcXG4nICtcbiAgICAgICAgJyAgICB9LFxcbicgK1xuICAgICAgICAnICAgIFwibW9kaWZpZWRCeVwiOiBcIi0xXCIsXFxuJyArXG4gICAgICAgICcgICAgXCJtb2RpZmljYXRpb25UaW1lc3RhbXBcIjogXCIyMDE4LTExLTI3VDA4OjQwOjIyLjAxMFpcIixcXG4nICtcbiAgICAgICAgJyAgICBcImxvY2tUeXBlXCI6IFwiMVwiLFxcbicgK1xuICAgICAgICAnICAgIFwibXNMb2NrRXhwaXJ5XCI6IFwiMTU0MzMwODAyMjI3MVwiLFxcbicgK1xuICAgICAgICAnICAgIFwibXNTeXN0ZW1UaW1lXCI6IFwiMTU0NTEyNzgwMDgzOVwiLFxcbicgK1xuICAgICAgICAnICAgIFwiYXBwbGljYXRpb25JZFwiOiBcIjkzNFwiLFxcbicgK1xuICAgICAgICAnICAgIFwidHlwZUlkXCI6IFwiMVwiXFxuJyArXG4gICAgICAgICcgIH0sXFxuJyArXG4gICAgICAgICcgIFwic3VtbWFyeU9ialwiOiB7XFxuJyArXG4gICAgICAgICcgICAgXCJzdGF0ZVwiOiBcIkN1cnJlbnQgU3RhdGVcIixcXG4nICtcbiAgICAgICAgJyAgICBcIlN1bW1hcnkgMVwiOiBcIjAwMDAwMVwiLFxcbicgK1xuICAgICAgICAnICAgIFwiU3VtbWFyeSAyXCI6IFwiVGhlIGNhc2UgbmFtZVwiLFxcbicgK1xuICAgICAgICAnICAgIFwiU3VtbWFyeSAzXCI6IFwiVGhlIGNhc2UgZGVzY3JpcHRpb25cIlxcbicgK1xuICAgICAgICAnICB9LFxcbicgK1xuICAgICAgICAnICBcInVudGFnZ2VkQ2FzZWRhdGFPYmpcIjoge1xcbicgK1xuICAgICAgICAnICB9XFxuJyArXG4gICAgICAgICd9J1xuICAgICAgY29uc3QgY2FzZWluZm8gPSBuZXcgQ2FzZUluZm8oKS5kZXNlcmlhbGl6ZShKU09OLnBhcnNlKHNhbXBsZUNhc2VJbmZvSlNPTikpO1xuICAgICAgdGhpcy5jYXNlZGF0YSA9IGNhc2VpbmZvLnVudGFnZ2VkQ2FzZWRhdGFPYmo7XG4gICAgICB0aGlzLm1ldGFkYXRhID0gY2FzZWluZm8ubWV0YWRhdGE7XG4gICAgICB0aGlzLnN1bW1hcnkgPSBjYXNlaW5mby5zdW1tYXJ5T2JqO1xuICAgICAgdGhpcy5zdW1tYXJ5S2V5cyA9IE9iamVjdC5rZXlzKHRoaXMuc3VtbWFyeSk7XG4gICAgICB0aGlzLnN1bW1hcnlWYWx1ZXMgPSBPYmplY3QudmFsdWVzKHRoaXMuc3VtbWFyeSk7XG4gICAgICB0aGlzLm1ldGFkYXRhLnN0YXRlSWNvbiA9IHRoaXMuY29uZmlnTW9kZUljb247XG4gICAgICB0aGlzLm1ldGFkYXRhLnN0YXRlQ29sb3IgPSB0aGlzLmNvbmZpZ01vZGVDb2xvcjtcbiAgICAgIHRoaXMubWV0YWRhdGEuY2FzZVR5cGVDb2xvciA9IHRoaXMuY29uZmlnTW9kZUNhc2VUeXBlQ29sb3I7XG4gICAgICB0aGlzLm1ldGFkYXRhLmNhc2VUeXBlSWNvbiA9IHRoaXMuY29uZmlnTW9kZUNhc2VUeXBlSWNvbjtcbiAgICAgIHRoaXMubWV0YWRhdGEuYXBwbGljYXRpb25MYWJlbCA9IHRoaXMuY29uZmlnTW9kZUFwcFR5cGVMYWJlbDtcbiAgICB9XG4gIH1cblxuICBjb25zdHJ1Y3Rvcihwcm90ZWN0ZWQgbGl2ZWFwcHM6IExpdmVBcHBzU2VydmljZSwgcHJvdGVjdGVkIGNhc2VDYXJkQ29uZmlnU2VydmljZTogVGNDYXNlQ2FyZENvbmZpZ1NlcnZpY2UsIHByb3RlY3RlZCBzYW5pdGl6ZXI6IERvbVNhbml0aXplcikge1xuICAgIHN1cGVyKCk7XG4gIH1cblxuICBuZ0FmdGVyVmlld0luaXQoKSB7XG4gICAgc3VwZXIubmdBZnRlclZpZXdJbml0KCk7XG4gICAgdGhpcy5jb250YWluZXJDaGFuZ2VzJC5zdWJzY3JpYmUoKTtcbiAgfVxuXG4gIG5nT25Jbml0KCkge1xuICAgIHN1cGVyLm5nT25Jbml0KCk7XG4gICAgdGhpcy5yZWZyZXNoKCk7XG4gIH1cblxuICBuZ09uQ2hhbmdlcyhjaGFuZ2VzOiBTaW1wbGVDaGFuZ2VzKTogdm9pZCB7XG4gICAgaWYgKGNoYW5nZXMuY29uZmlnTW9kZUFwcFR5cGVMYWJlbCAmJiAhY2hhbmdlcy5jb25maWdNb2RlQXBwVHlwZUxhYmVsLmlzRmlyc3RDaGFuZ2UoKSAmJiAoY2hhbmdlcy5jb25maWdNb2RlQXBwVHlwZUxhYmVsLmN1cnJlbnRWYWx1ZSAhPT0gY2hhbmdlcy5jb25maWdNb2RlQXBwVHlwZUxhYmVsLnByZXZpb3VzVmFsdWUpKSB7XG4gICAgICB0aGlzLnJlZnJlc2goKTtcbiAgICB9XG4gIH1cblxufVxuIl19