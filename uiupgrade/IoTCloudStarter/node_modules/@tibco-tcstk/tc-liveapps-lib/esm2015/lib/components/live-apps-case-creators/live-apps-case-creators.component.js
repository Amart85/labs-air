/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
import { Component, EventEmitter, Input, Output } from '@angular/core';
import { LiveAppsService } from '../../services/live-apps.service';
import { take, takeUntil, tap } from 'rxjs/operators';
import { LiveAppsComponent } from '../live-apps-component/live-apps-component.component';
import { TcCaseProcessesService } from '../../services/tc-case-processes.service';
/**
 * Wraps case creator and case creator list
 *
 * \@example <tcla-live-apps-case-creators></tcla-live-apps-case-creators>
 */
export class LiveAppsCaseCreatorsComponent extends LiveAppsComponent {
    /**
     * @param {?} liveapps
     * @param {?} caseProcessesService
     */
    constructor(liveapps, caseProcessesService) {
        super();
        this.liveapps = liveapps;
        this.caseProcessesService = caseProcessesService;
        /**
         * ~event creatorClicked : Case Creator selected
         * ~payload LaProcessSelection : LaProcessSelection object output when an action is clicked (ie. message to parent to run creator component)
         */
        this.creatorClicked = new EventEmitter();
        this.refresh = (/**
         * @return {?}
         */
        () => {
            this.caseProcessesService.getCaseCreators(this.sandboxId, this.appId, this.typeId)
                .pipe(take(1), takeUntil(this._destroyed$)).subscribe((/**
             * @param {?} casecreators
             * @return {?}
             */
            casecreators => {
                this.casecreators = casecreators.creators;
                if (this.casecreators.length === 1) {
                    this.selectCreator(this.casecreators[0]);
                }
            }), (/**
             * @param {?} error
             * @return {?}
             */
            error => { this.errorMessage = 'Error retrieving case actions: ' + error.error.errorMsg; }));
        });
    }
    /**
     * @param {?} creator
     * @return {?}
     */
    selectCreator(creator) {
        this.caseProcessesService.getProcessDetails(null, this.appId, this.typeId, this.sandboxId, null, creator, 100).pipe(take(1), takeUntil(this._destroyed$), tap((/**
         * @param {?} processDetails
         * @return {?}
         */
        processDetails => {
            if (!processDetails || !processDetails.process || (processDetails.process.jsonSchema.$schema === 'NOSCHEMA')) {
                // This will be triggered when no form schema is available
                // Typically happens when:
                // 1) The form has elements that are not supported by the Live Apps API for form schemas such as participant selectors
                // 2) The Live Apps application is legacy and has no form schema at all, redeploying the live apps application would fix this.
                console.error('No schema available for this case type: The form may not be supported or you may need to update/re-deploy the live apps application. Alternatively use a custom form.');
            }
        })))
            .subscribe((/**
         * @param {?} processSchema
         * @return {?}
         */
        processSchema => {
            this.creatorClicked.emit(processSchema);
            return processSchema;
        }), (/**
         * @param {?} error
         * @return {?}
         */
        error => { this.errorMessage = 'Error retrieving case actions: ' + error.error.errorMsg; }));
    }
    /**
     * @return {?}
     */
    ngOnInit() {
        this.refresh();
    }
}
LiveAppsCaseCreatorsComponent.decorators = [
    { type: Component, args: [{
                selector: 'tcla-live-apps-case-creators',
                template: "<div *ngIf=\"casecreators && casecreators.length > 1\" fxFlex style=\"margin-left: 10px;\">\n  <span class=\"tcs-case-creation-dialog-instruction\">Select a case creator</span>\n  <mat-select #creatorSelector class=\"tcs-creator-selector-option\" [disableOptionCentering]=\"true\"\n              placeholder=\"Case Creators\" (selectionChange)=\"selectCreator($event.value)\">\n    <mat-option *ngFor=\"let creator of casecreators\" [value]=\"creator\">\n      <span>{{creator.label}}</span>\n    </mat-option>\n  </mat-select>\n</div>\n",
                styles: [":host ::ng-deep .tcs-creator-selector-option .mat-select-value span{font-family:Source Sans Pro;font-size:16px;font-weight:400;font-style:normal;font-stretch:normal;line-height:1.5;letter-spacing:.3px;color:#0081cb}:host ::ng-deep .tcs-creator-selector-option .mat-select-arrow-wrapper div{color:#0081cb}:host ::ng-deep .mat-select-value{min-width:100px;max-width:100%;width:auto}.tcs-creators-box{width:200px;height:44px;box-shadow:inset 0 1px 3px 0 rgba(0,0,0,.5);background-color:#fff}tcs-creator-selector-option{width:170px;margin-left:5px;margin-right:5px;background-color:#eee;padding-left:20px;padding-right:20px;height:35px}.tcs-case-creation-dialog-instruction{font-family:Source Sans Pro;font-size:16px;font-weight:600;font-style:normal;font-stretch:normal;line-height:normal;letter-spacing:normal;color:#727272}"]
            }] }
];
/** @nocollapse */
LiveAppsCaseCreatorsComponent.ctorParameters = () => [
    { type: LiveAppsService },
    { type: TcCaseProcessesService }
];
LiveAppsCaseCreatorsComponent.propDecorators = {
    appId: [{ type: Input }],
    typeId: [{ type: Input }],
    sandboxId: [{ type: Input }],
    creatorClicked: [{ type: Output }]
};
if (false) {
    /**
     * The LA Application Id
     * @type {?}
     */
    LiveAppsCaseCreatorsComponent.prototype.appId;
    /**
     * The LA Application Type Id (generally 1)
     * @type {?}
     */
    LiveAppsCaseCreatorsComponent.prototype.typeId;
    /**
     * sandboxId - this comes from claims resolver
     * @type {?}
     */
    LiveAppsCaseCreatorsComponent.prototype.sandboxId;
    /**
     * ~event creatorClicked : Case Creator selected
     * ~payload LaProcessSelection : LaProcessSelection object output when an action is clicked (ie. message to parent to run creator component)
     * @type {?}
     */
    LiveAppsCaseCreatorsComponent.prototype.creatorClicked;
    /** @type {?} */
    LiveAppsCaseCreatorsComponent.prototype.casecreators;
    /** @type {?} */
    LiveAppsCaseCreatorsComponent.prototype.errorMessage;
    /** @type {?} */
    LiveAppsCaseCreatorsComponent.prototype.appSchema;
    /** @type {?} */
    LiveAppsCaseCreatorsComponent.prototype.caseType;
    /** @type {?} */
    LiveAppsCaseCreatorsComponent.prototype.caseActionList;
    /** @type {?} */
    LiveAppsCaseCreatorsComponent.prototype.refresh;
    /**
     * @type {?}
     * @protected
     */
    LiveAppsCaseCreatorsComponent.prototype.liveapps;
    /**
     * @type {?}
     * @protected
     */
    LiveAppsCaseCreatorsComponent.prototype.caseProcessesService;
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibGl2ZS1hcHBzLWNhc2UtY3JlYXRvcnMuY29tcG9uZW50LmpzIiwic291cmNlUm9vdCI6Im5nOi8vQHRpYmNvLXRjc3RrL3RjLWxpdmVhcHBzLWxpYi8iLCJzb3VyY2VzIjpbImxpYi9jb21wb25lbnRzL2xpdmUtYXBwcy1jYXNlLWNyZWF0b3JzL2xpdmUtYXBwcy1jYXNlLWNyZWF0b3JzLmNvbXBvbmVudC50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOzs7O0FBRUEsT0FBTyxFQUFDLFNBQVMsRUFBRSxZQUFZLEVBQUUsS0FBSyxFQUFxQixNQUFNLEVBQVksTUFBTSxlQUFlLENBQUM7QUFFbkcsT0FBTyxFQUFDLGVBQWUsRUFBQyxNQUFNLGtDQUFrQyxDQUFDO0FBQ2pFLE9BQU8sRUFBTSxJQUFJLEVBQUUsU0FBUyxFQUFFLEdBQUcsRUFBQyxNQUFNLGdCQUFnQixDQUFDO0FBR3pELE9BQU8sRUFBQyxpQkFBaUIsRUFBQyxNQUFNLHNEQUFzRCxDQUFDO0FBQ3ZGLE9BQU8sRUFBQyxzQkFBc0IsRUFBQyxNQUFNLDBDQUEwQyxDQUFDOzs7Ozs7QUFjaEYsTUFBTSxPQUFPLDZCQUE4QixTQUFRLGlCQUFpQjs7Ozs7SUE4QmxFLFlBQXNCLFFBQXlCLEVBQVksb0JBQTRDO1FBQ3JHLEtBQUssRUFBRSxDQUFDO1FBRFksYUFBUSxHQUFSLFFBQVEsQ0FBaUI7UUFBWSx5QkFBb0IsR0FBcEIsb0JBQW9CLENBQXdCOzs7OztRQVY3RixtQkFBYyxHQUFxQyxJQUFJLFlBQVksRUFBc0IsQ0FBQztRQWM3RixZQUFPOzs7UUFBRyxHQUFHLEVBQUU7WUFDcEIsSUFBSSxDQUFDLG9CQUFvQixDQUFDLGVBQWUsQ0FBQyxJQUFJLENBQUMsU0FBUyxFQUFFLElBQUksQ0FBQyxLQUFLLEVBQUUsSUFBSSxDQUFDLE1BQU0sQ0FBQztpQkFDL0UsSUFBSSxDQUNILElBQUksQ0FBQyxDQUFDLENBQUMsRUFDUCxTQUFTLENBQUMsSUFBSSxDQUFDLFdBQVcsQ0FBQyxDQUM1QixDQUFDLFNBQVM7Ozs7WUFDWCxZQUFZLENBQUMsRUFBRTtnQkFDYixJQUFJLENBQUMsWUFBWSxHQUFHLFlBQVksQ0FBQyxRQUFRLENBQUM7Z0JBQzFDLElBQUksSUFBSSxDQUFDLFlBQVksQ0FBQyxNQUFNLEtBQUssQ0FBQyxFQUFFO29CQUNsQyxJQUFJLENBQUMsYUFBYSxDQUFDLElBQUksQ0FBQyxZQUFZLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQztpQkFDMUM7WUFDSCxDQUFDOzs7O1lBQUUsS0FBSyxDQUFDLEVBQUUsR0FBRyxJQUFJLENBQUMsWUFBWSxHQUFHLGlDQUFpQyxHQUFHLEtBQUssQ0FBQyxLQUFLLENBQUMsUUFBUSxDQUFDLENBQUMsQ0FBQyxFQUFDLENBQUM7UUFDbkcsQ0FBQyxFQUFBO0lBZEQsQ0FBQzs7Ozs7SUFnQk0sYUFBYSxDQUFDLE9BQW9CO1FBQ3ZDLElBQUksQ0FBQyxvQkFBb0IsQ0FBQyxpQkFBaUIsQ0FBQyxJQUFJLEVBQUUsSUFBSSxDQUFDLEtBQUssRUFBRSxJQUFJLENBQUMsTUFBTSxFQUFFLElBQUksQ0FBQyxTQUFTLEVBQUUsSUFBSSxFQUFFLE9BQU8sRUFBRSxHQUFHLENBQUMsQ0FBQyxJQUFJLENBQ2pILElBQUksQ0FBQyxDQUFDLENBQUMsRUFDUCxTQUFTLENBQUMsSUFBSSxDQUFDLFdBQVcsQ0FBQyxFQUMzQixHQUFHOzs7O1FBQUMsY0FBYyxDQUFDLEVBQUU7WUFDbkIsSUFBSSxDQUFDLGNBQWMsSUFBSSxDQUFDLGNBQWMsQ0FBQyxPQUFPLElBQUksQ0FBQyxjQUFjLENBQUMsT0FBTyxDQUFDLFVBQVUsQ0FBQyxPQUFPLEtBQUssVUFBVSxDQUFDLEVBQUU7Z0JBQzVHLDBEQUEwRDtnQkFDMUQsMEJBQTBCO2dCQUMxQixzSEFBc0g7Z0JBQ3RILDhIQUE4SDtnQkFDNUgsT0FBTyxDQUFDLEtBQUssQ0FBQyx1S0FBdUssQ0FBQyxDQUFDO2FBQ3hMO1FBQ0gsQ0FBQyxFQUNGLENBQ0Y7YUFDQSxTQUFTOzs7O1FBQUMsYUFBYSxDQUFDLEVBQUU7WUFDdkIsSUFBSSxDQUFDLGNBQWMsQ0FBQyxJQUFJLENBQUMsYUFBYSxDQUFDLENBQUM7WUFDeEMsT0FBTyxhQUFhLENBQUM7UUFDdkIsQ0FBQzs7OztRQUNDLEtBQUssQ0FBQyxFQUFFLEdBQUcsSUFBSSxDQUFDLFlBQVksR0FBRyxpQ0FBaUMsR0FBRyxLQUFLLENBQUMsS0FBSyxDQUFDLFFBQVEsQ0FBQyxDQUFDLENBQUMsRUFBQyxDQUFDO0lBQ2xHLENBQUM7Ozs7SUFFRCxRQUFRO1FBQ04sSUFBSSxDQUFDLE9BQU8sRUFBRSxDQUFDO0lBQ2pCLENBQUM7OztZQTdFRixTQUFTLFNBQUM7Z0JBQ1QsUUFBUSxFQUFFLDhCQUE4QjtnQkFDeEMscWlCQUF1RDs7YUFFeEQ7Ozs7WUFsQk8sZUFBZTtZQUtmLHNCQUFzQjs7O29CQWtCM0IsS0FBSztxQkFLTCxLQUFLO3dCQUtMLEtBQUs7NkJBTUwsTUFBTTs7Ozs7OztJQWhCUCw4Q0FBdUI7Ozs7O0lBS3ZCLCtDQUF3Qjs7Ozs7SUFLeEIsa0RBQTJCOzs7Ozs7SUFNM0IsdURBQW9HOztJQUdwRyxxREFBbUM7O0lBQ25DLHFEQUE0Qjs7SUFFNUIsa0RBQXlCOztJQUN6QixpREFBbUI7O0lBQ25CLHVEQUEwQjs7SUFNMUIsZ0RBWUM7Ozs7O0lBaEJXLGlEQUFtQzs7Ozs7SUFBRSw2REFBc0QiLCJzb3VyY2VzQ29udGVudCI6WyJcblxuaW1wb3J0IHtDb21wb25lbnQsIEV2ZW50RW1pdHRlciwgSW5wdXQsIE9uRGVzdHJveSwgT25Jbml0LCBPdXRwdXQsIFZpZXdDaGlsZH0gZnJvbSAnQGFuZ3VsYXIvY29yZSc7XG5pbXBvcnQge1N1YmplY3R9IGZyb20gJ3J4anMnO1xuaW1wb3J0IHtMaXZlQXBwc1NlcnZpY2V9IGZyb20gJy4uLy4uL3NlcnZpY2VzL2xpdmUtYXBwcy5zZXJ2aWNlJztcbmltcG9ydCB7bWFwLCB0YWtlLCB0YWtlVW50aWwsIHRhcH0gZnJvbSAncnhqcy9vcGVyYXRvcnMnO1xuaW1wb3J0IHtDYXNlQ3JlYXRvciwgQ2FzZVR5cGUsIENhc2VUeXBlc0xpc3QsIFByb2Nlc3N9IGZyb20gJy4uLy4uL21vZGVscy9saXZlYXBwc2RhdGEnO1xuaW1wb3J0IHtMYVByb2Nlc3NTZWxlY3Rpb259IGZyb20gJy4uLy4uL21vZGVscy90Yy1jYXNlLXByb2Nlc3Nlcyc7XG5pbXBvcnQge0xpdmVBcHBzQ29tcG9uZW50fSBmcm9tICcuLi9saXZlLWFwcHMtY29tcG9uZW50L2xpdmUtYXBwcy1jb21wb25lbnQuY29tcG9uZW50JztcbmltcG9ydCB7VGNDYXNlUHJvY2Vzc2VzU2VydmljZX0gZnJvbSAnLi4vLi4vc2VydmljZXMvdGMtY2FzZS1wcm9jZXNzZXMuc2VydmljZSc7XG5pbXBvcnQge0N1c3RvbUZvcm1EZWZzfSBmcm9tICdAdGliY28tdGNzdGsvdGMtZm9ybXMtbGliJztcblxuXG4vKipcbiAqIFdyYXBzIGNhc2UgY3JlYXRvciBhbmQgY2FzZSBjcmVhdG9yIGxpc3RcbiAqXG4gKkBleGFtcGxlIDx0Y2xhLWxpdmUtYXBwcy1jYXNlLWNyZWF0b3JzPjwvdGNsYS1saXZlLWFwcHMtY2FzZS1jcmVhdG9ycz5cbiAqL1xuQENvbXBvbmVudCh7XG4gIHNlbGVjdG9yOiAndGNsYS1saXZlLWFwcHMtY2FzZS1jcmVhdG9ycycsXG4gIHRlbXBsYXRlVXJsOiAnLi9saXZlLWFwcHMtY2FzZS1jcmVhdG9ycy5jb21wb25lbnQuaHRtbCcsXG4gIHN0eWxlVXJsczogWycuL2xpdmUtYXBwcy1jYXNlLWNyZWF0b3JzLmNvbXBvbmVudC5jc3MnXVxufSlcbmV4cG9ydCBjbGFzcyBMaXZlQXBwc0Nhc2VDcmVhdG9yc0NvbXBvbmVudCBleHRlbmRzIExpdmVBcHBzQ29tcG9uZW50IGltcGxlbWVudHMgT25Jbml0IHtcbiAgLyoqXG4gICAqIFRoZSBMQSBBcHBsaWNhdGlvbiBJZFxuICAgKi9cbiAgQElucHV0KCkgYXBwSWQ6IHN0cmluZztcblxuICAvKipcbiAgICogVGhlIExBIEFwcGxpY2F0aW9uIFR5cGUgSWQgKGdlbmVyYWxseSAxKVxuICAgKi9cbiAgQElucHV0KCkgdHlwZUlkOiBzdHJpbmc7XG5cbiAgLyoqXG4gICAqIHNhbmRib3hJZCAtIHRoaXMgY29tZXMgZnJvbSBjbGFpbXMgcmVzb2x2ZXJcbiAgICovXG4gIEBJbnB1dCgpIHNhbmRib3hJZDogbnVtYmVyO1xuXG4gIC8qKlxuICAgKiB+ZXZlbnQgY3JlYXRvckNsaWNrZWQgOiBDYXNlIENyZWF0b3Igc2VsZWN0ZWRcbiAgICogfnBheWxvYWQgTGFQcm9jZXNzU2VsZWN0aW9uIDogTGFQcm9jZXNzU2VsZWN0aW9uIG9iamVjdCBvdXRwdXQgd2hlbiBhbiBhY3Rpb24gaXMgY2xpY2tlZCAoaWUuIG1lc3NhZ2UgdG8gcGFyZW50IHRvIHJ1biBjcmVhdG9yIGNvbXBvbmVudClcbiAgICovXG4gIEBPdXRwdXQoKSBjcmVhdG9yQ2xpY2tlZDogRXZlbnRFbWl0dGVyPExhUHJvY2Vzc1NlbGVjdGlvbj4gPSBuZXcgRXZlbnRFbWl0dGVyPExhUHJvY2Vzc1NlbGVjdGlvbj4oKTtcblxuXG4gIHB1YmxpYyBjYXNlY3JlYXRvcnM6IENhc2VDcmVhdG9yW107XG4gIHB1YmxpYyBlcnJvck1lc3NhZ2U6IHN0cmluZztcblxuICBhcHBTY2hlbWE6IENhc2VUeXBlc0xpc3Q7XG4gIGNhc2VUeXBlOiBDYXNlVHlwZTtcbiAgY2FzZUFjdGlvbkxpc3Q6IFByb2Nlc3NbXTtcblxuICBjb25zdHJ1Y3Rvcihwcm90ZWN0ZWQgbGl2ZWFwcHM6IExpdmVBcHBzU2VydmljZSwgcHJvdGVjdGVkIGNhc2VQcm9jZXNzZXNTZXJ2aWNlOiBUY0Nhc2VQcm9jZXNzZXNTZXJ2aWNlKSB7XG4gICAgc3VwZXIoKTtcbiAgfVxuXG4gIHB1YmxpYyByZWZyZXNoID0gKCkgPT4ge1xuICAgIHRoaXMuY2FzZVByb2Nlc3Nlc1NlcnZpY2UuZ2V0Q2FzZUNyZWF0b3JzKHRoaXMuc2FuZGJveElkLCB0aGlzLmFwcElkLCB0aGlzLnR5cGVJZClcbiAgICAgIC5waXBlKFxuICAgICAgICB0YWtlKDEpLFxuICAgICAgICB0YWtlVW50aWwodGhpcy5fZGVzdHJveWVkJClcbiAgICAgICkuc3Vic2NyaWJlKFxuICAgICAgY2FzZWNyZWF0b3JzID0+IHtcbiAgICAgICAgdGhpcy5jYXNlY3JlYXRvcnMgPSBjYXNlY3JlYXRvcnMuY3JlYXRvcnM7XG4gICAgICAgIGlmICh0aGlzLmNhc2VjcmVhdG9ycy5sZW5ndGggPT09IDEpIHtcbiAgICAgICAgICB0aGlzLnNlbGVjdENyZWF0b3IodGhpcy5jYXNlY3JlYXRvcnNbMF0pO1xuICAgICAgICB9XG4gICAgICB9LCBlcnJvciA9PiB7IHRoaXMuZXJyb3JNZXNzYWdlID0gJ0Vycm9yIHJldHJpZXZpbmcgY2FzZSBhY3Rpb25zOiAnICsgZXJyb3IuZXJyb3IuZXJyb3JNc2c7IH0pO1xuICB9XG5cbiAgcHVibGljIHNlbGVjdENyZWF0b3IoY3JlYXRvcjogQ2FzZUNyZWF0b3IpIHtcbiAgICB0aGlzLmNhc2VQcm9jZXNzZXNTZXJ2aWNlLmdldFByb2Nlc3NEZXRhaWxzKG51bGwsIHRoaXMuYXBwSWQsIHRoaXMudHlwZUlkLCB0aGlzLnNhbmRib3hJZCwgbnVsbCwgY3JlYXRvciwgMTAwKS5waXBlKFxuICAgICAgdGFrZSgxKSxcbiAgICAgIHRha2VVbnRpbCh0aGlzLl9kZXN0cm95ZWQkKSxcbiAgICAgIHRhcChwcm9jZXNzRGV0YWlscyA9PiB7XG4gICAgICAgIGlmICghcHJvY2Vzc0RldGFpbHMgfHwgIXByb2Nlc3NEZXRhaWxzLnByb2Nlc3MgfHwgKHByb2Nlc3NEZXRhaWxzLnByb2Nlc3MuanNvblNjaGVtYS4kc2NoZW1hID09PSAnTk9TQ0hFTUEnKSkge1xuICAgICAgICAgIC8vIFRoaXMgd2lsbCBiZSB0cmlnZ2VyZWQgd2hlbiBubyBmb3JtIHNjaGVtYSBpcyBhdmFpbGFibGVcbiAgICAgICAgICAvLyBUeXBpY2FsbHkgaGFwcGVucyB3aGVuOlxuICAgICAgICAgIC8vIDEpIFRoZSBmb3JtIGhhcyBlbGVtZW50cyB0aGF0IGFyZSBub3Qgc3VwcG9ydGVkIGJ5IHRoZSBMaXZlIEFwcHMgQVBJIGZvciBmb3JtIHNjaGVtYXMgc3VjaCBhcyBwYXJ0aWNpcGFudCBzZWxlY3RvcnNcbiAgICAgICAgICAvLyAyKSBUaGUgTGl2ZSBBcHBzIGFwcGxpY2F0aW9uIGlzIGxlZ2FjeSBhbmQgaGFzIG5vIGZvcm0gc2NoZW1hIGF0IGFsbCwgcmVkZXBsb3lpbmcgdGhlIGxpdmUgYXBwcyBhcHBsaWNhdGlvbiB3b3VsZCBmaXggdGhpcy5cbiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ05vIHNjaGVtYSBhdmFpbGFibGUgZm9yIHRoaXMgY2FzZSB0eXBlOiBUaGUgZm9ybSBtYXkgbm90IGJlIHN1cHBvcnRlZCBvciB5b3UgbWF5IG5lZWQgdG8gdXBkYXRlL3JlLWRlcGxveSB0aGUgbGl2ZSBhcHBzIGFwcGxpY2F0aW9uLiBBbHRlcm5hdGl2ZWx5IHVzZSBhIGN1c3RvbSBmb3JtLicpO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgKVxuICAgIClcbiAgICAuc3Vic2NyaWJlKHByb2Nlc3NTY2hlbWEgPT4ge1xuICAgICAgICB0aGlzLmNyZWF0b3JDbGlja2VkLmVtaXQocHJvY2Vzc1NjaGVtYSk7XG4gICAgICAgIHJldHVybiBwcm9jZXNzU2NoZW1hO1xuICAgICAgfVxuICAgICAgLCBlcnJvciA9PiB7IHRoaXMuZXJyb3JNZXNzYWdlID0gJ0Vycm9yIHJldHJpZXZpbmcgY2FzZSBhY3Rpb25zOiAnICsgZXJyb3IuZXJyb3IuZXJyb3JNc2c7IH0pO1xuICB9XG5cbiAgbmdPbkluaXQoKSB7XG4gICAgdGhpcy5yZWZyZXNoKCk7XG4gIH1cblxufVxuIl19