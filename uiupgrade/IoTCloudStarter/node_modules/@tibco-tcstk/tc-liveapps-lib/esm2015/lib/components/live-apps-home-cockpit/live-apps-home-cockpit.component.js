/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
import { Component, EventEmitter, Input, Output, ViewChild } from '@angular/core';
import { TcButtonsHelperService, RouteAction } from '@tibco-tcstk/tc-core-lib';
import { LiveAppsFavoriteCasesComponent } from '../live-apps-favorite-cases/live-apps-favorite-cases.component';
import { LiveAppsRecentCasesComponent } from '../live-apps-recent-cases/live-apps-recent-cases.component';
import { LiveAppsSearchWidgetComponent } from '../live-apps-search-widget/live-apps-search-widget.component';
import { MatDialog } from '@angular/material';
import { LiveAppsCreatorDialogComponent } from '../live-apps-creator-dialog/live-apps-creator-dialog.component';
import { CaseCreatorSelectionContext } from '../../models/tc-case-creator';
import { LiveAppsNotesComponent } from '../live-apps-notes/live-apps-notes.component';
import { LiveAppsDocumentsComponent } from '../live-apps-documents/live-apps-documents.component';
import { TcRolesService } from '../../services/tc-roles-service.ts.service';
import { Roles, RouteAccessControlConfigurationElement } from '../../models/tc-groups-data';
import { LiveAppsActiveCasesWidgetComponent } from '../live-apps-active-cases-widget/live-apps-active-cases-widget.component';
import { CustomFormDefs } from '@tibco-tcstk/tc-forms-lib';
import { LiveAppsWorkitemsComponent } from '../live-apps-workitems/live-apps-workitems.component';
/**
 * High level component to allow home page view of system
 *
 * ![alt-text](../live-apps-home-cockpit.png "Documents Component Image")
 *
 * \@example <tcla-live-apps-home-cockpit></tcla-live-apps-home-cockpit>
 */
export class LiveAppsHomeCockpitComponent {
    /**
     * @param {?} buttonsHelper
     * @param {?} dialog
     * @param {?} rolesService
     */
    constructor(buttonsHelper, dialog, rolesService) {
        this.buttonsHelper = buttonsHelper;
        this.dialog = dialog;
        this.rolesService = rolesService;
        /**
         * Enable legacy workitems
         */
        this.legacyWorkitems = this.legacyWorkitems ? this.legacyWorkitems : false;
        /**
         * Enable legacy creators
         */
        this.legacyCreators = this.legacyCreators ? this.legacyCreators : false;
        /**
         * Allow override of forms framework
         * Options: bootstrap-4 or material-design
         */
        this.formsFramework = this.formsFramework ? this.formsFramework : 'material-design';
        /**
         * ~event routeAction : Component requests route to another page
         * ~payload RouteAction : RouteAction object to tell caller to navigate somewhere
         */
        this.routeAction = new EventEmitter();
        this.toolbarButtons = [];
        this.incConfigButton = true;
        this.incRefreshButton = true;
        this.cockpitReady = false;
        this.clickCaseAction = (/**
         * @param {?} caseRoute
         * @return {?}
         */
        (caseRoute) => {
            // case clicked - tell parent (will pass caseRef and appId)
            this.routeAction.emit(new RouteAction('caseClicked', caseRoute));
        });
        this.createToolbarButtons = (/**
         * @return {?}
         */
        () => {
            /** @type {?} */
            const buttons = [];
            // you can use the rolesService to either disable or hide the button as required - it returns true if the user has the roleId specified
            // const configButton = this.buttonsHelper.createButton('config', 'tcs-capabilities', true, 'Config', true, this.rolesService.checkRole('Partner Portal Configurator', this.roles));
            if (this.incConfigButton) {
                /** @type {?} */
                const configButton = this.buttonsHelper.createButton('config', 'tcs-capabilities', true, 'Config', (this.access ? this.rolesService.checkButton('configure', this.access) : true), true);
                buttons.push(configButton);
            }
            if (this.incRefreshButton) {
                /** @type {?} */
                const refreshButton = this.buttonsHelper.createButton('refresh', 'tcs-refresh-icon', true, 'Refresh', (this.access ? this.rolesService.checkButton('refresh', this.access) : true), true);
                buttons.push(refreshButton);
            }
            return buttons;
        });
        this.handleToolbarButtonEvent = (/**
         * @param {?} buttonId
         * @return {?}
         */
        (buttonId) => {
            if (buttonId === 'config') {
                this.routeAction.emit(new RouteAction('configClicked', null));
            }
            if (buttonId === 'refresh') {
                this.refresh();
            }
        });
        this.handleCreatorAppSelection = (/**
         * @param {?} application
         * @return {?}
         */
        (application) => {
            /** @type {?} */
            const EXAMPLE_INITIAL_DATA = {
                PartnerRequest: {
                    Customer_v1: {
                        CustomerReference_v1: 'CST-1111',
                        Name_v1: 'Roger Willis',
                    },
                    RequestDescription_v1: 'Where is my order?',
                    RequestDetails_v1: {
                        OrderReference_v1: 'ORD-55333',
                        PartReference_v1: 'PRT-102020',
                    },
                    RequestType_v1: 'Packaging Supplies'
                }
            }
            // this.openCreatorDialog(application, EXAMPLE_INITIAL_DATA, this.sandboxId);
            ;
            // this.openCreatorDialog(application, EXAMPLE_INITIAL_DATA, this.sandboxId);
            this.openCreatorDialog(application, undefined, this.sandboxId, this.customFormDefs, this.legacyCreators, this.formsFramework);
        });
        this.handleReportCaseTypeSelection = (/**
         * @param {?} caseTypeReportRecord
         * @return {?}
         */
        (caseTypeReportRecord) => {
            this.selectedCaseTypeReportRecord = caseTypeReportRecord;
        });
        this.handleReportCaseTypeStateSelection = (/**
         * @param {?} state
         * @return {?}
         */
        (state) => {
            if (this.selectedCaseTypeReportRecord) {
                this.searchComponent.searchCasesByState(Number(state.id), state.label, this.selectedCaseTypeReportRecord.applicationId, this.selectedCaseTypeReportRecord.caseTypeInfo.id, this.selectedCaseTypeReportRecord.caseTypeInfo.label + '|' + state.label);
            }
        });
        this.openCreatorDialog = (/**
         * @param {?} application
         * @param {?} initialData
         * @param {?} sandboxId
         * @param {?} customFormDefs
         * @param {?} legacyCreators
         * @param {?} formsFramework
         * @return {?}
         */
        (application, initialData, sandboxId, customFormDefs, legacyCreators, formsFramework) => {
            /** @type {?} */
            const dialogRef = this.dialog.open(LiveAppsCreatorDialogComponent, {
                width: '60%',
                height: '80%',
                maxWidth: '100vw',
                maxHeight: '100vh',
                panelClass: 'tcs-style-dialog',
                data: new CaseCreatorSelectionContext(application, initialData, sandboxId, customFormDefs, legacyCreators, formsFramework)
            });
            dialogRef.afterClosed().subscribe((/**
             * @param {?} result
             * @return {?}
             */
            result => {
                if (result) {
                    this.routeAction.emit(new RouteAction('caseClicked', result));
                }
            }));
        });
        this.refresh = (/**
         * @return {?}
         */
        () => {
            if (this.favoritesComponent) {
                this.favoritesComponent.refresh();
            }
            if (this.recentsComponent) {
                this.recentsComponent.refresh();
            }
            if (this.searchComponent) {
                this.searchComponent.refresh();
            }
            if (this.collaborationComponent) {
                this.collaborationComponent.refresh();
            }
            if (this.documentsComponent) {
                this.documentsComponent.refresh();
            }
            if (this.activeCasesComponent) {
                this.activeCasesComponent.refresh();
            }
            if (this.workitemsComponent) {
                this.workitemsComponent.refresh();
            }
        });
    }
    /**
     * @return {?}
     */
    initialize() {
        this.toolbarButtons = this.toolbarButtons.concat(this.createToolbarButtons());
        this.caseStartButtonActive = this.access ? this.rolesService.checkButton('caseStart', this.access) : true;
        this.cockpitReady = true;
    }
    /**
     * @param {?} changes
     * @return {?}
     */
    ngOnChanges(changes) {
        // on first set call initialize
        if (changes.appIds.firstChange && changes.sandboxId.firstChange && changes.uiAppId.firstChange) {
            this.initialize();
        }
    }
}
LiveAppsHomeCockpitComponent.decorators = [
    { type: Component, args: [{
                selector: 'tcla-live-apps-home-cockpit',
                template: "<div fxLayout=\"column\" fxFlex *ngIf=\"cockpitReady\">\n  <div>\n    <tc-tibco-cloud-menu-bar [toolbarButtons]=\"toolbarButtons\" [headerText]=\"title\"\n                             (toolbarButtonEvent)=\"handleToolbarButtonEvent($event)\">\n      <div>\n        <ng-content select=\"[customToolbarContent]\" fxFlex></ng-content>\n        <tcla-live-apps-application-create-button *ngIf=\"caseStartButtonActive\"\n                                                  style=\"margin-right: 20px; margin-left: 20px\" [sandboxId]=\"sandboxId\"\n                                                  [appIds]=\"appIds\"\n                                                  (selection)=\"handleCreatorAppSelection($event)\"></tcla-live-apps-application-create-button>\n      </div>\n    </tc-tibco-cloud-menu-bar>\n  </div>\n\n  <div class=\"tcs-home-content\"\n       style=\"padding-left: 20px; padding-right: 20px; margin-top: 10px; padding-bottom: 120px; height: 100%; display: block;\">\n    <div style=\"height: 100%;\">\n      <div class=\"searchCasesWidget\" style=\"min-height: 86px;\">\n        <tcla-live-apps-search-widget fxFlex [appIds]=\"appIds\" [sandboxId]=\"sandboxId\" [uiAppId]=\"uiAppId\"\n                                      (caseSelected)=\"clickCaseAction($event)\"></tcla-live-apps-search-widget>\n      </div>\n      <!--div style=\"background-color: red; height: 600px; width: 100%;\">TEST BOX</div-->\n\n      <!--div fxFlex=\"noshrink\" style=\"margin-bottom: 20px; overflow: auto; min-height: 400px\" fxLayoutGap=\"20px\" fxLayout=\"row\" fxLayout.lt-md=\"column\"-->\n      <div style=\"margin-bottom: 20px; overflow: hidden; height: 100%; min-height: 750px; padding-bottom: 10px;\" fxLayoutGap=\"20px\"\n           fxLayout=\"row\" fxLayout.lt-md=\"column\">\n        <div fxFlex.gt-sm=\"grow\" fxLayout=\"row\" style=\"\" [ngStyle.lt-md]=\"'min-height: 400px;'\">\n          <mat-tab-group fxFlex>\n            <mat-tab label=\"Recent Cases\">\n              <ng-template matTabContent>\n                <div class=\"recentCasesWidget\" fxFill>\n                  <tcla-live-apps-recent-cases class=\"padded-widget\" [showHeader]=\"true\" [sandboxId]=\"sandboxId\"\n                                               [uiAppId]=\"uiAppId\"\n                                               (clickCase)=\"clickCaseAction($event)\"></tcla-live-apps-recent-cases>\n                </div>\n              </ng-template>\n            </mat-tab>\n            <mat-tab label=\"Favorite Cases\">\n              <ng-template matTabContent>\n                <div class=\"favoriteCasesWidget\" fxFill>\n                  <tcla-live-apps-favorite-cases class=\"padded-widget\" [showHeader]=\"true\" [sandboxId]=\"sandboxId\"\n                                                 [uiAppId]=\"uiAppId\"\n                                                 (clickCase)=\"clickCaseAction($event)\"></tcla-live-apps-favorite-cases>\n                </div>\n              </ng-template>\n            </mat-tab>\n            <mat-tab *ngIf=\"legacyWorkitems\" label=\"Workitems\">\n              <ng-template matTabContent>\n                <div class=\"favoriteCasesWidget\" fxFill>\n                  <tcla-live-apps-workitems #componentDiv class=\"padded-widget\" [showHeader]=\"true\"\n                                            [sandboxId]=\"sandboxId\"\n                                            [uiAppId]=\"uiAppId\" [appIds]=\"appIds\"\n                                            (clickCase)=\"clickCaseAction($event)\"></tcla-live-apps-workitems>\n                </div>\n              </ng-template>\n            </mat-tab>\n          </mat-tab-group>\n        </div>\n\n        <div fxFlex.gt-sm=\"40\" fxLayout=\"column\" [ngStyle.lt-md]=\"'min-height: 400px'\">\n          <div style=\"padding-top: 48px; height: 350px;\">\n            <tcla-live-apps-active-cases-widget [sandboxId]=\"sandboxId\" [appIds]=\"appIds\" [showHeader]=\"true\"\n                                                [showPercentages]=\"true\" [uiAppId]=\"uiAppId\"\n                                                (selectedCaseTypeState)=\"handleReportCaseTypeStateSelection($event)\"\n                                                (selectedCaseType)=\"handleReportCaseTypeSelection($event)\"></tcla-live-apps-active-cases-widget>\n          </div>\n          <div fxFlex=\"noshrink\" style=\"height: 350px;\">\n            <mat-tab-group fxFlex>\n              <mat-tab label=\"Collaboration\">\n                <div fxFill class=\"collaborationWidget\">\n                  <tcla-live-apps-notes [userId]=\"userId\" [showHeader]=\"true\" [relatedItemId]=\"uiAppId\"\n                                        [relatedItemType]=\"'CASE_APP'\"></tcla-live-apps-notes>\n                </div>\n              </mat-tab>\n              <mat-tab label=\"Documents\">\n                <div fxFill class=\"documentWidget\">\n                  <tcla-live-apps-documents [showHeader]=\"true\" [sandboxId]=\"sandboxId\" [folderId]=\"uiAppId + '_Docs'\"\n                                            [folderType]=\"'orgFolders'\"\n                                            [folderDescription]=\"'Document Library'\"></tcla-live-apps-documents>\n                </div>\n              </mat-tab>\n            </mat-tab-group>\n          </div>\n        </div>\n      </div>\n\n    </div>\n  </div>\n</div>\n",
                styles: [".tc-home-welcome-text{font-family:Source Sans Pro;font-size:30px;font-weight:400;font-style:normal;font-stretch:normal;line-height:normal;letter-spacing:normal;color:#212121}.tcs-home-content{overflow:auto}"]
            }] }
];
/** @nocollapse */
LiveAppsHomeCockpitComponent.ctorParameters = () => [
    { type: TcButtonsHelperService },
    { type: MatDialog },
    { type: TcRolesService }
];
LiveAppsHomeCockpitComponent.propDecorators = {
    uiAppId: [{ type: Input }],
    appIds: [{ type: Input }],
    sandboxId: [{ type: Input }],
    userName: [{ type: Input }],
    userId: [{ type: Input }],
    email: [{ type: Input }],
    title: [{ type: Input }],
    roles: [{ type: Input }],
    access: [{ type: Input }],
    customFormDefs: [{ type: Input }],
    legacyWorkitems: [{ type: Input }],
    legacyCreators: [{ type: Input }],
    formsFramework: [{ type: Input }],
    routeAction: [{ type: Output }],
    favoritesComponent: [{ type: ViewChild, args: [LiveAppsFavoriteCasesComponent, { static: false },] }],
    recentsComponent: [{ type: ViewChild, args: [LiveAppsRecentCasesComponent, { static: false },] }],
    searchComponent: [{ type: ViewChild, args: [LiveAppsSearchWidgetComponent, { static: false },] }],
    collaborationComponent: [{ type: ViewChild, args: [LiveAppsNotesComponent, { static: false },] }],
    documentsComponent: [{ type: ViewChild, args: [LiveAppsDocumentsComponent, { static: false },] }],
    activeCasesComponent: [{ type: ViewChild, args: [LiveAppsActiveCasesWidgetComponent, { static: false },] }],
    workitemsComponent: [{ type: ViewChild, args: [LiveAppsWorkitemsComponent, { static: false },] }]
};
if (false) {
    /**
     * The Application ID of the UI (should ideally be unique as it is shared state key)
     * @type {?}
     */
    LiveAppsHomeCockpitComponent.prototype.uiAppId;
    /**
     * The list of LA Application IDs you want to handle
     * @type {?}
     */
    LiveAppsHomeCockpitComponent.prototype.appIds;
    /**
     * sandboxId - this comes from claims resolver
     * @type {?}
     */
    LiveAppsHomeCockpitComponent.prototype.sandboxId;
    /**
     * The name of the logged user
     * @type {?}
     */
    LiveAppsHomeCockpitComponent.prototype.userName;
    /**
     * The ID of the logged user
     * @type {?}
     */
    LiveAppsHomeCockpitComponent.prototype.userId;
    /**
     * * Email address of the user (comes from resolver)
     * @type {?}
     */
    LiveAppsHomeCockpitComponent.prototype.email;
    /**
     * page title comes from config resolver
     * @type {?}
     */
    LiveAppsHomeCockpitComponent.prototype.title;
    /**
     * Roles - The users current roles
     * @type {?}
     */
    LiveAppsHomeCockpitComponent.prototype.roles;
    /**
     * RouteAccessControlConfig - basically the config for access control
     * @type {?}
     */
    LiveAppsHomeCockpitComponent.prototype.access;
    /**
     * Custom Form configuration file
     * @type {?}
     */
    LiveAppsHomeCockpitComponent.prototype.customFormDefs;
    /**
     * Enable legacy workitems
     * @type {?}
     */
    LiveAppsHomeCockpitComponent.prototype.legacyWorkitems;
    /**
     * Enable legacy creators
     * @type {?}
     */
    LiveAppsHomeCockpitComponent.prototype.legacyCreators;
    /**
     * Allow override of forms framework
     * Options: bootstrap-4 or material-design
     * @type {?}
     */
    LiveAppsHomeCockpitComponent.prototype.formsFramework;
    /**
     * ~event routeAction : Component requests route to another page
     * ~payload RouteAction : RouteAction object to tell caller to navigate somewhere
     * @type {?}
     */
    LiveAppsHomeCockpitComponent.prototype.routeAction;
    /** @type {?} */
    LiveAppsHomeCockpitComponent.prototype.favoritesComponent;
    /** @type {?} */
    LiveAppsHomeCockpitComponent.prototype.recentsComponent;
    /** @type {?} */
    LiveAppsHomeCockpitComponent.prototype.searchComponent;
    /** @type {?} */
    LiveAppsHomeCockpitComponent.prototype.collaborationComponent;
    /** @type {?} */
    LiveAppsHomeCockpitComponent.prototype.documentsComponent;
    /** @type {?} */
    LiveAppsHomeCockpitComponent.prototype.activeCasesComponent;
    /** @type {?} */
    LiveAppsHomeCockpitComponent.prototype.workitemsComponent;
    /** @type {?} */
    LiveAppsHomeCockpitComponent.prototype.toolbarButtons;
    /** @type {?} */
    LiveAppsHomeCockpitComponent.prototype.caseStartButtonActive;
    /** @type {?} */
    LiveAppsHomeCockpitComponent.prototype.selectedCaseTypeReportRecord;
    /** @type {?} */
    LiveAppsHomeCockpitComponent.prototype.incConfigButton;
    /** @type {?} */
    LiveAppsHomeCockpitComponent.prototype.incRefreshButton;
    /** @type {?} */
    LiveAppsHomeCockpitComponent.prototype.cockpitReady;
    /** @type {?} */
    LiveAppsHomeCockpitComponent.prototype.clickCaseAction;
    /**
     * @type {?}
     * @protected
     */
    LiveAppsHomeCockpitComponent.prototype.createToolbarButtons;
    /** @type {?} */
    LiveAppsHomeCockpitComponent.prototype.handleToolbarButtonEvent;
    /** @type {?} */
    LiveAppsHomeCockpitComponent.prototype.handleCreatorAppSelection;
    /** @type {?} */
    LiveAppsHomeCockpitComponent.prototype.handleReportCaseTypeSelection;
    /** @type {?} */
    LiveAppsHomeCockpitComponent.prototype.handleReportCaseTypeStateSelection;
    /** @type {?} */
    LiveAppsHomeCockpitComponent.prototype.openCreatorDialog;
    /** @type {?} */
    LiveAppsHomeCockpitComponent.prototype.refresh;
    /**
     * @type {?}
     * @protected
     */
    LiveAppsHomeCockpitComponent.prototype.buttonsHelper;
    /** @type {?} */
    LiveAppsHomeCockpitComponent.prototype.dialog;
    /**
     * @type {?}
     * @protected
     */
    LiveAppsHomeCockpitComponent.prototype.rolesService;
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibGl2ZS1hcHBzLWhvbWUtY29ja3BpdC5jb21wb25lbnQuanMiLCJzb3VyY2VSb290Ijoibmc6Ly9AdGliY28tdGNzdGsvdGMtbGl2ZWFwcHMtbGliLyIsInNvdXJjZXMiOlsibGliL2NvbXBvbmVudHMvbGl2ZS1hcHBzLWhvbWUtY29ja3BpdC9saXZlLWFwcHMtaG9tZS1jb2NrcGl0LmNvbXBvbmVudC50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOzs7O0FBQUEsT0FBTyxFQUFDLFNBQVMsRUFBRSxZQUFZLEVBQVUsS0FBSyxFQUFxQixNQUFNLEVBQWlCLFNBQVMsRUFBQyxNQUFNLGVBQWUsQ0FBQztBQUUxSCxPQUFPLEVBQWdCLHNCQUFzQixFQUFFLFdBQVcsRUFBQyxNQUFNLDBCQUEwQixDQUFDO0FBQzVGLE9BQU8sRUFBQyw4QkFBOEIsRUFBQyxNQUFNLGdFQUFnRSxDQUFDO0FBQzlHLE9BQU8sRUFBQyw0QkFBNEIsRUFBQyxNQUFNLDREQUE0RCxDQUFDO0FBQ3hHLE9BQU8sRUFBQyw2QkFBNkIsRUFBQyxNQUFNLDhEQUE4RCxDQUFDO0FBQzNHLE9BQU8sRUFBa0IsU0FBUyxFQUFlLE1BQU0sbUJBQW1CLENBQUM7QUFDM0UsT0FBTyxFQUFDLDhCQUE4QixFQUFDLE1BQU0sZ0VBQWdFLENBQUM7QUFDOUcsT0FBTyxFQUFDLDJCQUEyQixFQUFDLE1BQU0sOEJBQThCLENBQUM7QUFDekUsT0FBTyxFQUFDLHNCQUFzQixFQUFDLE1BQU0sOENBQThDLENBQUM7QUFDcEYsT0FBTyxFQUFDLDBCQUEwQixFQUFDLE1BQU0sc0RBQXNELENBQUM7QUFDaEcsT0FBTyxFQUFDLGNBQWMsRUFBQyxNQUFNLDRDQUE0QyxDQUFDO0FBQzFFLE9BQU8sRUFBQyxLQUFLLEVBQTRCLHNDQUFzQyxFQUFDLE1BQU0sNkJBQTZCLENBQUM7QUFDcEgsT0FBTyxFQUFDLGtDQUFrQyxFQUFDLE1BQU0sMEVBQTBFLENBQUM7QUFFNUgsT0FBTyxFQUFDLGNBQWMsRUFBQyxNQUFNLDJCQUEyQixDQUFDO0FBQ3pELE9BQU8sRUFBQywwQkFBMEIsRUFBQyxNQUFNLHNEQUFzRCxDQUFDOzs7Ozs7OztBQWVoRyxNQUFNLE9BQU8sNEJBQTRCOzs7Ozs7SUE4RnZDLFlBQXNCLGFBQXFDLEVBQVMsTUFBaUIsRUFBWSxZQUE0QjtRQUF2RyxrQkFBYSxHQUFiLGFBQWEsQ0FBd0I7UUFBUyxXQUFNLEdBQU4sTUFBTSxDQUFXO1FBQVksaUJBQVksR0FBWixZQUFZLENBQWdCOzs7O1FBeENwSCxvQkFBZSxHQUFZLElBQUksQ0FBQyxlQUFlLENBQUMsQ0FBQyxDQUFDLElBQUksQ0FBQyxlQUFlLENBQUMsQ0FBQyxDQUFDLEtBQUssQ0FBQzs7OztRQUsvRSxtQkFBYyxHQUFZLElBQUksQ0FBQyxjQUFjLENBQUMsQ0FBQyxDQUFDLElBQUksQ0FBQyxjQUFjLENBQUMsQ0FBQyxDQUFDLEtBQUssQ0FBQzs7Ozs7UUFNNUUsbUJBQWMsR0FBVyxJQUFJLENBQUMsY0FBYyxDQUFDLENBQUMsQ0FBQyxJQUFJLENBQUMsY0FBYyxDQUFDLENBQUMsQ0FBQyxpQkFBaUIsQ0FBQzs7Ozs7UUFNdEYsZ0JBQVcsR0FBOEIsSUFBSSxZQUFZLEVBQWUsQ0FBQztRQVU1RSxtQkFBYyxHQUFvQixFQUFFLENBQUM7UUFJNUMsb0JBQWUsR0FBRyxJQUFJLENBQUM7UUFDdkIscUJBQWdCLEdBQUcsSUFBSSxDQUFDO1FBQ3hCLGlCQUFZLEdBQUcsS0FBSyxDQUFDO1FBRWQsb0JBQWU7Ozs7UUFBRyxDQUFDLFNBQW9CLEVBQUUsRUFBRTtZQUNoRCwyREFBMkQ7WUFDM0QsSUFBSSxDQUFDLFdBQVcsQ0FBQyxJQUFJLENBQUMsSUFBSSxXQUFXLENBQUMsYUFBYSxFQUFFLFNBQVMsQ0FBQyxDQUFDLENBQUM7UUFDbkUsQ0FBQyxFQUFBO1FBSVMseUJBQW9COzs7UUFBRyxHQUFvQixFQUFFOztrQkFDL0MsT0FBTyxHQUFHLEVBQUU7WUFFbEIsdUlBQXVJO1lBQ3ZJLG9MQUFvTDtZQUNwTCxJQUFJLElBQUksQ0FBQyxlQUFlLEVBQUU7O3NCQUNsQixZQUFZLEdBQUcsSUFBSSxDQUFDLGFBQWEsQ0FBQyxZQUFZLENBQUMsUUFBUSxFQUFFLGtCQUFrQixFQUFFLElBQUksRUFBRSxRQUFRLEVBQUUsQ0FBQyxJQUFJLENBQUMsTUFBTSxDQUFDLENBQUMsQ0FBQyxJQUFJLENBQUMsWUFBWSxDQUFDLFdBQVcsQ0FBQyxXQUFXLEVBQUUsSUFBSSxDQUFDLE1BQU0sQ0FBQyxDQUFDLENBQUMsQ0FBQyxJQUFJLENBQUMsRUFBRSxJQUFJLENBQUM7Z0JBQ3hMLE9BQU8sQ0FBQyxJQUFJLENBQUMsWUFBWSxDQUFDLENBQUM7YUFDNUI7WUFDRCxJQUFJLElBQUksQ0FBQyxnQkFBZ0IsRUFBRTs7c0JBQ25CLGFBQWEsR0FBRyxJQUFJLENBQUMsYUFBYSxDQUFDLFlBQVksQ0FBQyxTQUFTLEVBQUUsa0JBQWtCLEVBQUUsSUFBSSxFQUFFLFNBQVMsRUFBRSxDQUFDLElBQUksQ0FBQyxNQUFNLENBQUMsQ0FBQyxDQUFDLElBQUksQ0FBQyxZQUFZLENBQUMsV0FBVyxDQUFDLFNBQVMsRUFBRSxJQUFJLENBQUMsTUFBTSxDQUFDLENBQUMsQ0FBQyxDQUFDLElBQUksQ0FBQyxFQUFFLElBQUksQ0FBQztnQkFDekwsT0FBTyxDQUFDLElBQUksQ0FBQyxhQUFhLENBQUMsQ0FBQzthQUM3QjtZQUNELE9BQU8sT0FBTyxDQUFDO1FBQ2pCLENBQUMsRUFBQTtRQUVNLDZCQUF3Qjs7OztRQUFHLENBQUMsUUFBZ0IsRUFBRSxFQUFFO1lBQ3JELElBQUksUUFBUSxLQUFLLFFBQVEsRUFBRTtnQkFDekIsSUFBSSxDQUFDLFdBQVcsQ0FBQyxJQUFJLENBQUMsSUFBSSxXQUFXLENBQUMsZUFBZSxFQUFFLElBQUksQ0FBQyxDQUFDLENBQUM7YUFDL0Q7WUFDRCxJQUFJLFFBQVEsS0FBSyxTQUFTLEVBQUU7Z0JBQzFCLElBQUksQ0FBQyxPQUFPLEVBQUUsQ0FBQzthQUNoQjtRQUNILENBQUMsRUFBQTtRQUVNLDhCQUF5Qjs7OztRQUFHLENBQUMsV0FBcUIsRUFBRSxFQUFFOztrQkFDckQsb0JBQW9CLEdBQUc7Z0JBQzNCLGNBQWMsRUFBRTtvQkFDZCxXQUFXLEVBQUU7d0JBQ1gsb0JBQW9CLEVBQUUsVUFBVTt3QkFDaEMsT0FBTyxFQUFFLGNBQWM7cUJBQ3hCO29CQUNELHFCQUFxQixFQUFFLG9CQUFvQjtvQkFDM0MsaUJBQWlCLEVBQUU7d0JBQ2pCLGlCQUFpQixFQUFFLFdBQVc7d0JBQzlCLGdCQUFnQixFQUFFLFlBQVk7cUJBQy9CO29CQUNELGNBQWMsRUFBRSxvQkFBb0I7aUJBQ3JDO2FBQ0Y7WUFDRCw2RUFBNkU7O1lBQTdFLDZFQUE2RTtZQUM3RSxJQUFJLENBQUMsaUJBQWlCLENBQUMsV0FBVyxFQUFFLFNBQVMsRUFBRSxJQUFJLENBQUMsU0FBUyxFQUFFLElBQUksQ0FBQyxjQUFjLEVBQUUsSUFBSSxDQUFDLGNBQWMsRUFBRSxJQUFJLENBQUMsY0FBYyxDQUFDLENBQUM7UUFDaEksQ0FBQyxFQUFBO1FBRU0sa0NBQTZCOzs7O1FBQUcsQ0FBQyxvQkFBMEMsRUFBRSxFQUFFO1lBQ3BGLElBQUksQ0FBQyw0QkFBNEIsR0FBRyxvQkFBb0IsQ0FBQztRQUMzRCxDQUFDLEVBQUE7UUFFTSx1Q0FBa0M7Ozs7UUFBRyxDQUFDLEtBQW1DLEVBQUUsRUFBRTtZQUNsRixJQUFJLElBQUksQ0FBQyw0QkFBNEIsRUFBRTtnQkFDckMsSUFBSSxDQUFDLGVBQWUsQ0FBQyxrQkFBa0IsQ0FBQyxNQUFNLENBQUMsS0FBSyxDQUFDLEVBQUUsQ0FBQyxFQUFFLEtBQUssQ0FBQyxLQUFLLEVBQUUsSUFBSSxDQUFDLDRCQUE0QixDQUFDLGFBQWEsRUFBRSxJQUFJLENBQUMsNEJBQTRCLENBQUMsWUFBWSxDQUFDLEVBQUUsRUFBRSxJQUFJLENBQUMsNEJBQTRCLENBQUMsWUFBWSxDQUFDLEtBQUssR0FBRyxHQUFHLEdBQUcsS0FBSyxDQUFDLEtBQUssQ0FBRSxDQUFDO2FBQ3ZQO1FBQ0gsQ0FBQyxFQUFBO1FBRUQsc0JBQWlCOzs7Ozs7Ozs7UUFBRyxDQUFDLFdBQXFCLEVBQUUsV0FBVyxFQUFFLFNBQVMsRUFBRSxjQUFjLEVBQUUsY0FBYyxFQUFFLGNBQWMsRUFBRSxFQUFFOztrQkFDOUcsU0FBUyxHQUFHLElBQUksQ0FBQyxNQUFNLENBQUMsSUFBSSxDQUFDLDhCQUE4QixFQUFFO2dCQUNqRSxLQUFLLEVBQUUsS0FBSztnQkFDWixNQUFNLEVBQUUsS0FBSztnQkFDYixRQUFRLEVBQUUsT0FBTztnQkFDakIsU0FBUyxFQUFFLE9BQU87Z0JBQ2xCLFVBQVUsRUFBRSxrQkFBa0I7Z0JBQzlCLElBQUksRUFBRSxJQUFJLDJCQUEyQixDQUFDLFdBQVcsRUFBRSxXQUFXLEVBQUUsU0FBUyxFQUFFLGNBQWMsRUFBRSxjQUFjLEVBQUUsY0FBYyxDQUFDO2FBQzNILENBQUM7WUFFRixTQUFTLENBQUMsV0FBVyxFQUFFLENBQUMsU0FBUzs7OztZQUFDLE1BQU0sQ0FBQyxFQUFFO2dCQUN6QyxJQUFJLE1BQU0sRUFBRTtvQkFDVixJQUFJLENBQUMsV0FBVyxDQUFDLElBQUksQ0FBQyxJQUFJLFdBQVcsQ0FBQyxhQUFhLEVBQUUsTUFBTSxDQUFDLENBQUMsQ0FBQztpQkFDL0Q7WUFDSCxDQUFDLEVBQUMsQ0FBQztRQUNMLENBQUMsRUFBQTtRQUVNLFlBQU87OztRQUFHLEdBQUcsRUFBRTtZQUNwQixJQUFJLElBQUksQ0FBQyxrQkFBa0IsRUFBRTtnQkFDM0IsSUFBSSxDQUFDLGtCQUFrQixDQUFDLE9BQU8sRUFBRSxDQUFDO2FBQ25DO1lBQ0QsSUFBSSxJQUFJLENBQUMsZ0JBQWdCLEVBQUU7Z0JBQ3pCLElBQUksQ0FBQyxnQkFBZ0IsQ0FBQyxPQUFPLEVBQUUsQ0FBQzthQUNqQztZQUNELElBQUksSUFBSSxDQUFDLGVBQWUsRUFBRTtnQkFDeEIsSUFBSSxDQUFDLGVBQWUsQ0FBQyxPQUFPLEVBQUUsQ0FBQzthQUNoQztZQUNELElBQUksSUFBSSxDQUFDLHNCQUFzQixFQUFFO2dCQUMvQixJQUFJLENBQUMsc0JBQXNCLENBQUMsT0FBTyxFQUFFLENBQUM7YUFDdkM7WUFDRCxJQUFJLElBQUksQ0FBQyxrQkFBa0IsRUFBRTtnQkFDM0IsSUFBSSxDQUFDLGtCQUFrQixDQUFDLE9BQU8sRUFBRSxDQUFDO2FBQ25DO1lBQ0QsSUFBSSxJQUFJLENBQUMsb0JBQW9CLEVBQUU7Z0JBQzdCLElBQUksQ0FBQyxvQkFBb0IsQ0FBQyxPQUFPLEVBQUUsQ0FBQzthQUNyQztZQUNELElBQUksSUFBSSxDQUFDLGtCQUFrQixFQUFFO2dCQUMzQixJQUFJLENBQUMsa0JBQWtCLENBQUMsT0FBTyxFQUFFLENBQUM7YUFDbkM7UUFDSCxDQUFDLEVBQUE7SUEvRmdJLENBQUM7Ozs7SUFpR2xJLFVBQVU7UUFDUixJQUFJLENBQUMsY0FBYyxHQUFHLElBQUksQ0FBQyxjQUFjLENBQUMsTUFBTSxDQUFDLElBQUksQ0FBQyxvQkFBb0IsRUFBRSxDQUFDLENBQUM7UUFDOUUsSUFBSSxDQUFDLHFCQUFxQixHQUFHLElBQUksQ0FBQyxNQUFNLENBQUMsQ0FBQyxDQUFDLElBQUksQ0FBQyxZQUFZLENBQUMsV0FBVyxDQUFDLFdBQVcsRUFBRSxJQUFJLENBQUMsTUFBTSxDQUFDLENBQUMsQ0FBQyxDQUFDLElBQUksQ0FBQztRQUMxRyxJQUFJLENBQUMsWUFBWSxHQUFHLElBQUksQ0FBQztJQUMzQixDQUFDOzs7OztJQUVELFdBQVcsQ0FBQyxPQUFzQjtRQUVoQywrQkFBK0I7UUFDL0IsSUFBSSxPQUFPLENBQUMsTUFBTSxDQUFDLFdBQVcsSUFBSSxPQUFPLENBQUMsU0FBUyxDQUFDLFdBQVcsSUFBSSxPQUFPLENBQUMsT0FBTyxDQUFDLFdBQVcsRUFBRTtZQUM5RixJQUFJLENBQUMsVUFBVSxFQUFFLENBQUM7U0FDbkI7SUFDSCxDQUFDOzs7WUFoTkYsU0FBUyxTQUFDO2dCQUNULFFBQVEsRUFBRSw2QkFBNkI7Z0JBQ3ZDLDB3S0FBc0Q7O2FBRXZEOzs7O1lBNUJzQixzQkFBc0I7WUFJcEIsU0FBUztZQUsxQixjQUFjOzs7c0JBd0JuQixLQUFLO3FCQUtMLEtBQUs7d0JBS0wsS0FBSzt1QkFLTCxLQUFLO3FCQUtMLEtBQUs7b0JBS0wsS0FBSztvQkFLTCxLQUFLO29CQUtMLEtBQUs7cUJBS0wsS0FBSzs2QkFLTCxLQUFLOzhCQUtMLEtBQUs7NkJBS0wsS0FBSzs2QkFNTCxLQUFLOzBCQU1MLE1BQU07aUNBRU4sU0FBUyxTQUFDLDhCQUE4QixFQUFFLEVBQUMsTUFBTSxFQUFFLEtBQUssRUFBQzsrQkFDekQsU0FBUyxTQUFDLDRCQUE0QixFQUFFLEVBQUMsTUFBTSxFQUFFLEtBQUssRUFBQzs4QkFDdkQsU0FBUyxTQUFDLDZCQUE2QixFQUFFLEVBQUMsTUFBTSxFQUFFLEtBQUssRUFBQztxQ0FDeEQsU0FBUyxTQUFDLHNCQUFzQixFQUFFLEVBQUMsTUFBTSxFQUFFLEtBQUssRUFBQztpQ0FDakQsU0FBUyxTQUFDLDBCQUEwQixFQUFFLEVBQUMsTUFBTSxFQUFFLEtBQUssRUFBQzttQ0FDckQsU0FBUyxTQUFDLGtDQUFrQyxFQUFFLEVBQUMsTUFBTSxFQUFFLEtBQUssRUFBQztpQ0FDN0QsU0FBUyxTQUFDLDBCQUEwQixFQUFFLEVBQUMsTUFBTSxFQUFFLEtBQUssRUFBQzs7Ozs7OztJQTNFdEQsK0NBQXlCOzs7OztJQUt6Qiw4Q0FBMEI7Ozs7O0lBSzFCLGlEQUEyQjs7Ozs7SUFLM0IsZ0RBQTBCOzs7OztJQUsxQiw4Q0FBd0I7Ozs7O0lBS3hCLDZDQUF1Qjs7Ozs7SUFLdkIsNkNBQXVCOzs7OztJQUt2Qiw2Q0FBc0I7Ozs7O0lBS3RCLDhDQUF3RDs7Ozs7SUFLeEQsc0RBQXdDOzs7OztJQUt4Qyx1REFBd0Y7Ozs7O0lBS3hGLHNEQUFxRjs7Ozs7O0lBTXJGLHNEQUFnRzs7Ozs7O0lBTWhHLG1EQUFtRjs7SUFFbkYsMERBQStHOztJQUMvRyx3REFBeUc7O0lBQ3pHLHVEQUEwRzs7SUFDMUcsOERBQW1HOztJQUNuRywwREFBdUc7O0lBQ3ZHLDREQUF5SDs7SUFDekgsMERBQXVHOztJQUV2RyxzREFBNEM7O0lBQzVDLDZEQUFzQzs7SUFDdEMsb0VBQTBEOztJQUUxRCx1REFBdUI7O0lBQ3ZCLHdEQUF3Qjs7SUFDeEIsb0RBQXFCOztJQUVyQix1REFHQzs7Ozs7SUFJRCw0REFjQzs7SUFFRCxnRUFPQzs7SUFFRCxpRUFpQkM7O0lBRUQscUVBRUM7O0lBRUQsMEVBSUM7O0lBRUQseURBZUM7O0lBRUQsK0NBc0JDOzs7OztJQS9GVyxxREFBK0M7O0lBQUUsOENBQXdCOzs7OztJQUFFLG9EQUFzQyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7Q29tcG9uZW50LCBFdmVudEVtaXR0ZXIsIEluamVjdCwgSW5wdXQsIE9uQ2hhbmdlcywgT25Jbml0LCBPdXRwdXQsIFNpbXBsZUNoYW5nZXMsIFZpZXdDaGlsZH0gZnJvbSAnQGFuZ3VsYXIvY29yZSc7XG5pbXBvcnQge0Nhc2VSb3V0ZSwgQ2FzZVR5cGV9IGZyb20gJy4uLy4uL21vZGVscy9saXZlYXBwc2RhdGEnO1xuaW1wb3J0IHtUb29sYmFyQnV0dG9uLCBUY0J1dHRvbnNIZWxwZXJTZXJ2aWNlLCBSb3V0ZUFjdGlvbn0gZnJvbSAnQHRpYmNvLXRjc3RrL3RjLWNvcmUtbGliJztcbmltcG9ydCB7TGl2ZUFwcHNGYXZvcml0ZUNhc2VzQ29tcG9uZW50fSBmcm9tICcuLi9saXZlLWFwcHMtZmF2b3JpdGUtY2FzZXMvbGl2ZS1hcHBzLWZhdm9yaXRlLWNhc2VzLmNvbXBvbmVudCc7XG5pbXBvcnQge0xpdmVBcHBzUmVjZW50Q2FzZXNDb21wb25lbnR9IGZyb20gJy4uL2xpdmUtYXBwcy1yZWNlbnQtY2FzZXMvbGl2ZS1hcHBzLXJlY2VudC1jYXNlcy5jb21wb25lbnQnO1xuaW1wb3J0IHtMaXZlQXBwc1NlYXJjaFdpZGdldENvbXBvbmVudH0gZnJvbSAnLi4vbGl2ZS1hcHBzLXNlYXJjaC13aWRnZXQvbGl2ZS1hcHBzLXNlYXJjaC13aWRnZXQuY29tcG9uZW50JztcbmltcG9ydCB7TUFUX0RJQUxPR19EQVRBLCBNYXREaWFsb2csIE1hdERpYWxvZ1JlZn0gZnJvbSAnQGFuZ3VsYXIvbWF0ZXJpYWwnO1xuaW1wb3J0IHtMaXZlQXBwc0NyZWF0b3JEaWFsb2dDb21wb25lbnR9IGZyb20gJy4uL2xpdmUtYXBwcy1jcmVhdG9yLWRpYWxvZy9saXZlLWFwcHMtY3JlYXRvci1kaWFsb2cuY29tcG9uZW50JztcbmltcG9ydCB7Q2FzZUNyZWF0b3JTZWxlY3Rpb25Db250ZXh0fSBmcm9tICcuLi8uLi9tb2RlbHMvdGMtY2FzZS1jcmVhdG9yJztcbmltcG9ydCB7TGl2ZUFwcHNOb3Rlc0NvbXBvbmVudH0gZnJvbSAnLi4vbGl2ZS1hcHBzLW5vdGVzL2xpdmUtYXBwcy1ub3Rlcy5jb21wb25lbnQnO1xuaW1wb3J0IHtMaXZlQXBwc0RvY3VtZW50c0NvbXBvbmVudH0gZnJvbSAnLi4vbGl2ZS1hcHBzLWRvY3VtZW50cy9saXZlLWFwcHMtZG9jdW1lbnRzLmNvbXBvbmVudCc7XG5pbXBvcnQge1RjUm9sZXNTZXJ2aWNlfSBmcm9tICcuLi8uLi9zZXJ2aWNlcy90Yy1yb2xlcy1zZXJ2aWNlLnRzLnNlcnZpY2UnO1xuaW1wb3J0IHtSb2xlcywgUm91dGVBY2Nlc3NDb250cm9sQ29uZmlnLCBSb3V0ZUFjY2Vzc0NvbnRyb2xDb25maWd1cmF0aW9uRWxlbWVudH0gZnJvbSAnLi4vLi4vbW9kZWxzL3RjLWdyb3Vwcy1kYXRhJztcbmltcG9ydCB7TGl2ZUFwcHNBY3RpdmVDYXNlc1dpZGdldENvbXBvbmVudH0gZnJvbSAnLi4vbGl2ZS1hcHBzLWFjdGl2ZS1jYXNlcy13aWRnZXQvbGl2ZS1hcHBzLWFjdGl2ZS1jYXNlcy13aWRnZXQuY29tcG9uZW50JztcbmltcG9ydCB7Q2FzZVR5cGVSZXBvcnRSZWNvcmQsIENhc2VUeXBlU3RhdGVSZXBvcnRTdGF0ZUluZm99IGZyb20gJy4uLy4uL21vZGVscy90Yy1saXZlLWFwcHMtcmVwb3J0aW5nJztcbmltcG9ydCB7Q3VzdG9tRm9ybURlZnN9IGZyb20gJ0B0aWJjby10Y3N0ay90Yy1mb3Jtcy1saWInO1xuaW1wb3J0IHtMaXZlQXBwc1dvcmtpdGVtc0NvbXBvbmVudH0gZnJvbSAnLi4vbGl2ZS1hcHBzLXdvcmtpdGVtcy9saXZlLWFwcHMtd29ya2l0ZW1zLmNvbXBvbmVudCc7XG5cblxuLyoqXG4gKiBIaWdoIGxldmVsIGNvbXBvbmVudCB0byBhbGxvdyBob21lIHBhZ2UgdmlldyBvZiBzeXN0ZW1cbiAqXG4gKiAhW2FsdC10ZXh0XSguLi9saXZlLWFwcHMtaG9tZS1jb2NrcGl0LnBuZyBcIkRvY3VtZW50cyBDb21wb25lbnQgSW1hZ2VcIilcbiAqXG4gKkBleGFtcGxlIDx0Y2xhLWxpdmUtYXBwcy1ob21lLWNvY2twaXQ+PC90Y2xhLWxpdmUtYXBwcy1ob21lLWNvY2twaXQ+XG4gKi9cbkBDb21wb25lbnQoe1xuICBzZWxlY3RvcjogJ3RjbGEtbGl2ZS1hcHBzLWhvbWUtY29ja3BpdCcsXG4gIHRlbXBsYXRlVXJsOiAnLi9saXZlLWFwcHMtaG9tZS1jb2NrcGl0LmNvbXBvbmVudC5odG1sJyxcbiAgc3R5bGVVcmxzOiBbJy4vbGl2ZS1hcHBzLWhvbWUtY29ja3BpdC5jb21wb25lbnQuY3NzJ11cbn0pXG5leHBvcnQgY2xhc3MgTGl2ZUFwcHNIb21lQ29ja3BpdENvbXBvbmVudCBpbXBsZW1lbnRzIE9uQ2hhbmdlcyB7XG4gIC8qKlxuICAgKiBUaGUgQXBwbGljYXRpb24gSUQgb2YgdGhlIFVJIChzaG91bGQgaWRlYWxseSBiZSB1bmlxdWUgYXMgaXQgaXMgc2hhcmVkIHN0YXRlIGtleSlcbiAgICovXG4gIEBJbnB1dCgpIHVpQXBwSWQ6IHN0cmluZztcblxuICAvKipcbiAgICogVGhlIGxpc3Qgb2YgTEEgQXBwbGljYXRpb24gSURzIHlvdSB3YW50IHRvIGhhbmRsZVxuICAgKi9cbiAgQElucHV0KCkgYXBwSWRzOiBzdHJpbmdbXTtcblxuICAvKipcbiAgICogc2FuZGJveElkIC0gdGhpcyBjb21lcyBmcm9tIGNsYWltcyByZXNvbHZlclxuICAgKi9cbiAgQElucHV0KCkgc2FuZGJveElkOiBudW1iZXI7XG5cbiAgLyoqXG4gICAqIFRoZSBuYW1lIG9mIHRoZSBsb2dnZWQgdXNlclxuICAgKi9cbiAgQElucHV0KCkgdXNlck5hbWU6IHN0cmluZztcblxuICAvKipcbiAgICogVGhlIElEIG9mIHRoZSBsb2dnZWQgdXNlclxuICAgKi9cbiAgQElucHV0KCkgdXNlcklkOiBzdHJpbmc7XG5cbiAgLyoqXG4gICAqICogRW1haWwgYWRkcmVzcyBvZiB0aGUgdXNlciAoY29tZXMgZnJvbSByZXNvbHZlcilcbiAgICovXG4gIEBJbnB1dCgpIGVtYWlsOiBzdHJpbmc7XG5cbiAgLyoqXG4gICAqIHBhZ2UgdGl0bGUgY29tZXMgZnJvbSBjb25maWcgcmVzb2x2ZXJcbiAgICovXG4gIEBJbnB1dCgpIHRpdGxlOiBzdHJpbmc7XG5cbiAgLyoqXG4gICAqIFJvbGVzIC0gVGhlIHVzZXJzIGN1cnJlbnQgcm9sZXNcbiAgICovXG4gIEBJbnB1dCgpIHJvbGVzOiBSb2xlcztcblxuICAvKipcbiAgICogUm91dGVBY2Nlc3NDb250cm9sQ29uZmlnIC0gYmFzaWNhbGx5IHRoZSBjb25maWcgZm9yIGFjY2VzcyBjb250cm9sXG4gICAqL1xuICBASW5wdXQoKSBhY2Nlc3M6IFJvdXRlQWNjZXNzQ29udHJvbENvbmZpZ3VyYXRpb25FbGVtZW50O1xuXG4gIC8qKlxuICAgKiBDdXN0b20gRm9ybSBjb25maWd1cmF0aW9uIGZpbGVcbiAgICovXG4gIEBJbnB1dCgpIGN1c3RvbUZvcm1EZWZzOiBDdXN0b21Gb3JtRGVmcztcblxuICAvKipcbiAgICogRW5hYmxlIGxlZ2FjeSB3b3JraXRlbXNcbiAgICovXG4gIEBJbnB1dCgpIGxlZ2FjeVdvcmtpdGVtczogYm9vbGVhbiA9IHRoaXMubGVnYWN5V29ya2l0ZW1zID8gdGhpcy5sZWdhY3lXb3JraXRlbXMgOiBmYWxzZTtcblxuICAvKipcbiAgICogRW5hYmxlIGxlZ2FjeSBjcmVhdG9yc1xuICAgKi9cbiAgQElucHV0KCkgbGVnYWN5Q3JlYXRvcnM6IGJvb2xlYW4gPSB0aGlzLmxlZ2FjeUNyZWF0b3JzID8gdGhpcy5sZWdhY3lDcmVhdG9ycyA6IGZhbHNlO1xuXG4gIC8qKlxuICAgKiBBbGxvdyBvdmVycmlkZSBvZiBmb3JtcyBmcmFtZXdvcmtcbiAgICogT3B0aW9uczogYm9vdHN0cmFwLTQgb3IgbWF0ZXJpYWwtZGVzaWduXG4gICAqL1xuICBASW5wdXQoKSBmb3Jtc0ZyYW1ld29yazogc3RyaW5nID0gdGhpcy5mb3Jtc0ZyYW1ld29yayA/IHRoaXMuZm9ybXNGcmFtZXdvcmsgOiAnbWF0ZXJpYWwtZGVzaWduJztcblxuICAvKipcbiAgICogfmV2ZW50IHJvdXRlQWN0aW9uIDogQ29tcG9uZW50IHJlcXVlc3RzIHJvdXRlIHRvIGFub3RoZXIgcGFnZVxuICAgKiB+cGF5bG9hZCBSb3V0ZUFjdGlvbiA6IFJvdXRlQWN0aW9uIG9iamVjdCB0byB0ZWxsIGNhbGxlciB0byBuYXZpZ2F0ZSBzb21ld2hlcmVcbiAgICovXG4gIEBPdXRwdXQoKSByb3V0ZUFjdGlvbjogRXZlbnRFbWl0dGVyPFJvdXRlQWN0aW9uPiA9IG5ldyBFdmVudEVtaXR0ZXI8Um91dGVBY3Rpb24+KCk7XG5cbiAgQFZpZXdDaGlsZChMaXZlQXBwc0Zhdm9yaXRlQ2FzZXNDb21wb25lbnQsIHtzdGF0aWM6IGZhbHNlfSkgZmF2b3JpdGVzQ29tcG9uZW50OiBMaXZlQXBwc0Zhdm9yaXRlQ2FzZXNDb21wb25lbnQ7XG4gIEBWaWV3Q2hpbGQoTGl2ZUFwcHNSZWNlbnRDYXNlc0NvbXBvbmVudCwge3N0YXRpYzogZmFsc2V9KSByZWNlbnRzQ29tcG9uZW50OiBMaXZlQXBwc1JlY2VudENhc2VzQ29tcG9uZW50O1xuICBAVmlld0NoaWxkKExpdmVBcHBzU2VhcmNoV2lkZ2V0Q29tcG9uZW50LCB7c3RhdGljOiBmYWxzZX0pIHNlYXJjaENvbXBvbmVudDogTGl2ZUFwcHNTZWFyY2hXaWRnZXRDb21wb25lbnQ7XG4gIEBWaWV3Q2hpbGQoTGl2ZUFwcHNOb3Rlc0NvbXBvbmVudCwge3N0YXRpYzogZmFsc2V9KSBjb2xsYWJvcmF0aW9uQ29tcG9uZW50OiBMaXZlQXBwc05vdGVzQ29tcG9uZW50O1xuICBAVmlld0NoaWxkKExpdmVBcHBzRG9jdW1lbnRzQ29tcG9uZW50LCB7c3RhdGljOiBmYWxzZX0pIGRvY3VtZW50c0NvbXBvbmVudDogTGl2ZUFwcHNEb2N1bWVudHNDb21wb25lbnQ7XG4gIEBWaWV3Q2hpbGQoTGl2ZUFwcHNBY3RpdmVDYXNlc1dpZGdldENvbXBvbmVudCwge3N0YXRpYzogZmFsc2V9KSBhY3RpdmVDYXNlc0NvbXBvbmVudDogTGl2ZUFwcHNBY3RpdmVDYXNlc1dpZGdldENvbXBvbmVudDtcbiAgQFZpZXdDaGlsZChMaXZlQXBwc1dvcmtpdGVtc0NvbXBvbmVudCwge3N0YXRpYzogZmFsc2V9KSB3b3JraXRlbXNDb21wb25lbnQ6IExpdmVBcHBzV29ya2l0ZW1zQ29tcG9uZW50O1xuXG4gIHB1YmxpYyB0b29sYmFyQnV0dG9uczogVG9vbGJhckJ1dHRvbltdID0gW107XG4gIHB1YmxpYyBjYXNlU3RhcnRCdXR0b25BY3RpdmU6IGJvb2xlYW47XG4gIHB1YmxpYyBzZWxlY3RlZENhc2VUeXBlUmVwb3J0UmVjb3JkOiBDYXNlVHlwZVJlcG9ydFJlY29yZDtcblxuICBpbmNDb25maWdCdXR0b24gPSB0cnVlO1xuICBpbmNSZWZyZXNoQnV0dG9uID0gdHJ1ZTtcbiAgY29ja3BpdFJlYWR5ID0gZmFsc2U7XG5cbiAgcHVibGljIGNsaWNrQ2FzZUFjdGlvbiA9IChjYXNlUm91dGU6IENhc2VSb3V0ZSkgPT4ge1xuICAgIC8vIGNhc2UgY2xpY2tlZCAtIHRlbGwgcGFyZW50ICh3aWxsIHBhc3MgY2FzZVJlZiBhbmQgYXBwSWQpXG4gICAgdGhpcy5yb3V0ZUFjdGlvbi5lbWl0KG5ldyBSb3V0ZUFjdGlvbignY2FzZUNsaWNrZWQnLCBjYXNlUm91dGUpKTtcbiAgfVxuXG4gIGNvbnN0cnVjdG9yKHByb3RlY3RlZCBidXR0b25zSGVscGVyOiBUY0J1dHRvbnNIZWxwZXJTZXJ2aWNlLCBwdWJsaWMgZGlhbG9nOiBNYXREaWFsb2csIHByb3RlY3RlZCByb2xlc1NlcnZpY2U6IFRjUm9sZXNTZXJ2aWNlKSB7IH1cblxuICBwcm90ZWN0ZWQgY3JlYXRlVG9vbGJhckJ1dHRvbnMgPSAoKTogVG9vbGJhckJ1dHRvbltdID0+IHtcbiAgICBjb25zdCBidXR0b25zID0gW107XG5cbiAgICAvLyB5b3UgY2FuIHVzZSB0aGUgcm9sZXNTZXJ2aWNlIHRvIGVpdGhlciBkaXNhYmxlIG9yIGhpZGUgdGhlIGJ1dHRvbiBhcyByZXF1aXJlZCAtIGl0IHJldHVybnMgdHJ1ZSBpZiB0aGUgdXNlciBoYXMgdGhlIHJvbGVJZCBzcGVjaWZpZWRcbiAgICAvLyBjb25zdCBjb25maWdCdXR0b24gPSB0aGlzLmJ1dHRvbnNIZWxwZXIuY3JlYXRlQnV0dG9uKCdjb25maWcnLCAndGNzLWNhcGFiaWxpdGllcycsIHRydWUsICdDb25maWcnLCB0cnVlLCB0aGlzLnJvbGVzU2VydmljZS5jaGVja1JvbGUoJ1BhcnRuZXIgUG9ydGFsIENvbmZpZ3VyYXRvcicsIHRoaXMucm9sZXMpKTtcbiAgICBpZiAodGhpcy5pbmNDb25maWdCdXR0b24pIHtcbiAgICAgIGNvbnN0IGNvbmZpZ0J1dHRvbiA9IHRoaXMuYnV0dG9uc0hlbHBlci5jcmVhdGVCdXR0b24oJ2NvbmZpZycsICd0Y3MtY2FwYWJpbGl0aWVzJywgdHJ1ZSwgJ0NvbmZpZycsICh0aGlzLmFjY2VzcyA/IHRoaXMucm9sZXNTZXJ2aWNlLmNoZWNrQnV0dG9uKCdjb25maWd1cmUnLCB0aGlzLmFjY2VzcykgOiB0cnVlKSwgdHJ1ZSk7XG4gICAgICBidXR0b25zLnB1c2goY29uZmlnQnV0dG9uKTtcbiAgICB9XG4gICAgaWYgKHRoaXMuaW5jUmVmcmVzaEJ1dHRvbikge1xuICAgICAgY29uc3QgcmVmcmVzaEJ1dHRvbiA9IHRoaXMuYnV0dG9uc0hlbHBlci5jcmVhdGVCdXR0b24oJ3JlZnJlc2gnLCAndGNzLXJlZnJlc2gtaWNvbicsIHRydWUsICdSZWZyZXNoJywgKHRoaXMuYWNjZXNzID8gdGhpcy5yb2xlc1NlcnZpY2UuY2hlY2tCdXR0b24oJ3JlZnJlc2gnLCB0aGlzLmFjY2VzcykgOiB0cnVlKSwgdHJ1ZSk7XG4gICAgICBidXR0b25zLnB1c2gocmVmcmVzaEJ1dHRvbik7XG4gICAgfVxuICAgIHJldHVybiBidXR0b25zO1xuICB9XG5cbiAgcHVibGljIGhhbmRsZVRvb2xiYXJCdXR0b25FdmVudCA9IChidXR0b25JZDogc3RyaW5nKSA9PiB7XG4gICAgaWYgKGJ1dHRvbklkID09PSAnY29uZmlnJykge1xuICAgICAgdGhpcy5yb3V0ZUFjdGlvbi5lbWl0KG5ldyBSb3V0ZUFjdGlvbignY29uZmlnQ2xpY2tlZCcsIG51bGwpKTtcbiAgICB9XG4gICAgaWYgKGJ1dHRvbklkID09PSAncmVmcmVzaCcpIHtcbiAgICAgIHRoaXMucmVmcmVzaCgpO1xuICAgIH1cbiAgfVxuXG4gIHB1YmxpYyBoYW5kbGVDcmVhdG9yQXBwU2VsZWN0aW9uID0gKGFwcGxpY2F0aW9uOiBDYXNlVHlwZSkgPT4ge1xuICAgIGNvbnN0IEVYQU1QTEVfSU5JVElBTF9EQVRBID0ge1xuICAgICAgUGFydG5lclJlcXVlc3Q6IHtcbiAgICAgICAgQ3VzdG9tZXJfdjE6IHtcbiAgICAgICAgICBDdXN0b21lclJlZmVyZW5jZV92MTogJ0NTVC0xMTExJyxcbiAgICAgICAgICBOYW1lX3YxOiAnUm9nZXIgV2lsbGlzJyxcbiAgICAgICAgfSxcbiAgICAgICAgUmVxdWVzdERlc2NyaXB0aW9uX3YxOiAnV2hlcmUgaXMgbXkgb3JkZXI/JyxcbiAgICAgICAgUmVxdWVzdERldGFpbHNfdjE6IHtcbiAgICAgICAgICBPcmRlclJlZmVyZW5jZV92MTogJ09SRC01NTMzMycsXG4gICAgICAgICAgUGFydFJlZmVyZW5jZV92MTogJ1BSVC0xMDIwMjAnLFxuICAgICAgICB9LFxuICAgICAgICBSZXF1ZXN0VHlwZV92MTogJ1BhY2thZ2luZyBTdXBwbGllcydcbiAgICAgIH1cbiAgICB9XG4gICAgLy8gdGhpcy5vcGVuQ3JlYXRvckRpYWxvZyhhcHBsaWNhdGlvbiwgRVhBTVBMRV9JTklUSUFMX0RBVEEsIHRoaXMuc2FuZGJveElkKTtcbiAgICB0aGlzLm9wZW5DcmVhdG9yRGlhbG9nKGFwcGxpY2F0aW9uLCB1bmRlZmluZWQsIHRoaXMuc2FuZGJveElkLCB0aGlzLmN1c3RvbUZvcm1EZWZzLCB0aGlzLmxlZ2FjeUNyZWF0b3JzLCB0aGlzLmZvcm1zRnJhbWV3b3JrKTtcbiAgfVxuXG4gIHB1YmxpYyBoYW5kbGVSZXBvcnRDYXNlVHlwZVNlbGVjdGlvbiA9IChjYXNlVHlwZVJlcG9ydFJlY29yZDogQ2FzZVR5cGVSZXBvcnRSZWNvcmQpID0+IHtcbiAgICB0aGlzLnNlbGVjdGVkQ2FzZVR5cGVSZXBvcnRSZWNvcmQgPSBjYXNlVHlwZVJlcG9ydFJlY29yZDtcbiAgfVxuXG4gIHB1YmxpYyBoYW5kbGVSZXBvcnRDYXNlVHlwZVN0YXRlU2VsZWN0aW9uID0gKHN0YXRlOiBDYXNlVHlwZVN0YXRlUmVwb3J0U3RhdGVJbmZvKSA9PiB7XG4gICAgaWYgKHRoaXMuc2VsZWN0ZWRDYXNlVHlwZVJlcG9ydFJlY29yZCkge1xuICAgICAgdGhpcy5zZWFyY2hDb21wb25lbnQuc2VhcmNoQ2FzZXNCeVN0YXRlKE51bWJlcihzdGF0ZS5pZCksIHN0YXRlLmxhYmVsLCB0aGlzLnNlbGVjdGVkQ2FzZVR5cGVSZXBvcnRSZWNvcmQuYXBwbGljYXRpb25JZCwgdGhpcy5zZWxlY3RlZENhc2VUeXBlUmVwb3J0UmVjb3JkLmNhc2VUeXBlSW5mby5pZCwgdGhpcy5zZWxlY3RlZENhc2VUeXBlUmVwb3J0UmVjb3JkLmNhc2VUeXBlSW5mby5sYWJlbCArICd8JyArIHN0YXRlLmxhYmVsICk7XG4gICAgfVxuICB9XG5cbiAgb3BlbkNyZWF0b3JEaWFsb2cgPSAoYXBwbGljYXRpb246IENhc2VUeXBlLCBpbml0aWFsRGF0YSwgc2FuZGJveElkLCBjdXN0b21Gb3JtRGVmcywgbGVnYWN5Q3JlYXRvcnMsIGZvcm1zRnJhbWV3b3JrKSA9PiB7XG4gICAgY29uc3QgZGlhbG9nUmVmID0gdGhpcy5kaWFsb2cub3BlbihMaXZlQXBwc0NyZWF0b3JEaWFsb2dDb21wb25lbnQsIHtcbiAgICAgIHdpZHRoOiAnNjAlJyxcbiAgICAgIGhlaWdodDogJzgwJScsXG4gICAgICBtYXhXaWR0aDogJzEwMHZ3JyxcbiAgICAgIG1heEhlaWdodDogJzEwMHZoJyxcbiAgICAgIHBhbmVsQ2xhc3M6ICd0Y3Mtc3R5bGUtZGlhbG9nJyxcbiAgICAgIGRhdGE6IG5ldyBDYXNlQ3JlYXRvclNlbGVjdGlvbkNvbnRleHQoYXBwbGljYXRpb24sIGluaXRpYWxEYXRhLCBzYW5kYm94SWQsIGN1c3RvbUZvcm1EZWZzLCBsZWdhY3lDcmVhdG9ycywgZm9ybXNGcmFtZXdvcmspXG4gICAgfSk7XG5cbiAgICBkaWFsb2dSZWYuYWZ0ZXJDbG9zZWQoKS5zdWJzY3JpYmUocmVzdWx0ID0+IHtcbiAgICAgIGlmIChyZXN1bHQpIHtcbiAgICAgICAgdGhpcy5yb3V0ZUFjdGlvbi5lbWl0KG5ldyBSb3V0ZUFjdGlvbignY2FzZUNsaWNrZWQnLCByZXN1bHQpKTtcbiAgICAgIH1cbiAgICB9KTtcbiAgfVxuXG4gIHB1YmxpYyByZWZyZXNoID0gKCkgPT4ge1xuICAgIGlmICh0aGlzLmZhdm9yaXRlc0NvbXBvbmVudCkge1xuICAgICAgdGhpcy5mYXZvcml0ZXNDb21wb25lbnQucmVmcmVzaCgpO1xuICAgIH1cbiAgICBpZiAodGhpcy5yZWNlbnRzQ29tcG9uZW50KSB7XG4gICAgICB0aGlzLnJlY2VudHNDb21wb25lbnQucmVmcmVzaCgpO1xuICAgIH1cbiAgICBpZiAodGhpcy5zZWFyY2hDb21wb25lbnQpIHtcbiAgICAgIHRoaXMuc2VhcmNoQ29tcG9uZW50LnJlZnJlc2goKTtcbiAgICB9XG4gICAgaWYgKHRoaXMuY29sbGFib3JhdGlvbkNvbXBvbmVudCkge1xuICAgICAgdGhpcy5jb2xsYWJvcmF0aW9uQ29tcG9uZW50LnJlZnJlc2goKTtcbiAgICB9XG4gICAgaWYgKHRoaXMuZG9jdW1lbnRzQ29tcG9uZW50KSB7XG4gICAgICB0aGlzLmRvY3VtZW50c0NvbXBvbmVudC5yZWZyZXNoKCk7XG4gICAgfVxuICAgIGlmICh0aGlzLmFjdGl2ZUNhc2VzQ29tcG9uZW50KSB7XG4gICAgICB0aGlzLmFjdGl2ZUNhc2VzQ29tcG9uZW50LnJlZnJlc2goKTtcbiAgICB9XG4gICAgaWYgKHRoaXMud29ya2l0ZW1zQ29tcG9uZW50KSB7XG4gICAgICB0aGlzLndvcmtpdGVtc0NvbXBvbmVudC5yZWZyZXNoKCk7XG4gICAgfVxuICB9XG5cbiAgaW5pdGlhbGl6ZSgpIHtcbiAgICB0aGlzLnRvb2xiYXJCdXR0b25zID0gdGhpcy50b29sYmFyQnV0dG9ucy5jb25jYXQodGhpcy5jcmVhdGVUb29sYmFyQnV0dG9ucygpKTtcbiAgICB0aGlzLmNhc2VTdGFydEJ1dHRvbkFjdGl2ZSA9IHRoaXMuYWNjZXNzID8gdGhpcy5yb2xlc1NlcnZpY2UuY2hlY2tCdXR0b24oJ2Nhc2VTdGFydCcsIHRoaXMuYWNjZXNzKSA6IHRydWU7XG4gICAgdGhpcy5jb2NrcGl0UmVhZHkgPSB0cnVlO1xuICB9XG5cbiAgbmdPbkNoYW5nZXMoY2hhbmdlczogU2ltcGxlQ2hhbmdlcyk6IHZvaWQge1xuXG4gICAgLy8gb24gZmlyc3Qgc2V0IGNhbGwgaW5pdGlhbGl6ZVxuICAgIGlmIChjaGFuZ2VzLmFwcElkcy5maXJzdENoYW5nZSAmJiBjaGFuZ2VzLnNhbmRib3hJZC5maXJzdENoYW5nZSAmJiBjaGFuZ2VzLnVpQXBwSWQuZmlyc3RDaGFuZ2UpIHtcbiAgICAgIHRoaXMuaW5pdGlhbGl6ZSgpO1xuICAgIH1cbiAgfVxuXG5cblxufVxuIl19