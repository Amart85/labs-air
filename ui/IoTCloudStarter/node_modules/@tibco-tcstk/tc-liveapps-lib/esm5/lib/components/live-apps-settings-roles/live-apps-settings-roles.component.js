/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
import * as tslib_1 from "tslib";
import { Component } from '@angular/core';
import { TibcoCloudSettingsGeneralComponent, RoleAttribute, TcGeneralConfigService, TibcoCloudNewElementComponent } from '@tibco-tcstk/tc-core-lib';
import { ActivatedRoute } from '@angular/router';
import { MatSnackBar, MatDialog } from '@angular/material';
/**
 * Configuration of roles
 *
 * ![alt-text](../live-apps-settings-roles.png "")
 *
 * \@example <tcla-live-apps-settings-roles></tcla-live-apps-settings-roles>
 */
var LiveAppsSettingsRolesComponent = /** @class */ (function (_super) {
    tslib_1.__extends(LiveAppsSettingsRolesComponent, _super);
    function LiveAppsSettingsRolesComponent(route, generalConfigService, snackBar, dialog) {
        var _this = _super.call(this, route, generalConfigService, snackBar) || this;
        _this.route = route;
        _this.generalConfigService = generalConfigService;
        _this.snackBar = snackBar;
        _this.dialog = dialog;
        _this.deleteRoleFunction = (/**
         * @return {?}
         */
        function () {
            _this.generalConfig.roles = _this.generalConfig.roles.filter((/**
             * @param {?} element
             * @return {?}
             */
            function (element) { return element.id != _this.currentRole.id; }));
        });
        _this.selectedRole = (/**
         * @param {?} role
         * @return {?}
         */
        function (role) {
            _this.currentRole = role;
        });
        _this.createRoleFunction = (/**
         * @return {?}
         */
        function () {
            /** @type {?} */
            var dialogRef = _this.dialog.open(TibcoCloudNewElementComponent, {
                width: '50%',
                height: '30%',
                maxWidth: '100vw',
                maxHeight: '100vh',
                panelClass: 'tcs-style-dialog',
                data: { resourceType: 'Role' }
            });
            dialogRef.afterClosed().subscribe((/**
             * @param {?} result
             * @return {?}
             */
            function (result) {
                if (result) {
                    /** @type {?} */
                    var newRole = new RoleAttribute().deserialize({ id: result.id, display: result.name, priority: 1 });
                    _this.generalConfig.roles.push(newRole);
                }
            }));
        });
        return _this;
    }
    /**
     * @return {?}
     */
    LiveAppsSettingsRolesComponent.prototype.ngOnInit = /**
     * @return {?}
     */
    function () {
        this.generalConfig = _super.prototype.getRoute.call(this).snapshot.data.generalConfigHolder;
        this.roles = _super.prototype.getRoute.call(this).snapshot.data.allRoles;
        this.groups = _super.prototype.getRoute.call(this).snapshot.data.allGroups;
        this.claims = _super.prototype.getRoute.call(this).snapshot.data.claims;
        this.sandboxId = Number(this.claims.primaryProductionSandbox.id).valueOf();
    };
    LiveAppsSettingsRolesComponent.decorators = [
        { type: Component, args: [{
                    selector: 'tcla-live-apps-settings-roles',
                    template: "<div fxLayout=\"column\" fxFill>\n    <tc-tibco-cloud-widget-header style=\"height: 40px;\" [icon]=\"'tcs-capabilities'\" [headerText]=\"'Role Configuration'\">\n    </tc-tibco-cloud-widget-header>\n    <div fxFlex style=\"padding: 20px; overflow: hidden\" fxLayout=\"column\">\n        <div style=\"overflow: auto;\">\n            <div fxLayout=\"column\" fxFlex>\n                <p>You can configure roles by here:</p>\n                <br>\n                <!-- Role specific -->\n                <mat-accordion>\n                    <mat-expansion-panel *ngFor=\"let role of generalConfig.roles\" (opened)=\"selectedRole(role)\">\n                        <mat-expansion-panel-header>\n                            <mat-panel-title>{{role.display}}</mat-panel-title>\n                        </mat-expansion-panel-header>\n                        <div fxLayout=\"column\">\n                            <div fxLayoutGap=\"10px\">\n                                <mat-form-field fxFlex=\"20\" style=\"min-width: 100px;\">\n                                    <input matInput placeholder=\"Id\" [(ngModel)]=\"role.id\" readonly>\n                                </mat-form-field>\n                                <mat-form-field fxFlex=\"40\" style=\"min-width: 400px;\">\n                                    <input matInput placeholder=\"Display Name\" [(ngModel)]=\"role.display\">\n                                </mat-form-field>\n                                <mat-form-field fxFlex=\"40\" style=\"min-width: 400px;\">\n                                    <mat-select [disableOptionCentering]=\"true\" placeholder=\"Live Apps Group\" [(value)]=\"role.group\">\n                                        <mat-option *ngFor=\"let group of groups.groups\" [value]=\"group.name\">\n                                            <span matTooltip=\"{{group.description}}\" matTooltipShowDelay=\"1000\"\n                                                matTooltipPosition=\"below\">{{group.name}}</span>\n                                        </mat-option>\n                                    </mat-select>\n                                </mat-form-field>\n                            </div>\n                            <div fxLayoutGap=\"5px\">\n                                <mat-form-field fxFlex=\"20\">\n                                    <input matInput type=\"number\" min=\"0\" max=\"10\" placeholder=\"Priority\" [(ngModel)]=\"role.priority\">\n                                </mat-form-field>\n                                <mat-slide-toggle [(ngModel)]=\"role.configuration\">Configuration role</mat-slide-toggle>\n                            </div>\n                        </div>\n                    </mat-expansion-panel>\n                </mat-accordion>\n            </div>\n\n        </div>\n        <div fxFlex class=\"tcs-filler-panel\"></div>\n        <div fxLayout=\"row\" fxLayoutAlign=\"end end\" fxLayoutGap=\"10px\" style=\"min-height: 50px\">\n            <button mat-raised-button color=\"secondary\" [disabled]=\"!currentRole\"\n                (click)=\"deleteRoleFunction()\">Delete</button>\n            <button mat-raised-button color=\"secondary\" (click)=\"createRoleFunction()\">New</button>\n            <button mat-raised-button color=\"primary\" (click)=\"runSaveFunction()\">Save</button>\n        </div>\n    </div>\n</div>",
                    styles: [""]
                }] }
    ];
    /** @nocollapse */
    LiveAppsSettingsRolesComponent.ctorParameters = function () { return [
        { type: ActivatedRoute },
        { type: TcGeneralConfigService },
        { type: MatSnackBar },
        { type: MatDialog }
    ]; };
    return LiveAppsSettingsRolesComponent;
}(TibcoCloudSettingsGeneralComponent));
export { LiveAppsSettingsRolesComponent };
if (false) {
    /** @type {?} */
    LiveAppsSettingsRolesComponent.prototype.roles;
    /** @type {?} */
    LiveAppsSettingsRolesComponent.prototype.groups;
    /** @type {?} */
    LiveAppsSettingsRolesComponent.prototype.currentRole;
    /** @type {?} */
    LiveAppsSettingsRolesComponent.prototype.deleteRoleFunction;
    /** @type {?} */
    LiveAppsSettingsRolesComponent.prototype.selectedRole;
    /** @type {?} */
    LiveAppsSettingsRolesComponent.prototype.createRoleFunction;
    /**
     * @type {?}
     * @protected
     */
    LiveAppsSettingsRolesComponent.prototype.route;
    /**
     * @type {?}
     * @protected
     */
    LiveAppsSettingsRolesComponent.prototype.generalConfigService;
    /**
     * @type {?}
     * @protected
     */
    LiveAppsSettingsRolesComponent.prototype.snackBar;
    /**
     * @type {?}
     * @private
     */
    LiveAppsSettingsRolesComponent.prototype.dialog;
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibGl2ZS1hcHBzLXNldHRpbmdzLXJvbGVzLmNvbXBvbmVudC5qcyIsInNvdXJjZVJvb3QiOiJuZzovL0B0aWJjby10Y3N0ay90Yy1saXZlYXBwcy1saWIvIiwic291cmNlcyI6WyJsaWIvY29tcG9uZW50cy9saXZlLWFwcHMtc2V0dGluZ3Mtcm9sZXMvbGl2ZS1hcHBzLXNldHRpbmdzLXJvbGVzLmNvbXBvbmVudC50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOzs7OztBQUFBLE9BQU8sRUFBRSxTQUFTLEVBQVUsTUFBTSxlQUFlLENBQUM7QUFDbEQsT0FBTyxFQUFFLGtDQUFrQyxFQUFFLGFBQWEsRUFBRSxzQkFBc0IsRUFBRSw2QkFBNkIsRUFBRSxNQUFNLDBCQUEwQixDQUFDO0FBRXBKLE9BQU8sRUFBRSxjQUFjLEVBQUUsTUFBTSxpQkFBaUIsQ0FBQztBQUNqRCxPQUFPLEVBQUUsV0FBVyxFQUFFLFNBQVMsRUFBRSxNQUFNLG1CQUFtQixDQUFDOzs7Ozs7OztBQVMzRDtJQUtvRCwwREFBa0M7SUFPbEYsd0NBQXNCLEtBQXFCLEVBQVksb0JBQTRDLEVBQVksUUFBcUIsRUFBVSxNQUFpQjtRQUEvSixZQUNJLGtCQUFNLEtBQUssRUFBRSxvQkFBb0IsRUFBRSxRQUFRLENBQUMsU0FDL0M7UUFGcUIsV0FBSyxHQUFMLEtBQUssQ0FBZ0I7UUFBWSwwQkFBb0IsR0FBcEIsb0JBQW9CLENBQXdCO1FBQVksY0FBUSxHQUFSLFFBQVEsQ0FBYTtRQUFVLFlBQU0sR0FBTixNQUFNLENBQVc7UUFZL0osd0JBQWtCOzs7UUFBRztZQUNqQixLQUFJLENBQUMsYUFBYSxDQUFDLEtBQUssR0FBRyxLQUFJLENBQUMsYUFBYSxDQUFDLEtBQUssQ0FBQyxNQUFNOzs7O1lBQUMsVUFBQSxPQUFPLElBQUksT0FBQSxPQUFPLENBQUMsRUFBRSxJQUFJLEtBQUksQ0FBQyxXQUFXLENBQUMsRUFBRSxFQUFqQyxDQUFpQyxFQUFDLENBQUM7UUFDN0csQ0FBQyxFQUFBO1FBRUQsa0JBQVk7Ozs7UUFBRyxVQUFDLElBQW1CO1lBQy9CLEtBQUksQ0FBQyxXQUFXLEdBQUcsSUFBSSxDQUFDO1FBQzVCLENBQUMsRUFBQTtRQUVELHdCQUFrQjs7O1FBQUc7O2dCQUNYLFNBQVMsR0FBRyxLQUFJLENBQUMsTUFBTSxDQUFDLElBQUksQ0FBQyw2QkFBNkIsRUFBRTtnQkFDOUQsS0FBSyxFQUFFLEtBQUs7Z0JBQ1osTUFBTSxFQUFFLEtBQUs7Z0JBQ2IsUUFBUSxFQUFFLE9BQU87Z0JBQ2pCLFNBQVMsRUFBRSxPQUFPO2dCQUNsQixVQUFVLEVBQUUsa0JBQWtCO2dCQUM5QixJQUFJLEVBQUUsRUFBRSxZQUFZLEVBQUUsTUFBTSxFQUFFO2FBRWpDLENBQUM7WUFFRixTQUFTLENBQUMsV0FBVyxFQUFFLENBQUMsU0FBUzs7OztZQUFDLFVBQUEsTUFBTTtnQkFDcEMsSUFBSSxNQUFNLEVBQUU7O3dCQUNGLE9BQU8sR0FBRyxJQUFJLGFBQWEsRUFBRSxDQUFDLFdBQVcsQ0FBQyxFQUFDLEVBQUUsRUFBRSxNQUFNLENBQUMsRUFBRSxFQUFFLE9BQU8sRUFBRSxNQUFNLENBQUMsSUFBSSxFQUFFLFFBQVEsRUFBRSxDQUFDLEVBQUUsQ0FBQztvQkFDcEcsS0FBSSxDQUFDLGFBQWEsQ0FBQyxLQUFLLENBQUMsSUFBSSxDQUFDLE9BQU8sQ0FBQyxDQUFDO2lCQUMxQztZQUNMLENBQUMsRUFBQyxDQUFDO1FBQ1AsQ0FBQyxFQUFBOztJQW5DRCxDQUFDOzs7O0lBRUQsaURBQVE7OztJQUFSO1FBQ0ksSUFBSSxDQUFDLGFBQWEsR0FBRyxpQkFBTSxRQUFRLFdBQUUsQ0FBQyxRQUFRLENBQUMsSUFBSSxDQUFDLG1CQUFtQixDQUFDO1FBQ3hFLElBQUksQ0FBQyxLQUFLLEdBQUcsaUJBQU0sUUFBUSxXQUFFLENBQUMsUUFBUSxDQUFDLElBQUksQ0FBQyxRQUFRLENBQUM7UUFDckQsSUFBSSxDQUFDLE1BQU0sR0FBRyxpQkFBTSxRQUFRLFdBQUUsQ0FBQyxRQUFRLENBQUMsSUFBSSxDQUFDLFNBQVMsQ0FBQztRQUN2RCxJQUFJLENBQUMsTUFBTSxHQUFHLGlCQUFNLFFBQVEsV0FBRSxDQUFDLFFBQVEsQ0FBQyxJQUFJLENBQUMsTUFBTSxDQUFDO1FBQ3BELElBQUksQ0FBQyxTQUFTLEdBQUcsTUFBTSxDQUFDLElBQUksQ0FBQyxNQUFNLENBQUMsd0JBQXdCLENBQUMsRUFBRSxDQUFDLENBQUMsT0FBTyxFQUFFLENBQUM7SUFDL0UsQ0FBQzs7Z0JBdEJKLFNBQVMsU0FBQztvQkFDUCxRQUFRLEVBQUUsK0JBQStCO29CQUN6Qyx5ekdBQXdEOztpQkFFM0Q7Ozs7Z0JBZFEsY0FBYztnQkFGcUMsc0JBQXNCO2dCQUd6RSxXQUFXO2dCQUFFLFNBQVM7O0lBMkQvQixxQ0FBQztDQUFBLEFBbERELENBS29ELGtDQUFrQyxHQTZDckY7U0E3Q1ksOEJBQThCOzs7SUFFdkMsK0NBQW9COztJQUNwQixnREFBc0I7O0lBRXRCLHFEQUFrQzs7SUFjbEMsNERBRUM7O0lBRUQsc0RBRUM7O0lBRUQsNERBaUJDOzs7OztJQXJDVywrQ0FBK0I7Ozs7O0lBQUUsOERBQXNEOzs7OztJQUFFLGtEQUErQjs7Ozs7SUFBRSxnREFBeUIiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBDb21wb25lbnQsIE9uSW5pdCB9IGZyb20gJ0Bhbmd1bGFyL2NvcmUnO1xuaW1wb3J0IHsgVGliY29DbG91ZFNldHRpbmdzR2VuZXJhbENvbXBvbmVudCwgUm9sZUF0dHJpYnV0ZSwgVGNHZW5lcmFsQ29uZmlnU2VydmljZSwgVGliY29DbG91ZE5ld0VsZW1lbnRDb21wb25lbnQgfSBmcm9tICdAdGliY28tdGNzdGsvdGMtY29yZS1saWInO1xuaW1wb3J0IHsgR3JvdXBzLCBSb2xlcyB9IGZyb20gJy4uLy4uL21vZGVscy90Yy1ncm91cHMtZGF0YSc7XG5pbXBvcnQgeyBBY3RpdmF0ZWRSb3V0ZSB9IGZyb20gJ0Bhbmd1bGFyL3JvdXRlcic7XG5pbXBvcnQgeyBNYXRTbmFja0JhciwgTWF0RGlhbG9nIH0gZnJvbSAnQGFuZ3VsYXIvbWF0ZXJpYWwnO1xuXG4vKipcbiAqIENvbmZpZ3VyYXRpb24gb2Ygcm9sZXNcbiAqXG4gKiAhW2FsdC10ZXh0XSguLi9saXZlLWFwcHMtc2V0dGluZ3Mtcm9sZXMucG5nIFwiXCIpXG4gKlxuICpAZXhhbXBsZSA8dGNsYS1saXZlLWFwcHMtc2V0dGluZ3Mtcm9sZXM+PC90Y2xhLWxpdmUtYXBwcy1zZXR0aW5ncy1yb2xlcz5cbiAqL1xuQENvbXBvbmVudCh7XG4gICAgc2VsZWN0b3I6ICd0Y2xhLWxpdmUtYXBwcy1zZXR0aW5ncy1yb2xlcycsXG4gICAgdGVtcGxhdGVVcmw6ICcuL2xpdmUtYXBwcy1zZXR0aW5ncy1yb2xlcy5jb21wb25lbnQuaHRtbCcsXG4gICAgc3R5bGVVcmxzOiBbJy4vbGl2ZS1hcHBzLXNldHRpbmdzLXJvbGVzLmNvbXBvbmVudC5jc3MnXVxufSlcbmV4cG9ydCBjbGFzcyBMaXZlQXBwc1NldHRpbmdzUm9sZXNDb21wb25lbnQgZXh0ZW5kcyBUaWJjb0Nsb3VkU2V0dGluZ3NHZW5lcmFsQ29tcG9uZW50IGltcGxlbWVudHMgT25Jbml0IHtcblxuICAgIHB1YmxpYyByb2xlczogUm9sZXM7XG4gICAgcHVibGljIGdyb3VwczogR3JvdXBzO1xuXG4gICAgcHVibGljIGN1cnJlbnRSb2xlOiBSb2xlQXR0cmlidXRlO1xuXG4gICAgY29uc3RydWN0b3IocHJvdGVjdGVkIHJvdXRlOiBBY3RpdmF0ZWRSb3V0ZSwgcHJvdGVjdGVkIGdlbmVyYWxDb25maWdTZXJ2aWNlOiBUY0dlbmVyYWxDb25maWdTZXJ2aWNlLCBwcm90ZWN0ZWQgc25hY2tCYXI6IE1hdFNuYWNrQmFyLCBwcml2YXRlIGRpYWxvZzogTWF0RGlhbG9nKSB7XG4gICAgICAgIHN1cGVyKHJvdXRlLCBnZW5lcmFsQ29uZmlnU2VydmljZSwgc25hY2tCYXIpO1xuICAgIH1cblxuICAgIG5nT25Jbml0KCkge1xuICAgICAgICB0aGlzLmdlbmVyYWxDb25maWcgPSBzdXBlci5nZXRSb3V0ZSgpLnNuYXBzaG90LmRhdGEuZ2VuZXJhbENvbmZpZ0hvbGRlcjtcbiAgICAgICAgdGhpcy5yb2xlcyA9IHN1cGVyLmdldFJvdXRlKCkuc25hcHNob3QuZGF0YS5hbGxSb2xlcztcbiAgICAgICAgdGhpcy5ncm91cHMgPSBzdXBlci5nZXRSb3V0ZSgpLnNuYXBzaG90LmRhdGEuYWxsR3JvdXBzO1xuICAgICAgICB0aGlzLmNsYWltcyA9IHN1cGVyLmdldFJvdXRlKCkuc25hcHNob3QuZGF0YS5jbGFpbXM7XG4gICAgICAgIHRoaXMuc2FuZGJveElkID0gTnVtYmVyKHRoaXMuY2xhaW1zLnByaW1hcnlQcm9kdWN0aW9uU2FuZGJveC5pZCkudmFsdWVPZigpO1xuICAgIH1cblxuICAgIGRlbGV0ZVJvbGVGdW5jdGlvbiA9ICgpOiB2b2lkID0+IHtcbiAgICAgICAgdGhpcy5nZW5lcmFsQ29uZmlnLnJvbGVzID0gdGhpcy5nZW5lcmFsQ29uZmlnLnJvbGVzLmZpbHRlcihlbGVtZW50ID0+IGVsZW1lbnQuaWQgIT0gdGhpcy5jdXJyZW50Um9sZS5pZCk7XG4gICAgfVxuXG4gICAgc2VsZWN0ZWRSb2xlID0gKHJvbGU6IFJvbGVBdHRyaWJ1dGUpOiB2b2lkID0+IHtcbiAgICAgICAgdGhpcy5jdXJyZW50Um9sZSA9IHJvbGU7XG4gICAgfVxuXG4gICAgY3JlYXRlUm9sZUZ1bmN0aW9uID0gKCk6IHZvaWQgPT4ge1xuICAgICAgICBjb25zdCBkaWFsb2dSZWYgPSB0aGlzLmRpYWxvZy5vcGVuKFRpYmNvQ2xvdWROZXdFbGVtZW50Q29tcG9uZW50LCB7XG4gICAgICAgICAgICB3aWR0aDogJzUwJScsXG4gICAgICAgICAgICBoZWlnaHQ6ICczMCUnLFxuICAgICAgICAgICAgbWF4V2lkdGg6ICcxMDB2dycsXG4gICAgICAgICAgICBtYXhIZWlnaHQ6ICcxMDB2aCcsXG4gICAgICAgICAgICBwYW5lbENsYXNzOiAndGNzLXN0eWxlLWRpYWxvZycsXG4gICAgICAgICAgICBkYXRhOiB7IHJlc291cmNlVHlwZTogJ1JvbGUnIH1cblxuICAgICAgICB9KTtcblxuICAgICAgICBkaWFsb2dSZWYuYWZ0ZXJDbG9zZWQoKS5zdWJzY3JpYmUocmVzdWx0ID0+IHtcbiAgICAgICAgICAgIGlmIChyZXN1bHQpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBuZXdSb2xlID0gbmV3IFJvbGVBdHRyaWJ1dGUoKS5kZXNlcmlhbGl6ZSh7aWQ6IHJlc3VsdC5pZCwgZGlzcGxheTogcmVzdWx0Lm5hbWUsIHByaW9yaXR5OiAxIH0pO1xuICAgICAgICAgICAgICAgIHRoaXMuZ2VuZXJhbENvbmZpZy5yb2xlcy5wdXNoKG5ld1JvbGUpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICB9XG59XG4iXX0=