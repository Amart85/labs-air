/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
import * as tslib_1 from "tslib";
import { Component, EventEmitter, Input, Output } from '@angular/core';
import { LiveAppsService } from '../../services/live-apps.service';
import { map, take, takeUntil, tap } from 'rxjs/operators';
import { LiveAppsComponent } from '../live-apps-component/live-apps-component.component';
import { TcCaseProcessesService } from '../../services/tc-case-processes.service';
/**
 * Wraps case creator and case creator list
 *
 * \@example <tcla-live-apps-case-creators></tcla-live-apps-case-creators>
 */
var LiveAppsCaseCreatorsComponent = /** @class */ (function (_super) {
    tslib_1.__extends(LiveAppsCaseCreatorsComponent, _super);
    function LiveAppsCaseCreatorsComponent(liveapps, caseProcessesService) {
        var _this = _super.call(this) || this;
        _this.liveapps = liveapps;
        _this.caseProcessesService = caseProcessesService;
        /**
         * ~event creatorClicked : Case Creator selected
         * ~payload LaProcessSelection : LaProcessSelection object output when an action is clicked (ie. message to parent to run creator component)
         */
        _this.creatorClicked = new EventEmitter();
        _this.refresh = (/**
         * @return {?}
         */
        function () {
            _this.caseProcessesService.getCaseCreators(_this.sandboxId, _this.appId, _this.typeId)
                .pipe(take(1), takeUntil(_this._destroyed$), map((/**
             * @param {?} casecreators
             * @return {?}
             */
            function (casecreators) {
                _this.casecreators = casecreators.creators;
                if (_this.casecreators.length === 1) {
                    _this.selectCreator(_this.casecreators[0]);
                }
            }))).subscribe(null, (/**
             * @param {?} error
             * @return {?}
             */
            function (error) { _this.errorMessage = 'Error retrieving case actions: ' + error.error.errorMsg; }));
        });
        return _this;
    }
    /**
     * @param {?} creator
     * @return {?}
     */
    LiveAppsCaseCreatorsComponent.prototype.selectCreator = /**
     * @param {?} creator
     * @return {?}
     */
    function (creator) {
        var _this = this;
        this.caseProcessesService.getProcessDetails(null, this.appId, this.typeId, this.sandboxId, null, creator, 100).pipe(take(1), takeUntil(this._destroyed$), tap((/**
         * @param {?} processDetails
         * @return {?}
         */
        function (processDetails) {
            if (!processDetails || !processDetails.process || (processDetails.process.jsonSchema.$schema === 'NOSCHEMA')) {
                // This will be triggered when no form schema is available
                // Typically happens when:
                // 1) The form has elements that are not supported by the Live Apps API for form schemas such as participant selectors
                // 2) The Live Apps application is legacy and has no form schema at all, redeploying the live apps application would fix this.
                console.error('No schema available for this case type: The form may not be supported or you may need to update/re-deploy the live apps application. Alternatively use a custom form.');
            }
        })), map((/**
         * @param {?} processSchema
         * @return {?}
         */
        function (processSchema) {
            _this.creatorClicked.emit(processSchema);
            return processSchema;
        })))
            .subscribe(null, (/**
         * @param {?} error
         * @return {?}
         */
        function (error) { _this.errorMessage = 'Error retrieving case actions: ' + error.error.errorMsg; }));
    };
    /**
     * @return {?}
     */
    LiveAppsCaseCreatorsComponent.prototype.ngOnInit = /**
     * @return {?}
     */
    function () {
        this.refresh();
    };
    LiveAppsCaseCreatorsComponent.decorators = [
        { type: Component, args: [{
                    selector: 'tcla-live-apps-case-creators',
                    template: "<div *ngIf=\"casecreators && casecreators.length > 1\" fxFlex style=\"margin-left: 10px;\">\n  <span class=\"tcs-case-creation-dialog-instruction\">Select a case creator</span>\n  <mat-select #creatorSelector class=\"tcs-creator-selector-option\" [disableOptionCentering]=\"true\"\n              placeholder=\"Case Creators\" (selectionChange)=\"selectCreator($event.value)\">\n    <mat-option *ngFor=\"let creator of casecreators\" [value]=\"creator\">\n      <span>{{creator.label}}</span>\n    </mat-option>\n  </mat-select>\n</div>\n",
                    styles: [":host ::ng-deep .tcs-creator-selector-option .mat-select-value span{font-family:Source Sans Pro;font-size:16px;font-weight:400;font-style:normal;font-stretch:normal;line-height:1.5;letter-spacing:.3px;color:#0081cb}:host ::ng-deep .tcs-creator-selector-option .mat-select-arrow-wrapper div{color:#0081cb}:host ::ng-deep .mat-select-value{min-width:100px;max-width:100%;width:auto}.tcs-creators-box{width:200px;height:44px;box-shadow:inset 0 1px 3px 0 rgba(0,0,0,.5);background-color:#fff}tcs-creator-selector-option{width:170px;margin-left:5px;margin-right:5px;background-color:#eee;padding-left:20px;padding-right:20px;height:35px}.tcs-case-creation-dialog-instruction{font-family:Source Sans Pro;font-size:16px;font-weight:600;font-style:normal;font-stretch:normal;line-height:normal;letter-spacing:normal;color:#727272}"]
                }] }
    ];
    /** @nocollapse */
    LiveAppsCaseCreatorsComponent.ctorParameters = function () { return [
        { type: LiveAppsService },
        { type: TcCaseProcessesService }
    ]; };
    LiveAppsCaseCreatorsComponent.propDecorators = {
        appId: [{ type: Input }],
        typeId: [{ type: Input }],
        sandboxId: [{ type: Input }],
        creatorClicked: [{ type: Output }]
    };
    return LiveAppsCaseCreatorsComponent;
}(LiveAppsComponent));
export { LiveAppsCaseCreatorsComponent };
if (false) {
    /**
     * The LA Application Id
     * @type {?}
     */
    LiveAppsCaseCreatorsComponent.prototype.appId;
    /**
     * The LA Application Type Id (generally 1)
     * @type {?}
     */
    LiveAppsCaseCreatorsComponent.prototype.typeId;
    /**
     * sandboxId - this comes from claims resolver
     * @type {?}
     */
    LiveAppsCaseCreatorsComponent.prototype.sandboxId;
    /**
     * ~event creatorClicked : Case Creator selected
     * ~payload LaProcessSelection : LaProcessSelection object output when an action is clicked (ie. message to parent to run creator component)
     * @type {?}
     */
    LiveAppsCaseCreatorsComponent.prototype.creatorClicked;
    /** @type {?} */
    LiveAppsCaseCreatorsComponent.prototype.casecreators;
    /** @type {?} */
    LiveAppsCaseCreatorsComponent.prototype.errorMessage;
    /** @type {?} */
    LiveAppsCaseCreatorsComponent.prototype.appSchema;
    /** @type {?} */
    LiveAppsCaseCreatorsComponent.prototype.caseType;
    /** @type {?} */
    LiveAppsCaseCreatorsComponent.prototype.caseActionList;
    /** @type {?} */
    LiveAppsCaseCreatorsComponent.prototype.refresh;
    /**
     * @type {?}
     * @protected
     */
    LiveAppsCaseCreatorsComponent.prototype.liveapps;
    /**
     * @type {?}
     * @protected
     */
    LiveAppsCaseCreatorsComponent.prototype.caseProcessesService;
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibGl2ZS1hcHBzLWNhc2UtY3JlYXRvcnMuY29tcG9uZW50LmpzIiwic291cmNlUm9vdCI6Im5nOi8vQHRpYmNvLXRjc3RrL3RjLWxpdmVhcHBzLWxpYi8iLCJzb3VyY2VzIjpbImxpYi9jb21wb25lbnRzL2xpdmUtYXBwcy1jYXNlLWNyZWF0b3JzL2xpdmUtYXBwcy1jYXNlLWNyZWF0b3JzLmNvbXBvbmVudC50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOzs7OztBQUVBLE9BQU8sRUFBQyxTQUFTLEVBQUUsWUFBWSxFQUFFLEtBQUssRUFBcUIsTUFBTSxFQUFZLE1BQU0sZUFBZSxDQUFDO0FBRW5HLE9BQU8sRUFBQyxlQUFlLEVBQUMsTUFBTSxrQ0FBa0MsQ0FBQztBQUNqRSxPQUFPLEVBQUMsR0FBRyxFQUFFLElBQUksRUFBRSxTQUFTLEVBQUUsR0FBRyxFQUFDLE1BQU0sZ0JBQWdCLENBQUM7QUFHekQsT0FBTyxFQUFDLGlCQUFpQixFQUFDLE1BQU0sc0RBQXNELENBQUM7QUFDdkYsT0FBTyxFQUFDLHNCQUFzQixFQUFDLE1BQU0sMENBQTBDLENBQUM7Ozs7OztBQVNoRjtJQUttRCx5REFBaUI7SUE4QmxFLHVDQUFzQixRQUF5QixFQUFZLG9CQUE0QztRQUF2RyxZQUNFLGlCQUFPLFNBQ1I7UUFGcUIsY0FBUSxHQUFSLFFBQVEsQ0FBaUI7UUFBWSwwQkFBb0IsR0FBcEIsb0JBQW9CLENBQXdCOzs7OztRQVY3RixvQkFBYyxHQUFxQyxJQUFJLFlBQVksRUFBc0IsQ0FBQztRQWM3RixhQUFPOzs7UUFBRztZQUNmLEtBQUksQ0FBQyxvQkFBb0IsQ0FBQyxlQUFlLENBQUMsS0FBSSxDQUFDLFNBQVMsRUFBRSxLQUFJLENBQUMsS0FBSyxFQUFFLEtBQUksQ0FBQyxNQUFNLENBQUM7aUJBQy9FLElBQUksQ0FDSCxJQUFJLENBQUMsQ0FBQyxDQUFDLEVBQ1AsU0FBUyxDQUFDLEtBQUksQ0FBQyxXQUFXLENBQUMsRUFDM0IsR0FBRzs7OztZQUFDLFVBQUEsWUFBWTtnQkFDZCxLQUFJLENBQUMsWUFBWSxHQUFHLFlBQVksQ0FBQyxRQUFRLENBQUM7Z0JBQzFDLElBQUksS0FBSSxDQUFDLFlBQVksQ0FBQyxNQUFNLEtBQUssQ0FBQyxFQUFFO29CQUNsQyxLQUFJLENBQUMsYUFBYSxDQUFDLEtBQUksQ0FBQyxZQUFZLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQztpQkFDMUM7WUFDSCxDQUFDLEVBQUMsQ0FDSCxDQUFDLFNBQVMsQ0FDWCxJQUFJOzs7O1lBQUUsVUFBQSxLQUFLLElBQU0sS0FBSSxDQUFDLFlBQVksR0FBRyxpQ0FBaUMsR0FBRyxLQUFLLENBQUMsS0FBSyxDQUFDLFFBQVEsQ0FBQyxDQUFDLENBQUMsRUFBQyxDQUFDO1FBQ3RHLENBQUMsRUFBQTs7SUFmRCxDQUFDOzs7OztJQWlCTSxxREFBYTs7OztJQUFwQixVQUFxQixPQUFvQjtRQUF6QyxpQkFvQkM7UUFuQkMsSUFBSSxDQUFDLG9CQUFvQixDQUFDLGlCQUFpQixDQUFDLElBQUksRUFBRSxJQUFJLENBQUMsS0FBSyxFQUFFLElBQUksQ0FBQyxNQUFNLEVBQUUsSUFBSSxDQUFDLFNBQVMsRUFBRSxJQUFJLEVBQUUsT0FBTyxFQUFFLEdBQUcsQ0FBQyxDQUFDLElBQUksQ0FDakgsSUFBSSxDQUFDLENBQUMsQ0FBQyxFQUNQLFNBQVMsQ0FBQyxJQUFJLENBQUMsV0FBVyxDQUFDLEVBQzNCLEdBQUc7Ozs7UUFBQyxVQUFBLGNBQWM7WUFDaEIsSUFBSSxDQUFDLGNBQWMsSUFBSSxDQUFDLGNBQWMsQ0FBQyxPQUFPLElBQUksQ0FBQyxjQUFjLENBQUMsT0FBTyxDQUFDLFVBQVUsQ0FBQyxPQUFPLEtBQUssVUFBVSxDQUFDLEVBQUU7Z0JBQzVHLDBEQUEwRDtnQkFDMUQsMEJBQTBCO2dCQUMxQixzSEFBc0g7Z0JBQ3RILDhIQUE4SDtnQkFDNUgsT0FBTyxDQUFDLEtBQUssQ0FBQyx1S0FBdUssQ0FBQyxDQUFDO2FBQ3hMO1FBQ0gsQ0FBQyxFQUNGLEVBQ0QsR0FBRzs7OztRQUFDLFVBQUEsYUFBYTtZQUNmLEtBQUksQ0FBQyxjQUFjLENBQUMsSUFBSSxDQUFDLGFBQWEsQ0FBQyxDQUFDO1lBQ3hDLE9BQU8sYUFBYSxDQUFDO1FBQ3ZCLENBQUMsRUFBQyxDQUNIO2FBQ0EsU0FBUyxDQUFDLElBQUk7Ozs7UUFBRSxVQUFBLEtBQUssSUFBTSxLQUFJLENBQUMsWUFBWSxHQUFHLGlDQUFpQyxHQUFHLEtBQUssQ0FBQyxLQUFLLENBQUMsUUFBUSxDQUFDLENBQUMsQ0FBQyxFQUFDLENBQUM7SUFDL0csQ0FBQzs7OztJQUVELGdEQUFROzs7SUFBUjtRQUNFLElBQUksQ0FBQyxPQUFPLEVBQUUsQ0FBQztJQUNqQixDQUFDOztnQkE5RUYsU0FBUyxTQUFDO29CQUNULFFBQVEsRUFBRSw4QkFBOEI7b0JBQ3hDLHFpQkFBdUQ7O2lCQUV4RDs7OztnQkFsQk8sZUFBZTtnQkFLZixzQkFBc0I7Ozt3QkFrQjNCLEtBQUs7eUJBS0wsS0FBSzs0QkFLTCxLQUFLO2lDQU1MLE1BQU07O0lBdURULG9DQUFDO0NBQUEsQUFoRkQsQ0FLbUQsaUJBQWlCLEdBMkVuRTtTQTNFWSw2QkFBNkI7Ozs7OztJQUl4Qyw4Q0FBdUI7Ozs7O0lBS3ZCLCtDQUF3Qjs7Ozs7SUFLeEIsa0RBQTJCOzs7Ozs7SUFNM0IsdURBQW9HOztJQUdwRyxxREFBbUM7O0lBQ25DLHFEQUE0Qjs7SUFFNUIsa0RBQXlCOztJQUN6QixpREFBbUI7O0lBQ25CLHVEQUEwQjs7SUFNMUIsZ0RBYUM7Ozs7O0lBakJXLGlEQUFtQzs7Ozs7SUFBRSw2REFBc0QiLCJzb3VyY2VzQ29udGVudCI6WyJcblxuaW1wb3J0IHtDb21wb25lbnQsIEV2ZW50RW1pdHRlciwgSW5wdXQsIE9uRGVzdHJveSwgT25Jbml0LCBPdXRwdXQsIFZpZXdDaGlsZH0gZnJvbSAnQGFuZ3VsYXIvY29yZSc7XG5pbXBvcnQge1N1YmplY3R9IGZyb20gJ3J4anMnO1xuaW1wb3J0IHtMaXZlQXBwc1NlcnZpY2V9IGZyb20gJy4uLy4uL3NlcnZpY2VzL2xpdmUtYXBwcy5zZXJ2aWNlJztcbmltcG9ydCB7bWFwLCB0YWtlLCB0YWtlVW50aWwsIHRhcH0gZnJvbSAncnhqcy9vcGVyYXRvcnMnO1xuaW1wb3J0IHtDYXNlQ3JlYXRvciwgQ2FzZVR5cGUsIENhc2VUeXBlc0xpc3QsIFByb2Nlc3N9IGZyb20gJy4uLy4uL21vZGVscy9saXZlYXBwc2RhdGEnO1xuaW1wb3J0IHtMYVByb2Nlc3NTZWxlY3Rpb259IGZyb20gJy4uLy4uL21vZGVscy90Yy1jYXNlLXByb2Nlc3Nlcyc7XG5pbXBvcnQge0xpdmVBcHBzQ29tcG9uZW50fSBmcm9tICcuLi9saXZlLWFwcHMtY29tcG9uZW50L2xpdmUtYXBwcy1jb21wb25lbnQuY29tcG9uZW50JztcbmltcG9ydCB7VGNDYXNlUHJvY2Vzc2VzU2VydmljZX0gZnJvbSAnLi4vLi4vc2VydmljZXMvdGMtY2FzZS1wcm9jZXNzZXMuc2VydmljZSc7XG5pbXBvcnQge0N1c3RvbUZvcm1EZWZzfSBmcm9tICdAdGliY28tdGNzdGsvdGMtZm9ybXMtbGliJztcblxuXG4vKipcbiAqIFdyYXBzIGNhc2UgY3JlYXRvciBhbmQgY2FzZSBjcmVhdG9yIGxpc3RcbiAqXG4gKkBleGFtcGxlIDx0Y2xhLWxpdmUtYXBwcy1jYXNlLWNyZWF0b3JzPjwvdGNsYS1saXZlLWFwcHMtY2FzZS1jcmVhdG9ycz5cbiAqL1xuQENvbXBvbmVudCh7XG4gIHNlbGVjdG9yOiAndGNsYS1saXZlLWFwcHMtY2FzZS1jcmVhdG9ycycsXG4gIHRlbXBsYXRlVXJsOiAnLi9saXZlLWFwcHMtY2FzZS1jcmVhdG9ycy5jb21wb25lbnQuaHRtbCcsXG4gIHN0eWxlVXJsczogWycuL2xpdmUtYXBwcy1jYXNlLWNyZWF0b3JzLmNvbXBvbmVudC5jc3MnXVxufSlcbmV4cG9ydCBjbGFzcyBMaXZlQXBwc0Nhc2VDcmVhdG9yc0NvbXBvbmVudCBleHRlbmRzIExpdmVBcHBzQ29tcG9uZW50IGltcGxlbWVudHMgT25Jbml0IHtcbiAgLyoqXG4gICAqIFRoZSBMQSBBcHBsaWNhdGlvbiBJZFxuICAgKi9cbiAgQElucHV0KCkgYXBwSWQ6IHN0cmluZztcblxuICAvKipcbiAgICogVGhlIExBIEFwcGxpY2F0aW9uIFR5cGUgSWQgKGdlbmVyYWxseSAxKVxuICAgKi9cbiAgQElucHV0KCkgdHlwZUlkOiBzdHJpbmc7XG5cbiAgLyoqXG4gICAqIHNhbmRib3hJZCAtIHRoaXMgY29tZXMgZnJvbSBjbGFpbXMgcmVzb2x2ZXJcbiAgICovXG4gIEBJbnB1dCgpIHNhbmRib3hJZDogbnVtYmVyO1xuXG4gIC8qKlxuICAgKiB+ZXZlbnQgY3JlYXRvckNsaWNrZWQgOiBDYXNlIENyZWF0b3Igc2VsZWN0ZWRcbiAgICogfnBheWxvYWQgTGFQcm9jZXNzU2VsZWN0aW9uIDogTGFQcm9jZXNzU2VsZWN0aW9uIG9iamVjdCBvdXRwdXQgd2hlbiBhbiBhY3Rpb24gaXMgY2xpY2tlZCAoaWUuIG1lc3NhZ2UgdG8gcGFyZW50IHRvIHJ1biBjcmVhdG9yIGNvbXBvbmVudClcbiAgICovXG4gIEBPdXRwdXQoKSBjcmVhdG9yQ2xpY2tlZDogRXZlbnRFbWl0dGVyPExhUHJvY2Vzc1NlbGVjdGlvbj4gPSBuZXcgRXZlbnRFbWl0dGVyPExhUHJvY2Vzc1NlbGVjdGlvbj4oKTtcblxuXG4gIHB1YmxpYyBjYXNlY3JlYXRvcnM6IENhc2VDcmVhdG9yW107XG4gIHB1YmxpYyBlcnJvck1lc3NhZ2U6IHN0cmluZztcblxuICBhcHBTY2hlbWE6IENhc2VUeXBlc0xpc3Q7XG4gIGNhc2VUeXBlOiBDYXNlVHlwZTtcbiAgY2FzZUFjdGlvbkxpc3Q6IFByb2Nlc3NbXTtcblxuICBjb25zdHJ1Y3Rvcihwcm90ZWN0ZWQgbGl2ZWFwcHM6IExpdmVBcHBzU2VydmljZSwgcHJvdGVjdGVkIGNhc2VQcm9jZXNzZXNTZXJ2aWNlOiBUY0Nhc2VQcm9jZXNzZXNTZXJ2aWNlKSB7XG4gICAgc3VwZXIoKTtcbiAgfVxuXG4gIHB1YmxpYyByZWZyZXNoID0gKCkgPT4ge1xuICAgIHRoaXMuY2FzZVByb2Nlc3Nlc1NlcnZpY2UuZ2V0Q2FzZUNyZWF0b3JzKHRoaXMuc2FuZGJveElkLCB0aGlzLmFwcElkLCB0aGlzLnR5cGVJZClcbiAgICAgIC5waXBlKFxuICAgICAgICB0YWtlKDEpLFxuICAgICAgICB0YWtlVW50aWwodGhpcy5fZGVzdHJveWVkJCksXG4gICAgICAgIG1hcChjYXNlY3JlYXRvcnMgPT4ge1xuICAgICAgICAgIHRoaXMuY2FzZWNyZWF0b3JzID0gY2FzZWNyZWF0b3JzLmNyZWF0b3JzO1xuICAgICAgICAgIGlmICh0aGlzLmNhc2VjcmVhdG9ycy5sZW5ndGggPT09IDEpIHtcbiAgICAgICAgICAgIHRoaXMuc2VsZWN0Q3JlYXRvcih0aGlzLmNhc2VjcmVhdG9yc1swXSk7XG4gICAgICAgICAgfVxuICAgICAgICB9KVxuICAgICAgKS5zdWJzY3JpYmUoXG4gICAgICBudWxsLCBlcnJvciA9PiB7IHRoaXMuZXJyb3JNZXNzYWdlID0gJ0Vycm9yIHJldHJpZXZpbmcgY2FzZSBhY3Rpb25zOiAnICsgZXJyb3IuZXJyb3IuZXJyb3JNc2c7IH0pO1xuICB9XG5cbiAgcHVibGljIHNlbGVjdENyZWF0b3IoY3JlYXRvcjogQ2FzZUNyZWF0b3IpIHtcbiAgICB0aGlzLmNhc2VQcm9jZXNzZXNTZXJ2aWNlLmdldFByb2Nlc3NEZXRhaWxzKG51bGwsIHRoaXMuYXBwSWQsIHRoaXMudHlwZUlkLCB0aGlzLnNhbmRib3hJZCwgbnVsbCwgY3JlYXRvciwgMTAwKS5waXBlKFxuICAgICAgdGFrZSgxKSxcbiAgICAgIHRha2VVbnRpbCh0aGlzLl9kZXN0cm95ZWQkKSxcbiAgICAgIHRhcChwcm9jZXNzRGV0YWlscyA9PiB7XG4gICAgICAgIGlmICghcHJvY2Vzc0RldGFpbHMgfHwgIXByb2Nlc3NEZXRhaWxzLnByb2Nlc3MgfHwgKHByb2Nlc3NEZXRhaWxzLnByb2Nlc3MuanNvblNjaGVtYS4kc2NoZW1hID09PSAnTk9TQ0hFTUEnKSkge1xuICAgICAgICAgIC8vIFRoaXMgd2lsbCBiZSB0cmlnZ2VyZWQgd2hlbiBubyBmb3JtIHNjaGVtYSBpcyBhdmFpbGFibGVcbiAgICAgICAgICAvLyBUeXBpY2FsbHkgaGFwcGVucyB3aGVuOlxuICAgICAgICAgIC8vIDEpIFRoZSBmb3JtIGhhcyBlbGVtZW50cyB0aGF0IGFyZSBub3Qgc3VwcG9ydGVkIGJ5IHRoZSBMaXZlIEFwcHMgQVBJIGZvciBmb3JtIHNjaGVtYXMgc3VjaCBhcyBwYXJ0aWNpcGFudCBzZWxlY3RvcnNcbiAgICAgICAgICAvLyAyKSBUaGUgTGl2ZSBBcHBzIGFwcGxpY2F0aW9uIGlzIGxlZ2FjeSBhbmQgaGFzIG5vIGZvcm0gc2NoZW1hIGF0IGFsbCwgcmVkZXBsb3lpbmcgdGhlIGxpdmUgYXBwcyBhcHBsaWNhdGlvbiB3b3VsZCBmaXggdGhpcy5cbiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ05vIHNjaGVtYSBhdmFpbGFibGUgZm9yIHRoaXMgY2FzZSB0eXBlOiBUaGUgZm9ybSBtYXkgbm90IGJlIHN1cHBvcnRlZCBvciB5b3UgbWF5IG5lZWQgdG8gdXBkYXRlL3JlLWRlcGxveSB0aGUgbGl2ZSBhcHBzIGFwcGxpY2F0aW9uLiBBbHRlcm5hdGl2ZWx5IHVzZSBhIGN1c3RvbSBmb3JtLicpO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgKSxcbiAgICAgIG1hcChwcm9jZXNzU2NoZW1hID0+IHtcbiAgICAgICAgdGhpcy5jcmVhdG9yQ2xpY2tlZC5lbWl0KHByb2Nlc3NTY2hlbWEpO1xuICAgICAgICByZXR1cm4gcHJvY2Vzc1NjaGVtYTtcbiAgICAgIH0pXG4gICAgKVxuICAgIC5zdWJzY3JpYmUobnVsbCwgZXJyb3IgPT4geyB0aGlzLmVycm9yTWVzc2FnZSA9ICdFcnJvciByZXRyaWV2aW5nIGNhc2UgYWN0aW9uczogJyArIGVycm9yLmVycm9yLmVycm9yTXNnOyB9KTtcbiAgfVxuXG4gIG5nT25Jbml0KCkge1xuICAgIHRoaXMucmVmcmVzaCgpO1xuICB9XG5cbn1cbiJdfQ==