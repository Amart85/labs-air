/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
// this resolver wraps claims and appConfig resolvers because we need claims to get and set AppConfig to default values.
// we actually cache the claims call using a HTTP interceptor to avoid making multiple REST calls
// note: claims only changes on logout/login so no point making lots of calls to claims
import { Injectable } from '@angular/core';
import { forkJoin } from 'rxjs';
import { GeneralConfigResolver, TcGeneralConfigService } from '@tibco-tcstk/tc-core-lib';
import { flatMap, map } from 'rxjs/operators';
import { TcSharedStateService } from '@tibco-tcstk/tc-core-lib';
import { ClaimsResolver } from './claims.resolver';
import { LiveAppsService } from '../services/live-apps.service';
import { HttpClient } from '@angular/common/http';
import { TcDocumentService } from '../services/tc-document.service';
import { LiveAppsConfigHolder } from '../models/tc-liveapps-config';
import { LiveAppsConfigResolver } from './liveapps-config.resolver';
import { TcLiveAppsConfigService } from '../services/tc-live-apps-config.service';
import { TcCaseCardConfigService } from '../services/tc-case-card-config.service';
import { Location } from '@angular/common';
export class LaConfigResolver {
    /**
     * @param {?} sharedStateService
     * @param {?} generalConfigService
     * @param {?} liveAppsConfigService
     * @param {?} documentService
     * @param {?} http
     * @param {?} liveAppsService
     * @param {?} caseCardConfigService
     * @param {?} location
     */
    constructor(sharedStateService, generalConfigService, liveAppsConfigService, documentService, http, liveAppsService, caseCardConfigService, location) {
        this.sharedStateService = sharedStateService;
        this.generalConfigService = generalConfigService;
        this.liveAppsConfigService = liveAppsConfigService;
        this.documentService = documentService;
        this.http = http;
        this.liveAppsService = liveAppsService;
        this.caseCardConfigService = caseCardConfigService;
        this.location = location;
    }
    /**
     * @param {?} routeSnapshot
     * @return {?}
     */
    resolve(routeSnapshot) {
        // we will return a holder object that contains both general config and live apps config
        // we will return a holder object that contains both general config and live apps config
        /** @type {?} */
        const generalConfigResolver = new GeneralConfigResolver(this.sharedStateService, this.generalConfigService, this.http, this.location);
        /** @type {?} */
        const liveAppsConfigResolver = new LiveAppsConfigResolver(this.sharedStateService, this.liveAppsConfigService, this.caseCardConfigService, this.http, this.location);
        /** @type {?} */
        const claimResolver$ = new ClaimsResolver(this.liveAppsService).resolve().pipe(flatMap((/**
         * @param {?} value
         * @return {?}
         */
        value => {
            /** @type {?} */
            const sandboxId = value.primaryProductionSandbox.id;
            generalConfigResolver.setSandbox(Number(sandboxId));
            liveAppsConfigResolver.setSandbox(Number(sandboxId));
            /** @type {?} */
            const generalConfig$ = generalConfigResolver.resolve();
            /** @type {?} */
            const liveAppsConfig$ = liveAppsConfigResolver.resolve(routeSnapshot);
            /** @type {?} */
            const forkJoinArray = [generalConfig$, liveAppsConfig$];
            return forkJoin(forkJoinArray).pipe(map((/**
             * @param {?} resultArr
             * @return {?}
             */
            resultArr => {
                return new LiveAppsConfigHolder().deserialize({ generalConfig: resultArr[0], liveAppsConfig: resultArr[1] });
            })));
        })));
        /** @type {?} */
        const resolveResp$ = claimResolver$.pipe(flatMap((/**
         * @param {?} liveAppsConfigHolder
         * @return {?}
         */
        liveAppsConfigHolder => {
            /** @type {?} */
            const iconsFolder$ = this.documentService.initOrgFolder(liveAppsConfigHolder.generalConfig.uiAppId + '_Icons');
            /** @type {?} */
            const docsFolder$ = this.documentService.initOrgFolder(liveAppsConfigHolder.generalConfig.uiAppId + '_Docs');
            /** @type {?} */
            const forkJoinArray = [iconsFolder$, docsFolder$];
            return forkJoin(forkJoinArray).pipe(map((/**
             * @param {?} resultArr
             * @return {?}
             */
            resultArr => {
                return liveAppsConfigHolder;
            })));
        })));
        return resolveResp$;
    }
}
LaConfigResolver.decorators = [
    { type: Injectable }
];
/** @nocollapse */
LaConfigResolver.ctorParameters = () => [
    { type: TcSharedStateService },
    { type: TcGeneralConfigService },
    { type: TcLiveAppsConfigService },
    { type: TcDocumentService },
    { type: HttpClient },
    { type: LiveAppsService },
    { type: TcCaseCardConfigService },
    { type: Location }
];
if (false) {
    /**
     * @type {?}
     * @private
     */
    LaConfigResolver.prototype.sharedStateService;
    /**
     * @type {?}
     * @private
     */
    LaConfigResolver.prototype.generalConfigService;
    /**
     * @type {?}
     * @private
     */
    LaConfigResolver.prototype.liveAppsConfigService;
    /**
     * @type {?}
     * @private
     */
    LaConfigResolver.prototype.documentService;
    /**
     * @type {?}
     * @private
     */
    LaConfigResolver.prototype.http;
    /**
     * @type {?}
     * @private
     */
    LaConfigResolver.prototype.liveAppsService;
    /**
     * @type {?}
     * @private
     */
    LaConfigResolver.prototype.caseCardConfigService;
    /**
     * @type {?}
     * @private
     */
    LaConfigResolver.prototype.location;
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibGEtY29uZmlnLnJlc29sdmVyLmpzIiwic291cmNlUm9vdCI6Im5nOi8vQHRpYmNvLXRjc3RrL3RjLWxpdmVhcHBzLWxpYi8iLCJzb3VyY2VzIjpbImxpYi9yZXNvbHZlcnMvbGEtY29uZmlnLnJlc29sdmVyLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7Ozs7Ozs7QUFJQSxPQUFPLEVBQUUsVUFBVSxFQUFFLE1BQU0sZUFBZSxDQUFDO0FBRTNDLE9BQU8sRUFBQyxRQUFRLEVBQWlCLE1BQU0sTUFBTSxDQUFDO0FBQzlDLE9BQU8sRUFBQyxxQkFBcUIsRUFBOEIsc0JBQXNCLEVBQUMsTUFBTSwwQkFBMEIsQ0FBQztBQUNuSCxPQUFPLEVBQUMsT0FBTyxFQUFFLEdBQUcsRUFBVyxNQUFNLGdCQUFnQixDQUFDO0FBQ3RELE9BQU8sRUFBQyxvQkFBb0IsRUFBQyxNQUFNLDBCQUEwQixDQUFDO0FBRTlELE9BQU8sRUFBQyxjQUFjLEVBQUMsTUFBTSxtQkFBbUIsQ0FBQztBQUNqRCxPQUFPLEVBQUMsZUFBZSxFQUFDLE1BQU0sK0JBQStCLENBQUM7QUFDOUQsT0FBTyxFQUFDLFVBQVUsRUFBQyxNQUFNLHNCQUFzQixDQUFDO0FBQ2hELE9BQU8sRUFBQyxpQkFBaUIsRUFBQyxNQUFNLGlDQUFpQyxDQUFDO0FBQ2xFLE9BQU8sRUFBaUIsb0JBQW9CLEVBQUMsTUFBTSw4QkFBOEIsQ0FBQztBQUNsRixPQUFPLEVBQUMsc0JBQXNCLEVBQUMsTUFBTSw0QkFBNEIsQ0FBQztBQUNsRSxPQUFPLEVBQUMsdUJBQXVCLEVBQUMsTUFBTSx5Q0FBeUMsQ0FBQztBQUNoRixPQUFPLEVBQUMsdUJBQXVCLEVBQUMsTUFBTSx5Q0FBeUMsQ0FBQztBQUNoRixPQUFPLEVBQUMsUUFBUSxFQUFDLE1BQU0saUJBQWlCLENBQUM7QUFHekMsTUFBTSxPQUFPLGdCQUFnQjs7Ozs7Ozs7Ozs7SUFFM0IsWUFBb0Isa0JBQXdDLEVBQVUsb0JBQTRDLEVBQVUscUJBQThDLEVBQVUsZUFBa0MsRUFB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O1lBQ3ZCLFFBQVE7Ozs7Ozs7SUFLRiw4Q0FBZ0Q7Ozs7O0lBQUUsZ0RBQW9EOzs7OztJQUFFLGlEQUFzRDs7Ozs7SUFBRSwyQ0FBMEM7Ozs7O0lBQUUsZ0NBQXdCOzs7OztJQUFFLDJDQUF3Qzs7Ozs7SUFBRSxpREFBc0Q7Ozs7O0lBQUUsb0NBQTBCIiwic291cmNlc0NvbnRlbnQiOlsiLy8gdGhpcyByZXNvbHZlciB3cmFwcyBjbGFpbXMgYW5kIGFwcENvbmZpZyByZXNvbHZlcnMgYmVjYXVzZSB3ZSBuZWVkIGNsYWltcyB0byBnZXQgYW5kIHNldCBBcHBDb25maWcgdG8gZGVmYXVsdCB2YWx1ZXMuXG4vLyB3ZSBhY3R1YWxseSBjYWNoZSB0aGUgY2xhaW1zIGNhbGwgdXNpbmcgYSBIVFRQIGludGVyY2VwdG9yIHRvIGF2b2lkIG1ha2luZyBtdWx0aXBsZSBSRVNUIGNhbGxzXG4vLyBub3RlOiBjbGFpbXMgb25seSBjaGFuZ2VzIG9uIGxvZ291dC9sb2dpbiBzbyBubyBwb2ludCBtYWtpbmcgbG90cyBvZiBjYWxscyB0byBjbGFpbXNcblxuaW1wb3J0IHsgSW5qZWN0YWJsZSB9IGZyb20gJ0Bhbmd1bGFyL2NvcmUnO1xuaW1wb3J0IHtBY3RpdmF0ZWRSb3V0ZVNuYXBzaG90LCBSZXNvbHZlfSBmcm9tICdAYW5ndWxhci9yb3V0ZXInO1xuaW1wb3J0IHtmb3JrSm9pbiwgT2JzZXJ2YWJsZSwgb2Z9IGZyb20gJ3J4anMnO1xuaW1wb3J0IHtHZW5lcmFsQ29uZmlnUmVzb2x2ZXIsIFVpQXBwQ29uZmlnLCBHZW5lcmFsQ29uZmlnLCBUY0dlbmVyYWxDb25maWdTZXJ2aWNlfSBmcm9tICdAdGliY28tdGNzdGsvdGMtY29yZS1saWInO1xuaW1wb3J0IHtmbGF0TWFwLCBtYXAsIG1lcmdlTWFwfSBmcm9tICdyeGpzL29wZXJhdG9ycyc7XG5pbXBvcnQge1RjU2hhcmVkU3RhdGVTZXJ2aWNlfSBmcm9tICdAdGliY28tdGNzdGsvdGMtY29yZS1saWInO1xuaW1wb3J0IHtDbGFpbX0gZnJvbSAnQHRpYmNvLXRjc3RrL3RjLWNvcmUtbGliJztcbmltcG9ydCB7Q2xhaW1zUmVzb2x2ZXJ9IGZyb20gJy4vY2xhaW1zLnJlc29sdmVyJztcbmltcG9ydCB7TGl2ZUFwcHNTZXJ2aWNlfSBmcm9tICcuLi9zZXJ2aWNlcy9saXZlLWFwcHMuc2VydmljZSc7XG5pbXBvcnQge0h0dHBDbGllbnR9IGZyb20gJ0Bhbmd1bGFyL2NvbW1vbi9odHRwJztcbmltcG9ydCB7VGNEb2N1bWVudFNlcnZpY2V9IGZyb20gJy4uL3NlcnZpY2VzL3RjLWRvY3VtZW50LnNlcnZpY2UnO1xuaW1wb3J0IHtMaXZlQXBwc0NvbmZpZywgTGl2ZUFwcHNDb25maWdIb2xkZXJ9IGZyb20gJy4uL21vZGVscy90Yy1saXZlYXBwcy1jb25maWcnO1xuaW1wb3J0IHtMaXZlQXBwc0NvbmZpZ1Jlc29sdmVyfSBmcm9tICcuL2xpdmVhcHBzLWNvbmZpZy5yZXNvbHZlcic7XG5pbXBvcnQge1RjTGl2ZUFwcHNDb25maWdTZXJ2aWNlfSBmcm9tICcuLi9zZXJ2aWNlcy90Yy1saXZlLWFwcHMtY29uZmlnLnNlcnZpY2UnO1xuaW1wb3J0IHtUY0Nhc2VDYXJkQ29uZmlnU2VydmljZX0gZnJvbSAnLi4vc2VydmljZXMvdGMtY2FzZS1jYXJkLWNvbmZpZy5zZXJ2aWNlJztcbmltcG9ydCB7TG9jYXRpb259IGZyb20gJ0Bhbmd1bGFyL2NvbW1vbic7XG5cbkBJbmplY3RhYmxlKClcbmV4cG9ydCBjbGFzcyBMYUNvbmZpZ1Jlc29sdmVyIGltcGxlbWVudHMgUmVzb2x2ZTxPYnNlcnZhYmxlPExpdmVBcHBzQ29uZmlnSG9sZGVyPj4ge1xuXG4gIGNvbnN0cnVjdG9yKHByaXZhdGUgc2hhcmVkU3RhdGVTZXJ2aWNlOiBUY1NoYXJlZFN0YXRlU2VydmljZSwgcHJpdmF0ZSBnZW5lcmFsQ29uZmlnU2VydmljZTogVGNHZW5lcmFsQ29uZmlnU2VydmljZSwgcHJpdmF0ZSBsaXZlQXBwc0NvbmZpZ1NlcnZpY2U6IFRjTGl2ZUFwcHNDb25maWdTZXJ2aWNlLCBwcml2YXRlIGRvY3VtZW50U2VydmljZTogVGNEb2N1bWVudFNlcnZpY2UsIHByaXZhdGUgaHR0cDogSHR0cENsaWVudCwgcHJpdmF0ZSBsaXZlQXBwc1NlcnZpY2U6IExpdmVBcHBzU2VydmljZSwgcHJpdmF0ZSBjYXNlQ2FyZENvbmZpZ1NlcnZpY2U6IFRjQ2FzZUNhcmRDb25maWdTZXJ2aWNlLCBwcml2YXRlIGxvY2F0aW9uOiBMb2NhdGlvbikge31cblxuICByZXNvbHZlKHJvdXRlU25hcHNob3Q6IEFjdGl2YXRlZFJvdXRlU25hcHNob3QpOiBPYnNlcnZhYmxlPExpdmVBcHBzQ29uZmlnSG9sZGVyPiB7XG4gICAgLy8gd2Ugd2lsbCByZXR1cm4gYSBob2xkZXIgb2JqZWN0IHRoYXQgY29udGFpbnMgYm90aCBnZW5lcmFsIGNvbmZpZyBhbmQgbGl2ZSBhcHBzIGNvbmZpZ1xuXG4gICAgY29uc3QgZ2VuZXJhbENvbmZpZ1Jlc29sdmVyID0gbmV3IEdlbmVyYWxDb25maWdSZXNvbHZlcih0aGlzLnNoYXJlZFN0YXRlU2VydmljZSwgdGhpcy5nZW5lcmFsQ29uZmlnU2VydmljZSwgdGhpcy5odHRwLCB0aGlzLmxvY2F0aW9uKTtcbiAgICBjb25zdCBsaXZlQXBwc0NvbmZpZ1Jlc29sdmVyID0gbmV3IExpdmVBcHBzQ29uZmlnUmVzb2x2ZXIodGhpcy5zaGFyZWRTdGF0ZVNlcnZpY2UsIHRoaXMubGl2ZUFwcHNDb25maWdTZXJ2aWNlLCB0aGlzLmNhc2VDYXJkQ29uZmlnU2VydmljZSwgdGhpcy5odHRwLCB0aGlzLmxvY2F0aW9uKTtcblxuICAgIGNvbnN0IGNsYWltUmVzb2x2ZXIkID0gbmV3IENsYWltc1Jlc29sdmVyKHRoaXMubGl2ZUFwcHNTZXJ2aWNlKS5yZXNvbHZlKCkucGlwZShcbiAgICAgIGZsYXRNYXAodmFsdWUgPT4ge1xuICAgICAgICAgIGNvbnN0IHNhbmRib3hJZCA9IHZhbHVlLnByaW1hcnlQcm9kdWN0aW9uU2FuZGJveC5pZDtcbiAgICAgICAgICBnZW5lcmFsQ29uZmlnUmVzb2x2ZXIuc2V0U2FuZGJveChOdW1iZXIoc2FuZGJveElkKSk7XG4gICAgICAgICAgbGl2ZUFwcHNDb25maWdSZXNvbHZlci5zZXRTYW5kYm94KE51bWJlcihzYW5kYm94SWQpKTtcblxuICAgICAgICAgIGNvbnN0IGdlbmVyYWxDb25maWckID0gZ2VuZXJhbENvbmZpZ1Jlc29sdmVyLnJlc29sdmUoKTtcbiAgICAgICAgICBjb25zdCBsaXZlQXBwc0NvbmZpZyQgPSBsaXZlQXBwc0NvbmZpZ1Jlc29sdmVyLnJlc29sdmUocm91dGVTbmFwc2hvdCk7XG4gICAgICAgICAgY29uc3QgZm9ya0pvaW5BcnJheSA9IFtnZW5lcmFsQ29uZmlnJCwgbGl2ZUFwcHNDb25maWckXTtcbiAgICAgICAgICByZXR1cm4gZm9ya0pvaW4oZm9ya0pvaW5BcnJheSkucGlwZShcbiAgICAgICAgICAgIG1hcChyZXN1bHRBcnIgPT4ge1xuICAgICAgICAgICAgICByZXR1cm4gbmV3IExpdmVBcHBzQ29uZmlnSG9sZGVyKCkuZGVzZXJpYWxpemUoeyBnZW5lcmFsQ29uZmlnOiByZXN1bHRBcnJbMF0sIGxpdmVBcHBzQ29uZmlnOiByZXN1bHRBcnJbMV0gfSk7XG4gICAgICAgICAgICB9KSk7XG4gICAgICAgIH1cbiAgICAgICAgKVxuICAgICk7XG5cbiAgICBjb25zdCByZXNvbHZlUmVzcCQgPSBjbGFpbVJlc29sdmVyJC5waXBlKFxuICAgICAgZmxhdE1hcChsaXZlQXBwc0NvbmZpZ0hvbGRlciA9PiB7XG4gICAgICAgIGNvbnN0IGljb25zRm9sZGVyJCA9IHRoaXMuZG9jdW1lbnRTZXJ2aWNlLmluaXRPcmdGb2xkZXIobGl2ZUFwcHNDb25maWdIb2xkZXIuZ2VuZXJhbENvbmZpZy51aUFwcElkICsgJ19JY29ucycpO1xuICAgICAgICBjb25zdCBkb2NzRm9sZGVyJCA9IHRoaXMuZG9jdW1lbnRTZXJ2aWNlLmluaXRPcmdGb2xkZXIobGl2ZUFwcHNDb25maWdIb2xkZXIuZ2VuZXJhbENvbmZpZy51aUFwcElkICsgJ19Eb2NzJyk7XG4gICAgICAgIGNvbnN0IGZvcmtKb2luQXJyYXkgPSBbaWNvbnNGb2xkZXIkLCBkb2NzRm9sZGVyJF07XG4gICAgICAgIHJldHVybiBmb3JrSm9pbihmb3JrSm9pbkFycmF5KS5waXBlKFxuICAgICAgICAgIG1hcChcbiAgICAgICAgICAgIHJlc3VsdEFyciA9PiB7XG4gICAgICAgICAgICAgIHJldHVybiBsaXZlQXBwc0NvbmZpZ0hvbGRlcjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICApXG4gICAgICAgICk7XG4gICAgICB9KVxuICAgIClcblxuICAgIHJldHVybiByZXNvbHZlUmVzcCQ7XG4gIH1cblxufVxuIl19