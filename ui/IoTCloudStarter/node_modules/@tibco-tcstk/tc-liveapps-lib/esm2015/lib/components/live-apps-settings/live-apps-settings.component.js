/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
import { Component } from '@angular/core';
import { LiveAppsConfig } from '../../models/tc-liveapps-config';
import { ActivatedRoute } from '@angular/router';
import { TcLiveAppsConfigService } from '../../services/tc-live-apps-config.service';
import { LiveAppsComponent } from '../live-apps-component/live-apps-component.component';
import { MatSnackBar } from '@angular/material';
/**
 * Allow Selection of live apps applications (part of config)
 *
 * ![alt-text](../live-apps-settings.png "")
 *
 * \@example <tcla-live-apps-settings></tcla-live-apps-settings>
 */
export class LiveAppsSettingsComponent extends LiveAppsComponent {
    /**
     * @param {?} route
     * @param {?} liveAppsConfigService
     * @param {?} snackBar
     */
    constructor(route, liveAppsConfigService, snackBar) {
        super();
        this.route = route;
        this.liveAppsConfigService = liveAppsConfigService;
        this.snackBar = snackBar;
        this.LIVE_APPS_URL = '/apps/dt-app/index.html#/application-content/';
        this.handleEditLiveAppClick = (/**
         * @return {?}
         */
        () => {
            // window.open(this.LIVE_APPS_URL + applicationId);
            // currently no public API to get the appId version for design time to populate the URL
            window.open(this.LIVE_APPS_URL);
        });
        this.runSaveFunction = (/**
         * @return {?}
         */
        () => {
            /** @type {?} */
            const liveAppsConfig = new LiveAppsConfig().deserialize({
                applicationIds: this.selectedAppIds,
                caseIconsFolderId: this.liveAppsConfig.caseIconsFolderId,
                documentAppId: this.liveAppsConfig.documentAppId,
                collaborationAppId: this.liveAppsConfig.documentAppId
            });
            this.liveAppsConfigService.updateLiveAppsConfig(this.sandboxId, this.generalConfig.uiAppId, liveAppsConfig, this.liveAppsConfig.id).subscribe((/**
             * @param {?} result
             * @return {?}
             */
            result => {
                this.snackBar.open('Live Apps App Selection Configuration settings saved', 'OK', {
                    duration: 3000
                });
            }), (/**
             * @param {?} error
             * @return {?}
             */
            error => {
                this.snackBar.open('Error saving Live Apps App Selection Configuration', 'OK', {
                    duration: 3000
                });
            }));
        });
    }
    /**
     * @protected
     * @return {?}
     */
    getLiveAppsConfigService() {
        return this.liveAppsConfigService;
    }
    /**
     * @param {?} appIds
     * @return {?}
     */
    handleAppIdSelection(appIds) {
        console.log('Selected: ', appIds);
        this.selectedAppIds = appIds;
    }
    /**
     * @return {?}
     */
    ngOnInit() {
        this.generalConfig = this.route.snapshot.data.laConfigHolder.generalConfig;
        this.liveAppsConfig = this.route.snapshot.data.laConfigHolder.liveAppsConfig;
        this.claims = this.route.snapshot.data.claims;
        this.sandboxId = Number(this.claims.primaryProductionSandbox.id).valueOf();
        this.selectedAppIds = this.liveAppsConfig.applicationIds;
    }
}
LiveAppsSettingsComponent.decorators = [
    { type: Component, args: [{
                selector: 'tcla-live-apps-settings',
                template: "<div fxLayout=\"column\" class=\"tcs-live-apps-settings-pane\" fxFill>\n  <tc-tibco-cloud-widget-header style=\"height: 40px;\" [icon]=\"'tcs-capabilities'\" [headerText]=\"'Live Apps App Selection Configuration'\">\n</tc-tibco-cloud-widget-header>\n  <div fxFlex style=\"padding: 20px; height: 100%\" fxLayout=\"column\" fxFill>\n    <div fxLayout=\"row\" fxLayoutAlign=\"start start\" fxLayoutGap=\"5px\" style=\"height: 20px\">\n      <p>Choose the TIBCO Cloud Live Apps Applications to be used within this application:</p>\n      <mat-icon class=\"tcs-designer-link\" [svgIcon]=\"'tcs-application-edit'\" (click)=\"handleEditLiveAppClick()\" matTooltip=\"Open Live Apps Designer\" matTooltipShowDelay=\"1000\" matTooltipPosition=\"below\"></mat-icon>\n    </div>\n    <tcla-live-apps-application-list class=\"tcs-app-selection-list-widget\" fxFlex=\"grow\" [sandboxId]=\"sandboxId\" [selectedAppIds]=\"selectedAppIds\" (appIdsSelected)=\"handleAppIdSelection($event)\"></tcla-live-apps-application-list>\n    <div fxFlex class=\"tcs-filler-panel\"></div>\n    <div fxLayout=\"column\" fxLayoutAlign=\"end end\" style=\"min-height: 50px\">\n      <button mat-raised-button color=\"primary\" (click)=\"runSaveFunction()\">Save</button>\n    </div>\n  </div>\n</div>\n",
                styles: [".tcs-designer-link{margin-bottom:10px}.tcs-designer-link:hover{fill:#0081cb;cursor:pointer}.tcs-app-selection-list-widget,.tcs-live-apps-settings-pane{overflow:hidden}"]
            }] }
];
/** @nocollapse */
LiveAppsSettingsComponent.ctorParameters = () => [
    { type: ActivatedRoute },
    { type: TcLiveAppsConfigService },
    { type: MatSnackBar }
];
if (false) {
    /** @type {?} */
    LiveAppsSettingsComponent.prototype.LIVE_APPS_URL;
    /** @type {?} */
    LiveAppsSettingsComponent.prototype.sandboxId;
    /** @type {?} */
    LiveAppsSettingsComponent.prototype.selectedAppIds;
    /** @type {?} */
    LiveAppsSettingsComponent.prototype.liveAppsConfig;
    /** @type {?} */
    LiveAppsSettingsComponent.prototype.generalConfig;
    /** @type {?} */
    LiveAppsSettingsComponent.prototype.claims;
    /** @type {?} */
    LiveAppsSettingsComponent.prototype.handleEditLiveAppClick;
    /** @type {?} */
    LiveAppsSettingsComponent.prototype.runSaveFunction;
    /**
     * @type {?}
     * @protected
     */
    LiveAppsSettingsComponent.prototype.route;
    /**
     * @type {?}
     * @protected
     */
    LiveAppsSettingsComponent.prototype.liveAppsConfigService;
    /**
     * @type {?}
     * @protected
     */
    LiveAppsSettingsComponent.prototype.snackBar;
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibGl2ZS1hcHBzLXNldHRpbmdzLmNvbXBvbmVudC5qcyIsInNvdXJjZVJvb3QiOiJuZzovL0B0aWJjby10Y3N0ay90Yy1saXZlYXBwcy1saWIvIiwic291cmNlcyI6WyJsaWIvY29tcG9uZW50cy9saXZlLWFwcHMtc2V0dGluZ3MvbGl2ZS1hcHBzLXNldHRpbmdzLmNvbXBvbmVudC50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOzs7O0FBQUEsT0FBTyxFQUFDLFNBQVMsRUFBUyxNQUFNLGVBQWUsQ0FBQztBQUNoRCxPQUFPLEVBQUMsY0FBYyxFQUFDLE1BQU0saUNBQWlDLENBQUM7QUFDL0QsT0FBTyxFQUFDLGNBQWMsRUFBQyxNQUFNLGlCQUFpQixDQUFDO0FBRS9DLE9BQU8sRUFBQyx1QkFBdUIsRUFBQyxNQUFNLDRDQUE0QyxDQUFDO0FBQ25GLE9BQU8sRUFBQyxpQkFBaUIsRUFBQyxNQUFNLHNEQUFzRCxDQUFDO0FBQ3ZGLE9BQU8sRUFBRSxXQUFXLEVBQUUsTUFBTSxtQkFBbUIsQ0FBQzs7Ozs7Ozs7QUFlaEQsTUFBTSxPQUFPLHlCQUEwQixTQUFRLGlCQUFpQjs7Ozs7O0lBVTlELFlBQXNCLEtBQXFCLEVBQVkscUJBQThDLEVBQVksUUFBcUI7UUFDcEksS0FBSyxFQUFFLENBQUM7UUFEWSxVQUFLLEdBQUwsS0FBSyxDQUFnQjtRQUFZLDBCQUFxQixHQUFyQixxQkFBcUIsQ0FBeUI7UUFBWSxhQUFRLEdBQVIsUUFBUSxDQUFhO1FBUnRJLGtCQUFhLEdBQUcsK0NBQStDLENBQUM7UUFxQnpELDJCQUFzQjs7O1FBQUcsR0FBRyxFQUFFO1lBQ25DLG1EQUFtRDtZQUNuRCx1RkFBdUY7WUFDdkYsTUFBTSxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsYUFBYSxDQUFDLENBQUM7UUFDbEMsQ0FBQyxFQUFBO1FBVU0sb0JBQWU7OztRQUFHLEdBQVMsRUFBRTs7a0JBQzVCLGNBQWMsR0FBRyxJQUFJLGNBQWMsRUFBRSxDQUFDLFdBQVcsQ0FBQztnQkFDdEQsY0FBYyxFQUFFLElBQUksQ0FBQyxjQUFjO2dCQUNuQyxpQkFBaUIsRUFBRSxJQUFJLENBQUMsY0FBYyxDQUFDLGlCQUFpQjtnQkFDeEQsYUFBYSxFQUFFLElBQUksQ0FBQyxjQUFjLENBQUMsYUFBYTtnQkFDaEQsa0JBQWtCLEVBQUUsSUFBSSxDQUFDLGNBQWMsQ0FBQyxhQUFhO2FBQ3RELENBQUM7WUFDRixJQUFJLENBQUMscUJBQXFCLENBQUMsb0JBQW9CLENBQUMsSUFBSSxDQUFDLFNBQVMsRUFBRSxJQUFJLENBQUMsYUFBYSxDQUFDLE9BQU8sRUFBRSxjQUFjLEVBQUUsSUFBSSxDQUFDLGNBQWMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxTQUFTOzs7O1lBQ3pJLE1BQU0sQ0FBQyxFQUFFO2dCQUNMLElBQUksQ0FBQyxRQUFRLENBQUMsSUFBSSxDQUFDLHNEQUFzRCxFQUFFLElBQUksRUFBRTtvQkFDN0UsUUFBUSxFQUFFLElBQUk7aUJBQ2pCLENBQUMsQ0FBQztZQUNQLENBQUM7Ozs7WUFDRCxLQUFLLENBQUMsRUFBRTtnQkFDSixJQUFJLENBQUMsUUFBUSxDQUFDLElBQUksQ0FBQyxvREFBb0QsRUFBRSxJQUFJLEVBQUU7b0JBQzNFLFFBQVEsRUFBRSxJQUFJO2lCQUNqQixDQUFDLENBQUM7WUFDUCxDQUFDLEVBQ0osQ0FBQztRQUNKLENBQUMsRUFBQTtJQTVDRCxDQUFDOzs7OztJQUVTLHdCQUF3QjtRQUNoQyxPQUFPLElBQUksQ0FBQyxxQkFBcUIsQ0FBQztJQUNwQyxDQUFDOzs7OztJQUVNLG9CQUFvQixDQUFDLE1BQWdCO1FBQzFDLE9BQU8sQ0FBQyxHQUFHLENBQUMsWUFBWSxFQUFFLE1BQU0sQ0FBQyxDQUFDO1FBQ2xDLElBQUksQ0FBQyxjQUFjLEdBQUcsTUFBTSxDQUFDO0lBQy9CLENBQUM7Ozs7SUFRTSxRQUFRO1FBQ2IsSUFBSSxDQUFDLGFBQWEsR0FBRyxJQUFJLENBQUMsS0FBSyxDQUFDLFFBQVEsQ0FBQyxJQUFJLENBQUMsY0FBYyxDQUFDLGFBQWEsQ0FBQztRQUMzRSxJQUFJLENBQUMsY0FBYyxHQUFHLElBQUksQ0FBQyxLQUFLLENBQUMsUUFBUSxDQUFDLElBQUksQ0FBQyxjQUFjLENBQUMsY0FBYyxDQUFDO1FBQzdFLElBQUksQ0FBQyxNQUFNLEdBQUcsSUFBSSxDQUFDLEtBQUssQ0FBQyxRQUFRLENBQUMsSUFBSSxDQUFDLE1BQU0sQ0FBQztRQUM5QyxJQUFJLENBQUMsU0FBUyxHQUFHLE1BQU0sQ0FBQyxJQUFJLENBQUMsTUFBTSxDQUFDLHdCQUF3QixDQUFDLEVBQUUsQ0FBQyxDQUFDLE9BQU8sRUFBRSxDQUFDO1FBQzNFLElBQUksQ0FBQyxjQUFjLEdBQUcsSUFBSSxDQUFDLGNBQWMsQ0FBQyxjQUFjLENBQUM7SUFDM0QsQ0FBQzs7O1lBeENGLFNBQVMsU0FBQztnQkFDVCxRQUFRLEVBQUUseUJBQXlCO2dCQUNuQyxpd0NBQWtEOzthQUVuRDs7OztZQWxCTyxjQUFjO1lBRWQsdUJBQXVCO1lBRXRCLFdBQVc7Ozs7SUFpQmxCLGtEQUFnRTs7SUFFaEUsOENBQXlCOztJQUN6QixtREFBZ0M7O0lBQ2hDLG1EQUFzQzs7SUFDdEMsa0RBQW9DOztJQUNwQywyQ0FBcUI7O0lBZXJCLDJEQUlDOztJQVVELG9EQW1CQzs7Ozs7SUE5Q1csMENBQStCOzs7OztJQUFFLDBEQUF3RDs7Ozs7SUFBRSw2Q0FBK0IiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQge0NvbXBvbmVudCwgT25Jbml0fSBmcm9tICdAYW5ndWxhci9jb3JlJztcbmltcG9ydCB7TGl2ZUFwcHNDb25maWd9IGZyb20gJy4uLy4uL21vZGVscy90Yy1saXZlYXBwcy1jb25maWcnO1xuaW1wb3J0IHtBY3RpdmF0ZWRSb3V0ZX0gZnJvbSAnQGFuZ3VsYXIvcm91dGVyJztcbmltcG9ydCB7R2VuZXJhbENvbmZpZywgQ2xhaW0sIFNhbmRib3h9IGZyb20gJ0B0aWJjby10Y3N0ay90Yy1jb3JlLWxpYic7XG5pbXBvcnQge1RjTGl2ZUFwcHNDb25maWdTZXJ2aWNlfSBmcm9tICcuLi8uLi9zZXJ2aWNlcy90Yy1saXZlLWFwcHMtY29uZmlnLnNlcnZpY2UnO1xuaW1wb3J0IHtMaXZlQXBwc0NvbXBvbmVudH0gZnJvbSAnLi4vbGl2ZS1hcHBzLWNvbXBvbmVudC9saXZlLWFwcHMtY29tcG9uZW50LmNvbXBvbmVudCc7XG5pbXBvcnQgeyBNYXRTbmFja0JhciB9IGZyb20gJ0Bhbmd1bGFyL21hdGVyaWFsJztcblxuXG4vKipcbiAqIEFsbG93IFNlbGVjdGlvbiBvZiBsaXZlIGFwcHMgYXBwbGljYXRpb25zIChwYXJ0IG9mIGNvbmZpZylcbiAqXG4gKiAhW2FsdC10ZXh0XSguLi9saXZlLWFwcHMtc2V0dGluZ3MucG5nIFwiXCIpXG4gKlxuICpAZXhhbXBsZSA8dGNsYS1saXZlLWFwcHMtc2V0dGluZ3M+PC90Y2xhLWxpdmUtYXBwcy1zZXR0aW5ncz5cbiAqL1xuQENvbXBvbmVudCh7XG4gIHNlbGVjdG9yOiAndGNsYS1saXZlLWFwcHMtc2V0dGluZ3MnLFxuICB0ZW1wbGF0ZVVybDogJy4vbGl2ZS1hcHBzLXNldHRpbmdzLmNvbXBvbmVudC5odG1sJyxcbiAgc3R5bGVVcmxzOiBbJy4vbGl2ZS1hcHBzLXNldHRpbmdzLmNvbXBvbmVudC5jc3MnXVxufSlcbmV4cG9ydCBjbGFzcyBMaXZlQXBwc1NldHRpbmdzQ29tcG9uZW50IGV4dGVuZHMgTGl2ZUFwcHNDb21wb25lbnQgaW1wbGVtZW50cyBPbkluaXQge1xuXG4gIExJVkVfQVBQU19VUkwgPSAnL2FwcHMvZHQtYXBwL2luZGV4Lmh0bWwjL2FwcGxpY2F0aW9uLWNvbnRlbnQvJztcblxuICBwdWJsaWMgc2FuZGJveElkOiBudW1iZXI7XG4gIHB1YmxpYyBzZWxlY3RlZEFwcElkczogc3RyaW5nW107XG4gIHB1YmxpYyBsaXZlQXBwc0NvbmZpZzogTGl2ZUFwcHNDb25maWc7XG4gIHB1YmxpYyBnZW5lcmFsQ29uZmlnOiBHZW5lcmFsQ29uZmlnO1xuICBwdWJsaWMgY2xhaW1zOiBDbGFpbTtcblxuICBjb25zdHJ1Y3Rvcihwcm90ZWN0ZWQgcm91dGU6IEFjdGl2YXRlZFJvdXRlLCBwcm90ZWN0ZWQgbGl2ZUFwcHNDb25maWdTZXJ2aWNlOiBUY0xpdmVBcHBzQ29uZmlnU2VydmljZSwgcHJvdGVjdGVkIHNuYWNrQmFyOiBNYXRTbmFja0Jhcikge1xuICAgIHN1cGVyKCk7XG4gIH1cblxuICBwcm90ZWN0ZWQgZ2V0TGl2ZUFwcHNDb25maWdTZXJ2aWNlKCk6IFRjTGl2ZUFwcHNDb25maWdTZXJ2aWNlIHtcbiAgICByZXR1cm4gdGhpcy5saXZlQXBwc0NvbmZpZ1NlcnZpY2U7XG4gIH1cblxuICBwdWJsaWMgaGFuZGxlQXBwSWRTZWxlY3Rpb24oYXBwSWRzOiBzdHJpbmdbXSkge1xuICAgIGNvbnNvbGUubG9nKCdTZWxlY3RlZDogJywgYXBwSWRzKTtcbiAgICB0aGlzLnNlbGVjdGVkQXBwSWRzID0gYXBwSWRzO1xuICB9XG5cbiAgcHVibGljIGhhbmRsZUVkaXRMaXZlQXBwQ2xpY2sgPSAoKSA9PiB7XG4gICAgLy8gd2luZG93Lm9wZW4odGhpcy5MSVZFX0FQUFNfVVJMICsgYXBwbGljYXRpb25JZCk7XG4gICAgLy8gY3VycmVudGx5IG5vIHB1YmxpYyBBUEkgdG8gZ2V0IHRoZSBhcHBJZCB2ZXJzaW9uIGZvciBkZXNpZ24gdGltZSB0byBwb3B1bGF0ZSB0aGUgVVJMXG4gICAgd2luZG93Lm9wZW4odGhpcy5MSVZFX0FQUFNfVVJMKTtcbiAgfVxuXG4gIHB1YmxpYyBuZ09uSW5pdCgpIHtcbiAgICB0aGlzLmdlbmVyYWxDb25maWcgPSB0aGlzLnJvdXRlLnNuYXBzaG90LmRhdGEubGFDb25maWdIb2xkZXIuZ2VuZXJhbENvbmZpZztcbiAgICB0aGlzLmxpdmVBcHBzQ29uZmlnID0gdGhpcy5yb3V0ZS5zbmFwc2hvdC5kYXRhLmxhQ29uZmlnSG9sZGVyLmxpdmVBcHBzQ29uZmlnO1xuICAgIHRoaXMuY2xhaW1zID0gdGhpcy5yb3V0ZS5zbmFwc2hvdC5kYXRhLmNsYWltcztcbiAgICB0aGlzLnNhbmRib3hJZCA9IE51bWJlcih0aGlzLmNsYWltcy5wcmltYXJ5UHJvZHVjdGlvblNhbmRib3guaWQpLnZhbHVlT2YoKTtcbiAgICB0aGlzLnNlbGVjdGVkQXBwSWRzID0gdGhpcy5saXZlQXBwc0NvbmZpZy5hcHBsaWNhdGlvbklkcztcbiAgfVxuXG4gIHB1YmxpYyBydW5TYXZlRnVuY3Rpb24gPSAoKTogdm9pZCA9PiB7XG4gICAgY29uc3QgbGl2ZUFwcHNDb25maWcgPSBuZXcgTGl2ZUFwcHNDb25maWcoKS5kZXNlcmlhbGl6ZSh7XG4gICAgICBhcHBsaWNhdGlvbklkczogdGhpcy5zZWxlY3RlZEFwcElkcyxcbiAgICAgIGNhc2VJY29uc0ZvbGRlcklkOiB0aGlzLmxpdmVBcHBzQ29uZmlnLmNhc2VJY29uc0ZvbGRlcklkLFxuICAgICAgZG9jdW1lbnRBcHBJZDogdGhpcy5saXZlQXBwc0NvbmZpZy5kb2N1bWVudEFwcElkLFxuICAgICAgY29sbGFib3JhdGlvbkFwcElkOiB0aGlzLmxpdmVBcHBzQ29uZmlnLmRvY3VtZW50QXBwSWRcbiAgICB9KTtcbiAgICB0aGlzLmxpdmVBcHBzQ29uZmlnU2VydmljZS51cGRhdGVMaXZlQXBwc0NvbmZpZyh0aGlzLnNhbmRib3hJZCwgdGhpcy5nZW5lcmFsQ29uZmlnLnVpQXBwSWQsIGxpdmVBcHBzQ29uZmlnLCB0aGlzLmxpdmVBcHBzQ29uZmlnLmlkKS5zdWJzY3JpYmUoXG4gICAgICAgIHJlc3VsdCA9PiB7XG4gICAgICAgICAgICB0aGlzLnNuYWNrQmFyLm9wZW4oJ0xpdmUgQXBwcyBBcHAgU2VsZWN0aW9uIENvbmZpZ3VyYXRpb24gc2V0dGluZ3Mgc2F2ZWQnLCAnT0snLCB7XG4gICAgICAgICAgICAgICAgZHVyYXRpb246IDMwMDBcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9LFxuICAgICAgICBlcnJvciA9PiB7XG4gICAgICAgICAgICB0aGlzLnNuYWNrQmFyLm9wZW4oJ0Vycm9yIHNhdmluZyBMaXZlIEFwcHMgQXBwIFNlbGVjdGlvbiBDb25maWd1cmF0aW9uJywgJ09LJywge1xuICAgICAgICAgICAgICAgIGR1cmF0aW9uOiAzMDAwXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICk7XG4gIH1cbn1cblxuIl19