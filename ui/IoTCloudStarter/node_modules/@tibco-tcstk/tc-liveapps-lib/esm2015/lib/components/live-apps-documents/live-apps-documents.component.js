/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
import { Component, EventEmitter, Inject, Input, Output } from '@angular/core';
import { LiveAppsService } from '../../services/live-apps.service';
import { map, take, takeUntil } from 'rxjs/operators';
import { DocumentAction } from '../../models/tc-document';
import { MAT_DIALOG_DATA, MatDialog, MatDialogRef } from '@angular/material';
import { LiveAppsComponent } from '../live-apps-component/live-apps-component.component';
import { TcDocumentService } from '../../services/tc-document.service';
import { HttpEventType } from '@angular/common/http';
/**
 * Document List and upload Component
 *
 * This Component allows to list, upload, download, Documents attached to a Case-Instance or a whole Application.
 * In the Upload Dialog the User is able to select a local File and enter a short Description.
 *
 * The Component stores also the following Data
 * - uploading User
 * - Timestamp
 * - File Size
 *
 * Document List<br>
 * ![alt-text](../live-apps-documents.png "Documents Component Image")
 * Document Upload Dialog <br>
 * ![alt-text](../Docs-Upload.png "Documents Component Image")
 *
 * \@example <tcla-live-apps-documents></tcla-live-apps-documents>
 */
export class LiveAppsDocumentsComponent extends LiveAppsComponent {
    /**
     * @param {?} liveapps
     * @param {?} documentsService
     * @param {?} dialog
     */
    constructor(liveapps, documentsService, dialog) {
        super();
        this.liveapps = liveapps;
        this.documentsService = documentsService;
        this.dialog = dialog;
        /**
         * Whether to show the header bar in the widget - eg. favorites on home page (contains icon etc) - if off icons still appear without bar
         */
        this.showHeader = this.showHeader ? this.showHeader : true;
        /**
         * Custom Document Action Event: fired when a custom action is clicked for a document (outputs the action name and a document (DocumentAction))
         */
        this.customActionClicked = new EventEmitter();
        this.fileToUpload = undefined;
        this.refresh = (/**
         * @return {?}
         */
        () => {
            this.listDocuments();
        });
        this.customActionClick = (/**
         * @param {?} action
         * @param {?} document
         * @return {?}
         */
        (action, document) => {
            this.customActionClicked.emit(new DocumentAction().deserialize({
                action,
                document
            }));
        });
        this.listDocuments = (/**
         * @return {?}
         */
        () => {
            this.documentsService.listDocuments(this.folderType, this.folderId, this.sandboxId, this.filter)
                .pipe(take(1), takeUntil(this._destroyed$), map((/**
             * @param {?} documentslist
             * @return {?}
             */
            documentslist => {
                this.documents = documentslist.documents;
            })))
                .subscribe(null, (/**
             * @param {?} error
             * @return {?}
             */
            error => { this.errorMessage = 'Error retrieving case states: ' + error.error.errorMsg; }));
        });
        this.uploadDocument = (/**
         * @param {?} doc
         * @return {?}
         */
        (doc) => {
        });
        this.removeDocument = (/**
         * @param {?} doc
         * @return {?}
         */
        (doc) => {
            this.documentsService.deleteDocument(this.folderType, this.folderId, doc.name, this.sandboxId)
                .pipe(take(1), takeUntil(this._destroyed$), map((/**
             * @param {?} val
             * @return {?}
             */
            val => {
                console.log(val);
                this.refresh();
            })))
                .subscribe(null, (/**
             * @param {?} error
             * @return {?}
             */
            error => { this.errorMessage = 'Error removing document: ' + error.errorMsg; }));
        });
        this.viewDocument = (/**
         * @param {?} doc
         * @return {?}
         */
        (doc) => {
            /** @type {?} */
            const viewDocDialogRef = this.dialog.open(LiveAppsDocumentViewerDialogComponent, {
                width: '75%',
                height: '75%',
                data: {
                    doc: doc,
                    folderType: this.folderType,
                    folderId: this.folderId,
                    sandboxId: this.sandboxId
                }
            });
            viewDocDialogRef.afterClosed().subscribe((/**
             * @param {?} result
             * @return {?}
             */
            result => {
            }));
        });
        this.downloadDocument = (/**
         * @param {?} doc
         * @return {?}
         */
        (doc) => {
            this.documentsService.downloadDocument(this.folderType, this.folderId, doc.name, doc.artifactVersion, this.sandboxId)
                .pipe(take(1), takeUntil(this._destroyed$), map((/**
             * @param {?} data
             * @return {?}
             */
            data => {
                // todo: check if this works on all browsers
                /** @type {?} */
                const downloadURL = window.URL.createObjectURL(data);
                /** @type {?} */
                const link = document.createElement('a');
                link.href = downloadURL;
                link.download = doc.name;
                link.click();
            })))
                .subscribe(null, (/**
             * @param {?} error
             * @return {?}
             */
            error => { this.errorMessage = 'Error downloading document: ' + error.errorMsg; }));
        });
    }
    /**
     * @param {?} files
     * @return {?}
     */
    attachFile(files) {
        this.uploadMessage = '';
        this.fileToUpload = files.item(0);
    }
    /**
     * @param {?} description
     * @return {?}
     */
    setFileDescription(description) {
        this.fileDescription = description;
    }
    /**
     * @param {?} fileToUpload
     * @param {?} description
     * @return {?}
     */
    uploadFile(fileToUpload, description) {
        this.fileToUpload = fileToUpload;
        this.uploadMessage = 'Uploading: ' + fileToUpload.name;
        this.fileDescription = description;
        this.uploadProgress = 0;
        if (this.fileToUpload) {
            this.documentsService.uploadDocument(this.folderType, this.folderId, this.sandboxId, this.fileToUpload, this.fileToUpload.name, this.fileDescription)
                .subscribe((/**
             * @param {?} response
             * @return {?}
             */
            (response) => {
                if (response.type === HttpEventType.UploadProgress) {
                    this.uploadProgress = Math.round(100 * response.loaded / response.total);
                }
                if (this.uploadProgress === 100) {
                    this.fileToUpload = undefined;
                    this.uploadMessage = 'Uploaded: ' + fileToUpload.name;
                    // api seems not to show new documents straight away sometimes - so this minimizes the chances of that if file > 1mb
                    if (fileToUpload.size > 1000000) {
                        setTimeout((/**
                         * @return {?}
                         */
                        () => { this.refresh(); }), 2000);
                    }
                    else {
                        this.refresh();
                    }
                    setTimeout((/**
                     * @return {?}
                     */
                    () => { this.uploadMessage = ''; this.uploadProgress = undefined; }), 5000);
                }
            }), (/**
             * @param {?} error
             * @return {?}
             */
            error => { console.log('error'); this.errorMessage = 'Error uploading document: ' + error.errorMsg; }));
        }
    }
    /**
     * @return {?}
     */
    openDialog() {
        // only allow if upload not in progress
        if (!this.uploadProgress || this.uploadProgress === 100) {
            /** @type {?} */
            const dialogRef = this.dialog.open(LiveAppsDocumentUploadDialogComponent, {
                width: '500px',
                data: {}
            });
            dialogRef.componentInstance.fileevent.subscribe((/**
             * @param {?} $e
             * @return {?}
             */
            ($e) => {
                this.uploadFile($e.file, $e.description);
            }));
            dialogRef.afterClosed().subscribe((/**
             * @param {?} result
             * @return {?}
             */
            result => {
            }));
        }
    }
    /**
     * @return {?}
     */
    ngOnInit() {
        this.refresh();
    }
}
LiveAppsDocumentsComponent.decorators = [
    { type: Component, args: [{
                selector: 'tcla-live-apps-documents',
                template: "<div class=\"tcs-documents-pane\" fxFill fxLayout=\"column\">\n  <div *ngIf=\"showHeader\" class=\"tcs-documents-header\" fxLayout=\"row\" fxLayoutAlign=\"space-between center\">\n    <div fxLayoutAlign=\"start center\">\n      <mat-icon class=\"tcs-icon tcs-icon-active tcs-collaboration-feed\" svgIcon=\"tcs-document-library\"></mat-icon>\n      <div class=\"tcs-documents-header-text\">{{folderDescription ? folderDescription : 'Documents'}}</div>\n    </div>\n    <mat-icon (click)=\"openDialog()\" [ngClass]=\"{'tcs-icon-disabled' : uploadProgress < 100}\" class=\"tcs-icon tcs-icon-active tcs-document-edit-buttons tcs-document-upload-icon\" [matTooltip]=\"(uploadProgress && uploadProgress !== 100) ? 'Please wait for existing document to upload' : 'Upload Document'\" matTooltipPosition=\"left\" matTooltipShowDelay=\"1000\" svgIcon=\"tcs-document-upload\"></mat-icon>\n  </div>\n  <div *ngIf=\"!showHeader\" fxLayout=\"row\" fxLayoutAlign=\"end center\">\n    <mat-icon style=\"margin: 5px\" [ngClass]=\"{'tcs-icon-disabled' : uploadProgress < 100}\" (click)=\"openDialog()\" class=\"tcs-icon tcs-icon-active tcs-document-edit-buttons tcs-document-upload-icon\" [matTooltip]=\"(uploadProgress && uploadProgress !== 100) ? 'Please wait for existing document to upload' : 'Upload Document'\" matTooltipPosition=\"left\" matTooltipShowDelay=\"1000\" svgIcon=\"tcs-document-upload\"></mat-icon>\n  </div>\n  <div fxLayout=\"column\" fxFlex style=\"overflow: auto\">\n    <div *ngIf=\"uploadProgress\">\n      <div>{{uploadMessage}}</div>\n      <mat-progress-bar\n        mode=\"determinate\"\n        [value]=\"uploadProgress\"\n      >\n      </mat-progress-bar>\n    </div>\n    <div class=\"tcs-document-list\" fxLayout=\"column\">\n      <div *ngIf=\"documents && documents.length > 0\">\n        <div class=\"tcs-document-detail-box tcs-document\" *ngFor=\"let document of documents | orderByDate: 'lastModifiedDate'\" fxLayout=\"column\">\n          <div class=\"tcs-document-box\" fxLayoutAlign=\"space-between center\" fxLayout=\"row\" fxFlex>\n            <div fxLayoutAlign=\"start center\">\n              <mat-icon class=\"tcs-icon tcs-icon-active tcs-document-type-icon\" svgIcon=\"tcs-document-{{document.fileIcon}}\"></mat-icon>\n            </div>\n            <div class=\"tcs-document-details-text-box\" fxLayout=\"column\" fxLayoutAlign=\"center start\" fxFlex>\n                <div fxLayout=\"row\" fxLayoutAlign=\"start center\" fxFill>\n                  <div class=\"tcs-document-name-text\" matTooltip=\"{{document.name}}\" matTooltipShowDelay=\"1000\" matTooltipPosition=\"below\">{{document.name | ellipsis: 30}}</div>\n                  <div fxLayout=\"row\" fxLayoutAlign=\"end center\" fxFlex>\n                    <div class=\"tcs-document-filesize-text\">&nbsp;({{document.fileSize}})</div>\n                  </div>\n                </div>\n                <div class=\"tcs-document-comment-text\" matTooltip=\"{{document.description}}\" matTooltipShowDelay=\"1000\" matTooltipPosition=\"below\">{{document.description | ellipsis: 50}}</div>\n              <div fxLayout=\"row\" fxLayoutAlign=\"start center\">\n                <div class=\"tcs-document-modified-text\">{{document.lastModifiedDate | durationSince}}</div>\n                <div *ngIf=\"document.lastModifiedByDetails\" class=\"tcs-document-modified-text\" matTooltip=\"{{document.lastModifiedByDetails.username}}\" matTooltipShowDelay=\"1000\" matTooltipPosition=\"below\">&nbsp;by {{document.lastModifiedByDetails.username | ellipsis: 40}}</div>\n              </div>\n            </div>\n\n            <div fxLayoutAlign=\"end center\">\n              <mat-icon [matMenuTriggerFor]=\"docActionMenu\" class=\"tcs-icon tcs-icon-active tcs-document-action-icon\" svgIcon=\"tcs-document-action\"></mat-icon>\n              <mat-menu #docActionMenu=\"matMenu\" class=\"tcs-icon tcs-icon-active tcs-document-action-icon\">\n                <button class=\"tcs-document-action-text\" mat-menu-item (click)=\"viewDocument(document)\">View</button>\n                <button class=\"tcs-document-action-text\" mat-menu-item (click)=\"downloadDocument(document)\">Download</button>\n                <button class=\"tcs-document-action-text\" mat-menu-item (click)=\"removeDocument(document)\">Delete</button>\n                <button *ngFor=\"let customAction of customActions\" class=\"tcs-document-action-text\" mat-menu-item (click)=\"customActionClick(customAction, document)\">{{customAction}}</button>\n              </mat-menu>\n\n\n            </div>\n          </div>\n          <div class=\"tcs-document-line\"></div>\n        </div>\n      </div>\n      <div *ngIf=\"!(documents?.length > 0)\" fxLayout=\"row\" fxLayoutAlign=\"center start\" fxLayoutGap=\"10px\" style=\"margin-top: 20px;\">\n        <mat-icon [svgIcon]=\"'ic-no-docs-icon'\" style=\"height: 48px; width: 48px;\"></mat-icon>\n        <div style=\"height: 100%\" fxLayoutAlign=\"start center\">\n          <span class=\"tcs-no-item-text\">No documents found</span>\n        </div>\n      </div>\n    </div>\n  </div>\n</div>\n\n",
                styles: [".tcs-hidden-input{display:none}.tcs-small-pane{width:400px;max-width:400px;height:386px;max-height:400px;border-radius:3px;box-shadow:0 2px 4px 0 rgba(0,0,0,.33);background-color:#fff;margin:0;padding:0}.tcs-documents-pane{border-radius:3px;box-shadow:0 2px 4px 0 rgba(0,0,0,.33);background-color:#fff}.tcs-documents-header{height:40px;border-radius:3px 3px 0 0;box-shadow:0 1px 2px 0 #dedede;padding-left:20px;padding-right:20px}.tcs-documents-header-text{margin-left:10px;font-family:Source Sans Pro;font-size:18px;font-weight:600;font-style:normal;font-stretch:normal;line-height:1.5;letter-spacing:.3px}.tcs-document-name-text{font-family:Source Sans Pro;font-size:16px;font-weight:600;font-style:normal;font-stretch:normal;line-height:normal;letter-spacing:normal;color:#0081cb}.tcs-document-comment-text{font-family:Source Sans Pro;font-size:12px;font-weight:400;font-style:normal;font-stretch:normal;line-height:normal;letter-spacing:normal;color:#727272}.tcs-document-filesize-text,.tcs-document-modified-text{font-family:Source Sans Pro;font-size:10px;font-weight:600;font-style:normal;font-stretch:normal;line-height:normal;letter-spacing:-.1px;color:#b6b6b6}.tcs-document-details-text-box{padding:2px 10px}:host ::ng-deep .tcs-icon-disabled.tcs-icon.tcs-document-edit-buttons path.svg-content{fill:#b6b6b6}:host ::ng-deep .tcs-icon-disabled.tcs-icon.tcs-document-edit-buttons:hover path.svg-content{fill:#b6b6b6;cursor:not-allowed}:host ::ng-deep .tcs-icon.tcs-document-edit-buttons:hover path.svg-content{fill:#0081cb;cursor:pointer}:host ::ng-deep .tcs-icon.tcs-document-edit-icon:hover path.svg-content{fill:#0081cb;cursor:pointer}.tcs-document-detail-box{min-height:85px;flex-shrink:0;padding-left:20px;padding-right:20px}.tcs-document-detail-box:hover{background-color:#eef0f7;-webkit-transition:background-color .5s;transition:background-color .5s}.tcs-document-line{padding:0;margin:0 20px;border-bottom:1.1px solid #f4f4f4}.tcs-document-list{overflow-y:auto}.tcs-no-item-text{font-family:Source Sans Pro;font-size:16px;font-weight:400;font-style:normal;font-stretch:normal;line-height:normal;letter-spacing:normal;color:#b6b6b6}"]
            }] }
];
/** @nocollapse */
LiveAppsDocumentsComponent.ctorParameters = () => [
    { type: LiveAppsService },
    { type: TcDocumentService },
    { type: MatDialog }
];
LiveAppsDocumentsComponent.propDecorators = {
    sandboxId: [{ type: Input }],
    folderType: [{ type: Input }],
    folderId: [{ type: Input }],
    filter: [{ type: Input }],
    folderDescription: [{ type: Input }],
    showHeader: [{ type: Input }],
    customActions: [{ type: Input }],
    customActionClicked: [{ type: Output }]
};
if (false) {
    /**
     * sandboxId - this comes from claims resolver
     * @type {?}
     */
    LiveAppsDocumentsComponent.prototype.sandboxId;
    /**
     * orgFolders' or 'caseFolders' - different API calls made according to which one this is
     * @type {?}
     */
    LiveAppsDocumentsComponent.prototype.folderType;
    /**
     * The organisation folder to store/retrieve documents
     * @type {?}
     */
    LiveAppsDocumentsComponent.prototype.folderId;
    /**
     * NOT used but would allow a search filter on documents
     * @type {?}
     */
    LiveAppsDocumentsComponent.prototype.filter;
    /**
     * header text on component (defaults to documents)
     * @type {?}
     */
    LiveAppsDocumentsComponent.prototype.folderDescription;
    /**
     * Whether to show the header bar in the widget - eg. favorites on home page (contains icon etc) - if off icons still appear without bar
     * @type {?}
     */
    LiveAppsDocumentsComponent.prototype.showHeader;
    /**
     * Custom Document Buttons (array of text)
     * @type {?}
     */
    LiveAppsDocumentsComponent.prototype.customActions;
    /**
     * Custom Document Action Event: fired when a custom action is clicked for a document (outputs the action name and a document (DocumentAction))
     * @type {?}
     */
    LiveAppsDocumentsComponent.prototype.customActionClicked;
    /** @type {?} */
    LiveAppsDocumentsComponent.prototype.errorMessage;
    /** @type {?} */
    LiveAppsDocumentsComponent.prototype.documents;
    /** @type {?} */
    LiveAppsDocumentsComponent.prototype.fileToUpload;
    /** @type {?} */
    LiveAppsDocumentsComponent.prototype.fileDescription;
    /** @type {?} */
    LiveAppsDocumentsComponent.prototype.uploadMessage;
    /** @type {?} */
    LiveAppsDocumentsComponent.prototype.uploadProgress;
    /** @type {?} */
    LiveAppsDocumentsComponent.prototype.refresh;
    /** @type {?} */
    LiveAppsDocumentsComponent.prototype.customActionClick;
    /** @type {?} */
    LiveAppsDocumentsComponent.prototype.listDocuments;
    /** @type {?} */
    LiveAppsDocumentsComponent.prototype.uploadDocument;
    /** @type {?} */
    LiveAppsDocumentsComponent.prototype.removeDocument;
    /** @type {?} */
    LiveAppsDocumentsComponent.prototype.viewDocument;
    /** @type {?} */
    LiveAppsDocumentsComponent.prototype.downloadDocument;
    /**
     * @type {?}
     * @private
     */
    LiveAppsDocumentsComponent.prototype.liveapps;
    /**
     * @type {?}
     * @private
     */
    LiveAppsDocumentsComponent.prototype.documentsService;
    /** @type {?} */
    LiveAppsDocumentsComponent.prototype.dialog;
}
export class LiveAppsDocumentUploadDialogComponent {
    /**
     * @param {?} dialogRef
     */
    constructor(dialogRef) {
        this.dialogRef = dialogRef;
        this.fileevent = new EventEmitter();
        this.fileToUpload = undefined;
        this.description = undefined;
        this.uploadFile = (/**
         * @return {?}
         */
        () => {
            if (this.fileToUpload) {
                this.fileevent.emit({ file: this.fileToUpload, description: this.description });
                this.dialogRef.close();
            }
        });
    }
    /**
     * @param {?} description
     * @return {?}
     */
    setFileDescription(description) {
        this.description = description;
    }
    /**
     * @param {?} files
     * @return {?}
     */
    attachFile(files) {
        // this.uploadMessage = '';
        this.fileToUpload = files.item(0);
    }
    /**
     * @return {?}
     */
    onNoClick() {
        this.dialogRef.close();
    }
}
LiveAppsDocumentUploadDialogComponent.decorators = [
    { type: Component, args: [{
                selector: 'tcla-live-apps-document-upload-dialog',
                template: "<h1 mat-dialog-title>Upload New File</h1>\n<div mat-dialog-content>\n  <form #fileUploadForm=\"ngForm\" fxFlex fxLayout=\"column\">\n    <div fxLayout=\"row\">\n      <button type=\"button\" mat-raised-button (click)=\"fileInput.click()\">Choose File To Upload</button>\n      <div *ngIf=\"fileToUpload\">{{fileToUpload.name}}</div>\n      <!-- below input is hidden and enabled by above button -->\n      <input class=\"tcs-hidden-input\" (change)=\"attachFile($event.target.files)\" #fileInput type=\"file\" id=\"file\">\n    </div>\n    <mat-form-field fxFlex>\n      <input matInput name=\"description\" type=\"text\" placeholder=\"Comments\" [(ngModel)]=\"description\"/>\n    </mat-form-field>\n\n  </form>\n</div>\n<div mat-dialog-actions>\n  <button mat-button (click)=\"uploadFile()\" type=\"submit\" [disabled]=\"!fileToUpload\">Upload</button>\n  <button mat-button (click)=\"onNoClick()\">Cancel</button>\n</div>\n",
                styles: [".tcs-hidden-input{display:none}"]
            }] }
];
/** @nocollapse */
LiveAppsDocumentUploadDialogComponent.ctorParameters = () => [
    { type: MatDialogRef }
];
LiveAppsDocumentUploadDialogComponent.propDecorators = {
    fileevent: [{ type: Output }]
};
if (false) {
    /** @type {?} */
    LiveAppsDocumentUploadDialogComponent.prototype.fileevent;
    /** @type {?} */
    LiveAppsDocumentUploadDialogComponent.prototype.fileToUpload;
    /** @type {?} */
    LiveAppsDocumentUploadDialogComponent.prototype.description;
    /** @type {?} */
    LiveAppsDocumentUploadDialogComponent.prototype.uploadFile;
    /** @type {?} */
    LiveAppsDocumentUploadDialogComponent.prototype.dialogRef;
}
export class LiveAppsDocumentViewerDialogComponent {
    /**
     * @param {?} dialogRef
     * @param {?} data
     */
    constructor(dialogRef, data) {
        this.dialogRef = dialogRef;
        this.data = data;
        this.doc = this.data.doc;
        this.folderType = this.data.folderType;
        this.folderId = this.data.folderId;
        this.sandboxId = this.data.sandboxId;
    }
    /**
     * @return {?}
     */
    onNoClick() {
        this.dialogRef.close();
    }
}
LiveAppsDocumentViewerDialogComponent.decorators = [
    { type: Component, args: [{
                selector: 'tcla-live-apps-document-viewer-dialog',
                template: "<div fxFill fxLayout=\"column\">\n<h1 mat-dialog-title>View Document</h1>\n<div mat-dialog-content fxFlex=\"grow\" style=\"overflow: hidden\">\n  <tcla-live-apps-document-viewer [document]=\"doc\" [folderId]=\"folderId\" [folderType]=\"folderType\" [sandboxId]=\"sandboxId\"></tcla-live-apps-document-viewer>\n</div>\n<div mat-dialog-actions>\n  <button mat-button (click)=\"onNoClick()\">Close</button>\n</div>\n</div>\n",
                styles: [".tcs-hidden-input{display:none}"]
            }] }
];
/** @nocollapse */
LiveAppsDocumentViewerDialogComponent.ctorParameters = () => [
    { type: MatDialogRef },
    { type: undefined, decorators: [{ type: Inject, args: [MAT_DIALOG_DATA,] }] }
];
if (false) {
    /** @type {?} */
    LiveAppsDocumentViewerDialogComponent.prototype.doc;
    /** @type {?} */
    LiveAppsDocumentViewerDialogComponent.prototype.folderType;
    /** @type {?} */
    LiveAppsDocumentViewerDialogComponent.prototype.folderId;
    /** @type {?} */
    LiveAppsDocumentViewerDialogComponent.prototype.sandboxId;
    /** @type {?} */
    LiveAppsDocumentViewerDialogComponent.prototype.dialogRef;
    /** @type {?} */
    LiveAppsDocumentViewerDialogComponent.prototype.data;
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibGl2ZS1hcHBzLWRvY3VtZW50cy5jb21wb25lbnQuanMiLCJzb3VyY2VSb290Ijoibmc6Ly9AdGliY28tdGNzdGsvdGMtbGl2ZWFwcHMtbGliLyIsInNvdXJjZXMiOlsibGliL2NvbXBvbmVudHMvbGl2ZS1hcHBzLWRvY3VtZW50cy9saXZlLWFwcHMtZG9jdW1lbnRzLmNvbXBvbmVudC50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOzs7O0FBQUEsT0FBTyxFQUFDLFNBQVMsRUFBRSxZQUFZLEVBQUUsTUFBTSxFQUFFLEtBQUssRUFBcUIsTUFBTSxFQUFDLE1BQU0sZUFBZSxDQUFDO0FBRWhHLE9BQU8sRUFBQyxlQUFlLEVBQUMsTUFBTSxrQ0FBa0MsQ0FBQztBQUNqRSxPQUFPLEVBQUMsR0FBRyxFQUFFLElBQUksRUFBRSxTQUFTLEVBQUMsTUFBTSxnQkFBZ0IsQ0FBQztBQUNwRCxPQUFPLEVBQXlCLGNBQWMsRUFBQyxNQUFNLDBCQUEwQixDQUFDO0FBQ2hGLE9BQU8sRUFBQyxlQUFlLEVBQUUsU0FBUyxFQUFFLFlBQVksRUFBQyxNQUFNLG1CQUFtQixDQUFDO0FBQzNFLE9BQU8sRUFBQyxpQkFBaUIsRUFBQyxNQUFNLHNEQUFzRCxDQUFDO0FBQ3ZGLE9BQU8sRUFBQyxpQkFBaUIsRUFBQyxNQUFNLG9DQUFvQyxDQUFDO0FBQ3JFLE9BQU8sRUFBQyxhQUFhLEVBQUMsTUFBTSxzQkFBc0IsQ0FBQzs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQTJCbkQsTUFBTSxPQUFPLDBCQUEyQixTQUFRLGlCQUFpQjs7Ozs7O0lBRS9ELFlBQW9CLFFBQXlCLEVBQVUsZ0JBQW1DLEVBQVMsTUFBaUI7UUFDbEgsS0FBSyxFQUFFLENBQUM7UUFEVSxhQUFRLEdBQVIsUUFBUSxDQUFpQjtRQUFVLHFCQUFnQixHQUFoQixnQkFBZ0IsQ0FBbUI7UUFBUyxXQUFNLEdBQU4sTUFBTSxDQUFXOzs7O1FBK0IzRyxlQUFVLEdBQVksSUFBSSxDQUFDLFVBQVUsQ0FBQyxDQUFDLENBQUMsSUFBSSxD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Qix5REFBd0I7O0lBQ3hCLDBEQUF5Qjs7SUFHdkIsMERBQXFFOztJQUNyRSxxREFBeUMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQge0NvbXBvbmVudCwgRXZlbnRFbWl0dGVyLCBJbmplY3QsIElucHV0LCBPbkRlc3Ryb3ksIE9uSW5pdCwgT3V0cHV0fSBmcm9tICdAYW5ndWxhci9jb3JlJztcbmltcG9ydCB7U3ViamVjdH0gZnJvbSAncnhqcyc7XG5pbXBvcnQge0xpdmVBcHBzU2VydmljZX0gZnJvbSAnLi4vLi4vc2VydmljZXMvbGl2ZS1hcHBzLnNlcnZpY2UnO1xuaW1wb3J0IHttYXAsIHRha2UsIHRha2VVbnRpbH0gZnJvbSAncnhqcy9vcGVyYXRvcnMnO1xuaW1wb3J0IHtEb2N1bWVudExpc3QsIERvY3VtZW50LCBEb2N1bWVudEFjdGlvbn0gZnJvbSAnLi4vLi4vbW9kZWxzL3RjLWRvY3VtZW50JztcbmltcG9ydCB7TUFUX0RJQUxPR19EQVRBLCBNYXREaWFsb2csIE1hdERpYWxvZ1JlZn0gZnJvbSAnQGFuZ3VsYXIvbWF0ZXJpYWwnO1xuaW1wb3J0IHtMaXZlQXBwc0NvbXBvbmVudH0gZnJvbSAnLi4vbGl2ZS1hcHBzLWNvbXBvbmVudC9saXZlLWFwcHMtY29tcG9uZW50LmNvbXBvbmVudCc7XG5pbXBvcnQge1RjRG9jdW1lbnRTZXJ2aWNlfSBmcm9tICcuLi8uLi9zZXJ2aWNlcy90Yy1kb2N1bWVudC5zZXJ2aWNlJztcbmltcG9ydCB7SHR0cEV2ZW50VHlwZX0gZnJvbSAnQGFuZ3VsYXIvY29tbW9uL2h0dHAnO1xuXG5cbi8qKlxuICogRG9jdW1lbnQgTGlzdCBhbmQgdXBsb2FkIENvbXBvbmVudFxuICpcbiAqIFRoaXMgQ29tcG9uZW50IGFsbG93cyB0byBsaXN0LCB1cGxvYWQsIGRvd25sb2FkLCBEb2N1bWVudHMgYXR0YWNoZWQgdG8gYSBDYXNlLUluc3RhbmNlIG9yIGEgd2hvbGUgQXBwbGljYXRpb24uXG4gKiBJbiB0aGUgVXBsb2FkIERpYWxvZyB0aGUgVXNlciBpcyBhYmxlIHRvIHNlbGVjdCBhIGxvY2FsIEZpbGUgYW5kIGVudGVyIGEgc2hvcnQgRGVzY3JpcHRpb24uXG4gKlxuICogVGhlIENvbXBvbmVudCBzdG9yZXMgYWxzbyB0aGUgZm9sbG93aW5nIERhdGFcbiAqIC0gdXBsb2FkaW5nIFVzZXJcbiAqIC0gVGltZXN0YW1wXG4gKiAtIEZpbGUgU2l6ZVxuICpcbiAqIERvY3VtZW50IExpc3Q8YnI+XG4gKiAhW2FsdC10ZXh0XSguLi9saXZlLWFwcHMtZG9jdW1lbnRzLnBuZyBcIkRvY3VtZW50cyBDb21wb25lbnQgSW1hZ2VcIilcbiAqIERvY3VtZW50IFVwbG9hZCBEaWFsb2cgPGJyPlxuICogIVthbHQtdGV4dF0oLi4vRG9jcy1VcGxvYWQucG5nIFwiRG9jdW1lbnRzIENvbXBvbmVudCBJbWFnZVwiKVxuICpcbiAqQGV4YW1wbGUgPHRjbGEtbGl2ZS1hcHBzLWRvY3VtZW50cz48L3RjbGEtbGl2ZS1hcHBzLWRvY3VtZW50cz5cbiAqL1xuXG5AQ29tcG9uZW50KHtcbiAgc2VsZWN0b3I6ICd0Y2xhLWxpdmUtYXBwcy1kb2N1bWVudHMnLFxuICB0ZW1wbGF0ZVVybDogJy4vbGl2ZS1hcHBzLWRvY3VtZW50cy5jb21wb25lbnQuaHRtbCcsXG4gIHN0eWxlVXJsczogWycuL2xpdmUtYXBwcy1kb2N1bWVudHMuY29tcG9uZW50LmNzcyddXG59KVxuZXhwb3J0IGNsYXNzIExpdmVBcHBzRG9jdW1lbnRzQ29tcG9uZW50IGV4dGVuZHMgTGl2ZUFwcHNDb21wb25lbnQgaW1wbGVtZW50cyBPbkluaXQge1xuXG4gIGNvbnN0cnVjdG9yKHByaXZhdGUgbGl2ZWFwcHM6IExpdmVBcHBzU2VydmljZSwgcHJpdmF0ZSBkb2N1bWVudHNTZXJ2aWNlOiBUY0RvY3VtZW50U2VydmljZSwgcHVibGljIGRpYWxvZzogTWF0RGlhbG9nKSB7XG4gICAgc3VwZXIoKTtcbiAgfVxuICAvKipcbiAgICogc2FuZGJveElkIC0gdGhpcyBjb21lcyBmcm9tIGNsYWltcyByZXNvbHZlclxuICAgKi9cbiAgQElucHV0KCkgc2FuZGJveElkOiBudW1iZXI7XG5cbiAgLyoqXG4gICAqIG9yZ0ZvbGRlcnMnIG9yICdjYXNlRm9sZGVycycgLSBkaWZmZXJlbnQgQVBJIGNhbGxzIG1hZGUgYWNjb3JkaW5nIHRvIHdoaWNoIG9uZSB0aGlzIGlzXG4gICAqL1xuICBASW5wdXQoKSBmb2xkZXJUeXBlOiBzdHJpbmc7IC8vICdvcmdGb2xkZXJzJyBvciAnY2FzZUZvbGRlcnMnXG5cbiAgLyoqXG4gICAqIFRoZSBvcmdhbmlzYXRpb24gZm9sZGVyIHRvIHN0b3JlL3JldHJpZXZlIGRvY3VtZW50c1xuICAgKi9cbiAgQElucHV0KCkgZm9sZGVySWQ6IHN0cmluZzsgICAvLyBjYXNlUmVmIGZvciBjYXNlRm9sZGVyXG5cbiAgLyoqXG4gICAqIE5PVCB1c2VkIGJ1dCB3b3VsZCBhbGxvdyBhIHNlYXJjaCBmaWx0ZXIgb24gZG9jdW1lbnRzXG4gICAqL1xuICBASW5wdXQoKSBmaWx0ZXI6IHN0cmluZztcblxuICAvKipcbiAgICogaGVhZGVyIHRleHQgb24gY29tcG9uZW50IChkZWZhdWx0cyB0byBkb2N1bWVudHMpXG4gICAqL1xuICBASW5wdXQoKSBmb2xkZXJEZXNjcmlwdGlvbjogc3RyaW5nO1xuXG4gIC8qKlxuICAgKiBXaGV0aGVyIHRvIHNob3cgdGhlIGhlYWRlciBiYXIgaW4gdGhlIHdpZGdldCAtIGVnLiBmYXZvcml0ZXMgb24gaG9tZSBwYWdlIChjb250YWlucyBpY29uIGV0YykgLSBpZiBvZmYgaWNvbnMgc3RpbGwgYXBwZWFyIHdpdGhvdXQgYmFyXG4gICAqL1xuICBASW5wdXQoKSBzaG93SGVhZGVyOiBib29sZWFuID0gdGhpcy5zaG93SGVhZGVyID8gdGhpcy5zaG93SGVhZGVyIDogdHJ1ZTtcblxuICAvKipcbiAgICogQ3VzdG9tIERvY3VtZW50IEJ1dHRvbnMgKGFycmF5IG9mIHRleHQpXG4gICAqL1xuICBASW5wdXQoKSBjdXN0b21BY3Rpb25zOiBzdHJpbmdbXVxuXG4gIC8qKlxuICAgKiBDdXN0b20gRG9jdW1lbnQgQWN0aW9uIEV2ZW50OiBmaXJlZCB3aGVuIGEgY3VzdG9tIGFjdGlvbiBpcyBjbGlja2VkIGZvciBhIGRvY3VtZW50IChvdXRwdXRzIHRoZSBhY3Rpb24gbmFtZSBhbmQgYSBkb2N1bWVudCAoRG9jdW1lbnRBY3Rpb24pKVxuICAgKi9cbiAgQE91dHB1dCgpIGN1c3RvbUFjdGlvbkNsaWNrZWQ6IEV2ZW50RW1pdHRlcjxEb2N1bWVudEFjdGlvbj4gPSBuZXcgRXZlbnRFbWl0dGVyPERvY3VtZW50QWN0aW9uPigpXG5cbiAgcHVibGljIGVycm9yTWVzc2FnZTogc3RyaW5nO1xuICBwdWJsaWMgZG9jdW1lbnRzOiBEb2N1bWVudFtdO1xuICBwdWJsaWMgZmlsZVRvVXBsb2FkOiBGaWxlID0gdW5kZWZpbmVkO1xuICBwdWJsaWMgZmlsZURlc2NyaXB0aW9uOiBzdHJpbmc7XG4gIHVwbG9hZE1lc3NhZ2U6IHN0cmluZztcbiAgcHVibGljIHVwbG9hZFByb2dyZXNzOiBudW1iZXI7XG5cbiAgcHVibGljIHJlZnJlc2ggPSAoKSA9PiB7XG4gICAgdGhpcy5saXN0RG9jdW1lbnRzKCk7XG4gIH1cblxuICBwdWJsaWMgY3VzdG9tQWN0aW9uQ2xpY2sgPSAoYWN0aW9uOiBzdHJpbmcsIGRvY3VtZW50OiBEb2N1bWVudCkgPT4ge1xuICAgIHRoaXMuY3VzdG9tQWN0aW9uQ2xpY2tlZC5lbWl0KG5ldyBEb2N1bWVudEFjdGlvbigpLmRlc2VyaWFsaXplKFxuICAgICAge1xuICAgICAgICBhY3Rpb24sXG4gICAgICAgIGRvY3VtZW50XG4gICAgICB9XG4gICAgKSk7XG4gIH1cblxuICBwdWJsaWMgbGlzdERvY3VtZW50cyA9ICgpID0+IHtcbiAgICB0aGlzLmRvY3VtZW50c1NlcnZpY2UubGlzdERvY3VtZW50cyh0aGlzLmZvbGRlclR5cGUsIHRoaXMuZm9sZGVySWQsIHRoaXMuc2FuZGJveElkLCB0aGlzLmZpbHRlcilcbiAgICAgIC5waXBlKFxuICAgICAgICB0YWtlKDEpLFxuICAgICAgICB0YWtlVW50aWwodGhpcy5fZGVzdHJveWVkJCksXG4gICAgICAgIG1hcChkb2N1bWVudHNsaXN0ID0+IHtcbiAgICAgICAgICB0aGlzLmRvY3VtZW50cyA9IGRvY3VtZW50c2xpc3QuZG9jdW1lbnRzO1xuICAgICAgICB9KVxuICAgICAgKVxuICAgICAgLnN1YnNjcmliZShudWxsLCBlcnJvciA9PiB7IHRoaXMuZXJyb3JNZXNzYWdlID0gJ0Vycm9yIHJldHJpZXZpbmcgY2FzZSBzdGF0ZXM6ICcgKyBlcnJvci5lcnJvci5lcnJvck1zZzsgfSk7XG4gICAgfVxuXG4gIHB1YmxpYyB1cGxvYWREb2N1bWVudCA9IChkb2MpID0+IHtcbiAgfVxuXG4gIHB1YmxpYyByZW1vdmVEb2N1bWVudCA9IChkb2MpID0+IHtcbiAgICB0aGlzLmRvY3VtZW50c1NlcnZpY2UuZGVsZXRlRG9jdW1lbnQodGhpcy5mb2xkZXJUeXBlLCB0aGlzLmZvbGRlcklkLCBkb2MubmFtZSwgdGhpcy5zYW5kYm94SWQpXG4gICAgICAucGlwZShcbiAgICAgICAgdGFrZSgxKSxcbiAgICAgICAgdGFrZVVudGlsKHRoaXMuX2Rlc3Ryb3llZCQpLFxuICAgICAgICBtYXAodmFsID0+IHtcbiAgICAgICAgICBjb25zb2xlLmxvZyh2YWwpO1xuICAgICAgICAgIHRoaXMucmVmcmVzaCgpO1xuICAgICAgICB9KVxuICAgICAgKVxuICAgICAgLnN1YnNjcmliZShcbiAgICAgICAgbnVsbCwgZXJyb3IgPT4geyB0aGlzLmVycm9yTWVzc2FnZSA9ICdFcnJvciByZW1vdmluZyBkb2N1bWVudDogJyArIGVycm9yLmVycm9yTXNnOyB9KTtcbiAgfVxuXG4gIHB1YmxpYyB2aWV3RG9jdW1lbnQgPSAoZG9jKSA9PiB7XG4gICAgY29uc3Qgdmlld0RvY0RpYWxvZ1JlZiA9IHRoaXMuZGlhbG9nLm9wZW4oTGl2ZUFwcHNEb2N1bWVudFZpZXdlckRpYWxvZ0NvbXBvbmVudCwge1xuICAgICAgd2lkdGg6ICc3NSUnLFxuICAgICAgaGVpZ2h0OiAnNzUlJyxcbiAgICAgIGRhdGE6IHtcbiAgICAgICAgZG9jOiBkb2MsXG4gICAgICAgIGZvbGRlclR5cGU6IHRoaXMuZm9sZGVyVHlwZSxcbiAgICAgICAgZm9sZGVySWQ6IHRoaXMuZm9sZGVySWQsXG4gICAgICAgIHNhbmRib3hJZDogdGhpcy5zYW5kYm94SWRcbiAgICAgIH1cbiAgICB9KTtcblxuICAgIHZpZXdEb2NEaWFsb2dSZWYuYWZ0ZXJDbG9zZWQoKS5zdWJzY3JpYmUocmVzdWx0ID0+IHtcbiAgICB9KTtcbiAgfVxuXG4gIHB1YmxpYyBkb3dubG9hZERvY3VtZW50ID0gKGRvYykgPT4ge1xuICAgIHRoaXMuZG9jdW1lbnRzU2VydmljZS5kb3dubG9hZERvY3VtZW50KHRoaXMuZm9sZGVyVHlwZSwgdGhpcy5mb2xkZXJJZCwgZG9jLm5hbWUsIGRvYy5hcnRpZmFjdFZlcnNpb24sIHRoaXMuc2FuZGJveElkKVxuICAgICAgLnBpcGUoXG4gICAgICAgIHRha2UoMSksXG4gICAgICAgIHRha2VVbnRpbCh0aGlzLl9kZXN0cm95ZWQkKSxcbiAgICAgICAgbWFwKGRhdGEgPT4ge1xuICAgICAgICAgIC8vIHRvZG86IGNoZWNrIGlmIHRoaXMgd29ya3Mgb24gYWxsIGJyb3dzZXJzXG4gICAgICAgICAgY29uc3QgZG93bmxvYWRVUkwgPSB3aW5kb3cuVVJMLmNyZWF0ZU9iamVjdFVSTChkYXRhKTtcbiAgICAgICAgICBjb25zdCBsaW5rID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnYScpO1xuICAgICAgICAgIGxpbmsuaHJlZiA9IGRvd25sb2FkVVJMO1xuICAgICAgICAgIGxpbmsuZG93bmxvYWQgPSBkb2MubmFtZTtcbiAgICAgICAgICBsaW5rLmNsaWNrKCk7XG4gICAgICAgIH0pXG4gICAgICApXG4gICAgICAuc3Vic2NyaWJlKFxuICAgICAgICBudWxsLCBlcnJvciA9PiB7IHRoaXMuZXJyb3JNZXNzYWdlID0gJ0Vycm9yIGRvd25sb2FkaW5nIGRvY3VtZW50OiAnICsgZXJyb3IuZXJyb3JNc2c7IH0pO1xuICB9XG5cbiAgYXR0YWNoRmlsZShmaWxlczogRmlsZUxpc3QpIHtcbiAgICB0aGlzLnVwbG9hZE1lc3NhZ2UgPSAnJztcbiAgICB0aGlzLmZpbGVUb1VwbG9hZCA9IGZpbGVzLml0ZW0oMCk7XG4gIH1cblxuICBzZXRGaWxlRGVzY3JpcHRpb24oZGVzY3JpcHRpb246IHN0cmluZykge1xuICAgIHRoaXMuZmlsZURlc2NyaXB0aW9uID0gZGVzY3JpcHRpb247XG4gIH1cblxuICB1cGxvYWRGaWxlKGZpbGVUb1VwbG9hZCwgZGVzY3JpcHRpb24pIHtcbiAgICB0aGlzLmZpbGVUb1VwbG9hZCA9IGZpbGVUb1VwbG9hZDtcbiAgICB0aGlzLnVwbG9hZE1lc3NhZ2UgPSAnVXBsb2FkaW5nOiAnICsgZmlsZVRvVXBsb2FkLm5hbWU7XG4gICAgdGhpcy5maWxlRGVzY3JpcHRpb24gPSBkZXNjcmlwdGlvbjtcbiAgICB0aGlzLnVwbG9hZFByb2dyZXNzID0gMDtcbiAgICBpZiAodGhpcy5maWxlVG9VcGxvYWQpIHtcbiAgICAgIHRoaXMuZG9jdW1lbnRzU2VydmljZS51cGxvYWREb2N1bWVudCh0aGlzLmZvbGRlclR5cGUsIHRoaXMuZm9sZGVySWQsIHRoaXMuc2FuZGJveElkLFxuICAgICAgICB0aGlzLmZpbGVUb1VwbG9hZCwgdGhpcy5maWxlVG9VcGxvYWQubmFtZSwgdGhpcy5maWxlRGVzY3JpcHRpb24pXG4gICAgICAgIC5zdWJzY3JpYmUoXG4gICAgICAgICAgKHJlc3BvbnNlOiBhbnkpID0+IHtcbiAgICAgICAgICAgIGlmIChyZXNwb25zZS50eXBlID09PSBIdHRwRXZlbnRUeXBlLlVwbG9hZFByb2dyZXNzKSB7XG4gICAgICAgICAgICAgIHRoaXMudXBsb2FkUHJvZ3Jlc3MgPSBNYXRoLnJvdW5kKDEwMCAqIHJlc3BvbnNlLmxvYWRlZCAvIHJlc3BvbnNlLnRvdGFsKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICh0aGlzLnVwbG9hZFByb2dyZXNzID09PSAxMDApIHtcbiAgICAgICAgICAgICAgdGhpcy5maWxlVG9VcGxvYWQgPSB1bmRlZmluZWQ7XG4gICAgICAgICAgICAgIHRoaXMudXBsb2FkTWVzc2FnZSA9ICdVcGxvYWRlZDogJyArIGZpbGVUb1VwbG9hZC5uYW1lO1xuICAgICAgICAgICAgICAvLyBhcGkgc2VlbXMgbm90IHRvIHNob3cgbmV3IGRvY3VtZW50cyBzdHJhaWdodCBhd2F5IHNvbWV0aW1lcyAtIHNvIHRoaXMgbWluaW1pemVzIHRoZSBjaGFuY2VzIG9mIHRoYXQgaWYgZmlsZSA+IDFtYlxuICAgICAgICAgICAgICAgaWYgKGZpbGVUb1VwbG9hZC5zaXplID4gMTAwMDAwMCkge1xuICAgICAgICAgICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHsgdGhpcy5yZWZyZXNoKCk7IH0sIDIwMDApO1xuICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgdGhpcy5yZWZyZXNoKCk7XG4gICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHsgdGhpcy51cGxvYWRNZXNzYWdlID0gJyc7IHRoaXMudXBsb2FkUHJvZ3Jlc3MgPSB1bmRlZmluZWQ7IH0sIDUwMDApO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH0sXG4gICAgICAgICAgZXJyb3IgPT4geyBjb25zb2xlLmxvZygnZXJyb3InKTsgdGhpcy5lcnJvck1lc3NhZ2UgPSAnRXJyb3IgdXBsb2FkaW5nIGRvY3VtZW50OiAnICsgZXJyb3IuZXJyb3JNc2c7IH0pO1xuICAgIH1cbiAgfVxuXG4gIG9wZW5EaWFsb2coKTogdm9pZCB7XG4gICAgLy8gb25seSBhbGxvdyBpZiB1cGxvYWQgbm90IGluIHByb2dyZXNzXG4gICAgaWYgKCF0aGlzLnVwbG9hZFByb2dyZXNzIHx8IHRoaXMudXBsb2FkUHJvZ3Jlc3MgPT09IDEwMCkge1xuICAgICAgY29uc3QgZGlhbG9nUmVmID0gdGhpcy5kaWFsb2cub3BlbihMaXZlQXBwc0RvY3VtZW50VXBsb2FkRGlhbG9nQ29tcG9uZW50LCB7XG4gICAgICAgIHdpZHRoOiAnNTAwcHgnLFxuICAgICAgICBkYXRhOiB7fVxuICAgICAgfSk7XG5cbiAgICAgIGRpYWxvZ1JlZi5jb21wb25lbnRJbnN0YW5jZS5maWxlZXZlbnQuc3Vic2NyaWJlKCgkZSkgPT4ge1xuICAgICAgICB0aGlzLnVwbG9hZEZpbGUoJGUuZmlsZSwgJGUuZGVzY3JpcHRpb24pO1xuICAgICAgfSlcblxuICAgICAgZGlhbG9nUmVmLmFmdGVyQ2xvc2VkKCkuc3Vic2NyaWJlKHJlc3VsdCA9PiB7XG4gICAgICB9KTtcbiAgICB9XG4gIH1cblxuICBuZ09uSW5pdCgpIHtcbiAgICB0aGlzLnJlZnJlc2goKTtcbiAgfVxufVxuXG5AQ29tcG9uZW50KHtcbiAgc2VsZWN0b3I6ICd0Y2xhLWxpdmUtYXBwcy1kb2N1bWVudC11cGxvYWQtZGlhbG9nJyxcbiAgdGVtcGxhdGVVcmw6ICdhcHAtbGl2ZS1hcHBzLWRvY3VtZW50LXVwbG9hZC1kaWFsb2cuaHRtbCcsXG4gIHN0eWxlVXJsczogWyAnYXBwLWxpdmUtYXBwcy1kb2N1bWVudC11cGxvYWQtZGlhbG9nLmNzcyddXG59KVxuZXhwb3J0IGNsYXNzIExpdmVBcHBzRG9jdW1lbnRVcGxvYWREaWFsb2dDb21wb25lbnQge1xuXG4gIEBPdXRwdXQoKSBmaWxlZXZlbnQgPSBuZXcgRXZlbnRFbWl0dGVyPGFueT4oKTtcbiAgcHVibGljIGZpbGVUb1VwbG9hZDogRmlsZSA9IHVuZGVmaW5lZDtcbiAgcHVibGljIGRlc2NyaXB0aW9uOiBzdHJpbmcgPSB1bmRlZmluZWQ7XG5cbiAgY29uc3RydWN0b3IoXG4gICAgcHVibGljIGRpYWxvZ1JlZjogTWF0RGlhbG9nUmVmPExpdmVBcHBzRG9jdW1lbnRVcGxvYWREaWFsb2dDb21wb25lbnQ+KSB7fVxuXG5cbiAgcHVibGljIHVwbG9hZEZpbGUgPSAoKSA9PiB7XG4gICAgaWYgKHRoaXMuZmlsZVRvVXBsb2FkKSB7XG4gICAgICB0aGlzLmZpbGVldmVudC5lbWl0KHsgZmlsZTogdGhpcy5maWxlVG9VcGxvYWQsIGRlc2NyaXB0aW9uOiB0aGlzLmRlc2NyaXB0aW9uIH0pO1xuICAgICAgdGhpcy5kaWFsb2dSZWYuY2xvc2UoKTtcbiAgICB9XG4gIH1cblxuICBzZXRGaWxlRGVzY3JpcHRpb24oZGVzY3JpcHRpb246IHN0cmluZykge1xuICAgIHRoaXMuZGVzY3JpcHRpb24gPSBkZXNjcmlwdGlvbjtcbiAgfVxuXG4gIGF0dGFjaEZpbGUoZmlsZXM6IEZpbGVMaXN0KSB7XG4gICAgLy8gdGhpcy51cGxvYWRNZXNzYWdlID0gJyc7XG4gICAgdGhpcy5maWxlVG9VcGxvYWQgPSBmaWxlcy5pdGVtKDApO1xuICB9XG5cbiAgb25Ob0NsaWNrKCk6IHZvaWQge1xuICAgIHRoaXMuZGlhbG9nUmVmLmNsb3NlKCk7XG4gIH1cblxufVxuXG5AQ29tcG9uZW50KHtcbiAgc2VsZWN0b3I6ICd0Y2xhLWxpdmUtYXBwcy1kb2N1bWVudC12aWV3ZXItZGlhbG9nJyxcbiAgdGVtcGxhdGVVcmw6ICdhcHAtbGl2ZS1hcHBzLWRvY3VtZW50LXZpZXdlci1kaWFsb2cuaHRtbCcsXG4gIHN0eWxlVXJsczogWyAnYXBwLWxpdmUtYXBwcy1kb2N1bWVudC12aWV3ZXItZGlhbG9nLmNzcyddXG59KVxuZXhwb3J0IGNsYXNzIExpdmVBcHBzRG9jdW1lbnRWaWV3ZXJEaWFsb2dDb21wb25lbnQge1xuICBwdWJsaWMgZG9jOiBEb2N1bWVudDtcbiAgcHVibGljIGZvbGRlclR5cGU6IHN0cmluZztcbiAgcHVibGljIGZvbGRlcklkOiBzdHJpbmc7XG4gIHB1YmxpYyBzYW5kYm94SWQ6IG51bWJlcjtcblxuICBjb25zdHJ1Y3RvcihcbiAgICBwdWJsaWMgZGlhbG9nUmVmOiBNYXREaWFsb2dSZWY8TGl2ZUFwcHNEb2N1bWVudFVwbG9hZERpYWxvZ0NvbXBvbmVudD4sXG4gICAgQEluamVjdChNQVRfRElBTE9HX0RBVEEpIHB1YmxpYyBkYXRhOiBhbnkpIHtcbiAgICB0aGlzLmRvYyA9IHRoaXMuZGF0YS5kb2M7XG4gICAgdGhpcy5mb2xkZXJUeXBlID0gdGhpcy5kYXRhLmZvbGRlclR5cGU7XG4gICAgdGhpcy5mb2xkZXJJZCA9IHRoaXMuZGF0YS5mb2xkZXJJZDtcbiAgICB0aGlzLnNhbmRib3hJZCA9IHRoaXMuZGF0YS5zYW5kYm94SWQ7XG4gIH1cblxuICBvbk5vQ2xpY2soKTogdm9pZCB7XG4gICAgdGhpcy5kaWFsb2dSZWYuY2xvc2UoKTtcbiAgfVxuXG59XG5cbiJdfQ==