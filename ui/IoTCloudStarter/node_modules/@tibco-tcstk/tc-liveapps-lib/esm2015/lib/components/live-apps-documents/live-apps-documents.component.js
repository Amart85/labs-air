/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
import { Component, EventEmitter, Inject, Input, Output } from '@angular/core';
import { LiveAppsService } from '../../services/live-apps.service';
import { take, takeUntil } from 'rxjs/operators';
import { DocumentAction } from '../../models/tc-document';
import { MAT_DIALOG_DATA, MatDialog, MatDialogRef } from '@angular/material';
import { LiveAppsComponent } from '../live-apps-component/live-apps-component.component';
import { TcDocumentService } from '../../services/tc-document.service';
import { HttpEventType } from '@angular/common/http';
/**
 * Document List and upload Component
 *
 * This Component allows to list, upload, download, Documents attached to a Case-Instance or a whole Application.
 * In the Upload Dialog the User is able to select a local File and enter a short Description.
 *
 * The Component stores also the following Data
 * - uploading User
 * - Timestamp
 * - File Size
 *
 * Document List<br>
 * ![alt-text](../live-apps-documents.png "Documents Component Image")
 * Document Upload Dialog <br>
 * ![alt-text](../Docs-Upload.png "Documents Component Image")
 *
 * \@example <tcla-live-apps-documents></tcla-live-apps-documents>
 */
export class LiveAppsDocumentsComponent extends LiveAppsComponent {
    /**
     * @param {?} liveapps
     * @param {?} documentsService
     * @param {?} dialog
     */
    constructor(liveapps, documentsService, dialog) {
        super();
        this.liveapps = liveapps;
        this.documentsService = documentsService;
        this.dialog = dialog;
        /**
         * Whether to show the header bar in the widget - eg. favorites on home page (contains icon etc) - if off icons still appear without bar
         */
        this.showHeader = this.showHeader ? this.showHeader : true;
        /**
         * Custom Document Action Event: fired when a custom action is clicked for a document (outputs the action name and a document (DocumentAction))
         */
        this.customActionClicked = new EventEmitter();
        this.fileToUpload = undefined;
        this.refresh = (/**
         * @return {?}
         */
        () => {
            this.listDocuments();
        });
        this.customActionClick = (/**
         * @param {?} action
         * @param {?} document
         * @return {?}
         */
        (action, document) => {
            this.customActionClicked.emit(new DocumentAction().deserialize({
                action,
                document
            }));
        });
        this.listDocuments = (/**
         * @return {?}
         */
        () => {
            this.documentsService.listDocuments(this.folderType, this.folderId, this.sandboxId, this.filter)
                .pipe(take(1), takeUntil(this._destroyed$))
                .subscribe((/**
             * @param {?} documentslist
             * @return {?}
             */
            documentslist => {
                this.documents = documentslist.documents;
            }), (/**
             * @param {?} error
             * @return {?}
             */
            error => { this.errorMessage = 'Error retrieving case states: ' + error.error.errorMsg; }));
        });
        this.uploadDocument = (/**
         * @param {?} doc
         * @return {?}
         */
        (doc) => {
        });
        this.removeDocument = (/**
         * @param {?} doc
         * @return {?}
         */
        (doc) => {
            this.documentsService.deleteDocument(this.folderType, this.folderId, doc.name, this.sandboxId)
                .pipe(take(1), takeUntil(this._destroyed$))
                .subscribe((/**
             * @param {?} val
             * @return {?}
             */
            val => {
                console.log(val);
                this.refresh();
            }), (/**
             * @param {?} error
             * @return {?}
             */
            error => { this.errorMessage = 'Error removing document: ' + error.errorMsg; }));
        });
        this.viewDocument = (/**
         * @param {?} doc
         * @return {?}
         */
        (doc) => {
            /** @type {?} */
            const viewDocDialogRef = this.dialog.open(LiveAppsDocumentViewerDialogComponent, {
                width: '75%',
                height: '75%',
                data: {
                    doc: doc,
                    folderType: this.folderType,
                    folderId: this.folderId,
                    sandboxId: this.sandboxId
                }
            });
            viewDocDialogRef.afterClosed().subscribe((/**
             * @param {?} result
             * @return {?}
             */
            result => {
            }));
        });
        this.downloadDocument = (/**
         * @param {?} doc
         * @return {?}
         */
        (doc) => {
            this.documentsService.downloadDocument(this.folderType, this.folderId, doc.name, doc.artifactVersion, this.sandboxId)
                .pipe(take(1), takeUntil(this._destroyed$))
                .subscribe((/**
             * @param {?} data
             * @return {?}
             */
            data => {
                // todo: check if this works on all browsers
                /** @type {?} */
                const downloadURL = window.URL.createObjectURL(data);
                /** @type {?} */
                const link = document.createElement('a');
                link.href = downloadURL;
                link.download = doc.name;
                link.click();
            }), (/**
             * @param {?} error
             * @return {?}
             */
            error => { this.errorMessage = 'Error downloading document: ' + error.errorMsg; }));
        });
    }
    /**
     * @param {?} files
     * @return {?}
     */
    attachFile(files) {
        this.uploadMessage = '';
        this.fileToUpload = files.item(0);
    }
    /**
     * @param {?} description
     * @return {?}
     */
    setFileDescription(description) {
        this.fileDescription = description;
    }
    /**
     * @param {?} fileToUpload
     * @param {?} description
     * @return {?}
     */
    uploadFile(fileToUpload, description) {
        this.fileToUpload = fileToUpload;
        this.uploadMessage = 'Uploading: ' + fileToUpload.name;
        this.fileDescription = description;
        this.uploadProgress = 0;
        if (this.fileToUpload) {
            this.documentsService.uploadDocument(this.folderType, this.folderId, this.sandboxId, this.fileToUpload, this.fileToUpload.name, this.fileDescription)
                .subscribe((/**
             * @param {?} response
             * @return {?}
             */
            (response) => {
                if (response.type === HttpEventType.UploadProgress) {
                    this.uploadProgress = Math.round(100 * response.loaded / response.total);
                    if (this.uploadProgress === 100) {
                        this.fileToUpload = undefined;
                        this.uploadMessage = 'Uploaded: ' + fileToUpload.name;
                        // api seems not to show new documents straight away sometimes - so this minimizes the chances of that if file > 1mb
                        if (fileToUpload.size > 1000000) {
                            setTimeout((/**
                             * @return {?}
                             */
                            () => { this.refresh(); }), 2000);
                        }
                        else {
                            this.refresh();
                        }
                        setTimeout((/**
                         * @return {?}
                         */
                        () => { this.uploadMessage = ''; this.uploadProgress = undefined; }), 5000);
                    }
                }
            }), (/**
             * @param {?} error
             * @return {?}
             */
            error => { console.log('error'); this.errorMessage = 'Error uploading document: ' + error.errorMsg; }));
        }
    }
    /**
     * @return {?}
     */
    openDialog() {
        // only allow if upload not in progress
        if (!this.uploadProgress || this.uploadProgress === 100) {
            /** @type {?} */
            const dialogRef = this.dialog.open(LiveAppsDocumentUploadDialogComponent, {
                width: '500px',
                data: {}
            });
            dialogRef.componentInstance.fileevent.subscribe((/**
             * @param {?} $e
             * @return {?}
             */
            ($e) => {
                this.uploadFile($e.file, $e.description);
            }));
            dialogRef.afterClosed().subscribe((/**
             * @param {?} result
             * @return {?}
             */
            result => {
            }));
        }
    }
    /**
     * @return {?}
     */
    ngOnInit() {
        this.refresh();
    }
}
LiveAppsDocumentsComponent.decorators = [
    { type: Component, args: [{
                selector: 'tcla-live-apps-documents',
                template: "<div class=\"tcs-documents-pane\" fxFill fxLayout=\"column\">\n  <div *ngIf=\"showHeader\" class=\"tcs-documents-header\" fxLayout=\"row\" fxLayoutAlign=\"space-between center\">\n    <div fxLayoutAlign=\"start center\">\n      <mat-icon class=\"tcs-icon tcs-icon-active tcs-collaboration-feed\" svgIcon=\"tcs-document-library\"></mat-icon>\n      <div class=\"tcs-documents-header-text\">{{folderDescription ? folderDescription : 'Documents'}}</div>\n    </div>\n    <mat-icon (click)=\"openDialog()\" [ngClass]=\"{'tcs-icon-disabled' : uploadProgress < 100}\" class=\"tcs-icon tcs-icon-active tcs-document-edit-buttons tcs-document-upload-icon\" [matTooltip]=\"(uploadProgress && uploadProgress !== 100) ? 'Please wait for existing document to upload' : 'Upload Document'\" matTooltipPosition=\"left\" matTooltipShowDelay=\"1000\" svgIcon=\"tcs-document-upload\"></mat-icon>\n  </div>\n  <div *ngIf=\"!showHeader\" fxLayout=\"row\" fxLayoutAlign=\"end center\">\n    <mat-icon style=\"margin: 5px\" [ngClass]=\"{'tcs-icon-disabled' : uploadProgress < 100}\" (click)=\"openDialog()\" class=\"tcs-icon tcs-icon-active tcs-document-edit-buttons tcs-document-upload-icon\" [matTooltip]=\"(uploadProgress && uploadProgress !== 100) ? 'Please wait for existing document to upload' : 'Upload Document'\" matTooltipPosition=\"left\" matTooltipShowDelay=\"1000\" svgIcon=\"tcs-document-upload\"></mat-icon>\n  </div>\n  <div fxLayout=\"column\" style=\"overflow: auto\">\n    <div *ngIf=\"uploadProgress\">\n      <div>{{uploadMessage}}</div>\n      <mat-progress-bar\n        mode=\"determinate\"\n        [value]=\"uploadProgress\"\n      >\n      </mat-progress-bar>\n    </div>\n    <div class=\"tcs-document-list\" fxLayout=\"column\">\n      <div *ngIf=\"documents && documents.length > 0\">\n        <div class=\"tcs-document-detail-box tcs-document\" *ngFor=\"let document of documents | orderByDate: 'lastModifiedDate'\" fxLayout=\"column\">\n          <div class=\"tcs-document-box\" fxLayoutAlign=\"space-between center\" fxLayout=\"row\" fxFlex>\n            <div fxLayoutAlign=\"start center\">\n              <mat-icon class=\"tcs-icon tcs-icon-active tcs-document-type-icon\" svgIcon=\"tcs-document-{{document.fileIcon}}\"></mat-icon>\n            </div>\n            <div class=\"tcs-document-details-text-box\" fxLayout=\"column\" fxLayoutAlign=\"center start\" fxFlex>\n                <div fxLayout=\"row\" fxLayoutAlign=\"start center\" fxFill>\n                  <div class=\"tcs-document-name-text\" matTooltip=\"{{document.name}}\" matTooltipShowDelay=\"1000\" matTooltipPosition=\"below\">{{document.name | ellipsis: 30}}</div>\n                  <div fxLayout=\"row\" fxLayoutAlign=\"end center\" fxFlex>\n                    <div class=\"tcs-document-filesize-text\">&nbsp;({{document.fileSize}})</div>\n                  </div>\n                </div>\n                <div class=\"tcs-document-comment-text\" matTooltip=\"{{document.description}}\" matTooltipShowDelay=\"1000\" matTooltipPosition=\"below\">{{document.description | ellipsis: 50}}</div>\n              <div fxLayout=\"row\" fxLayoutAlign=\"start center\">\n                <div class=\"tcs-document-modified-text\">{{document.lastModifiedDate | durationSince}}</div>\n                <div *ngIf=\"document.lastModifiedByDetails\" class=\"tcs-document-modified-text\" matTooltip=\"{{document.lastModifiedByDetails.username}}\" matTooltipShowDelay=\"1000\" matTooltipPosition=\"below\">&nbsp;by {{document.lastModifiedByDetails.username | ellipsis: 40}}</div>\n              </div>\n            </div>\n\n            <div fxLayoutAlign=\"end center\">\n              <mat-icon [matMenuTriggerFor]=\"docActionMenu\" class=\"tcs-icon tcs-icon-active tcs-document-action-icon\" svgIcon=\"tcs-document-action\"></mat-icon>\n              <mat-menu #docActionMenu=\"matMenu\" class=\"tcs-icon tcs-icon-active tcs-document-action-icon\">\n                <button class=\"tcs-document-action-text\" mat-menu-item (click)=\"viewDocument(document)\">View</button>\n                <button class=\"tcs-document-action-text\" mat-menu-item (click)=\"downloadDocument(document)\">Download</button>\n                <button class=\"tcs-document-action-text\" mat-menu-item (click)=\"removeDocument(document)\">Delete</button>\n                <button *ngFor=\"let customAction of customActions\" class=\"tcs-document-action-text\" mat-menu-item (click)=\"customActionClick(customAction, document)\">{{customAction}}</button>\n              </mat-menu>\n\n\n            </div>\n          </div>\n          <div class=\"tcs-document-line\"></div>\n        </div>\n      </div>\n      <div *ngIf=\"!(documents?.length > 0)\" fxLayout=\"row\" fxLayoutAlign=\"center start\" fxLayoutGap=\"10px\" style=\"margin-top: 20px;\">\n        <mat-icon [svgIcon]=\"'ic-no-docs-icon'\" style=\"height: 48px; width: 48px;\"></mat-icon>\n        <div style=\"height: 100%\" fxLayoutAlign=\"start center\">\n          <span class=\"tcs-no-item-text\">No documents found</span>\n        </div>\n      </div>\n    </div>\n  </div>\n</div>\n\n",
                styles: [".tcs-hidden-input{display:none}.tcs-small-pane{width:400px;max-width:400px;height:386px;max-height:400px;border-radius:3px;box-shadow:0 2px 4px 0 rgba(0,0,0,.33);background-color:#fff;margin:0;padding:0}.tcs-documents-pane{border-radius:3px;box-shadow:0 2px 4px 0 rgba(0,0,0,.33);background-color:#fff}.tcs-documents-header{min-height:40px;height:40px;border-radius:3px 3px 0 0;box-shadow:0 1px 2px 0 #dedede;padding-left:20px;padding-right:20px}.tcs-documents-header-text{margin-left:10px;font-family:Source Sans Pro;font-size:18px;font-weight:600;font-style:normal;font-stretch:normal;line-height:1.5;letter-spacing:.3px}.tcs-document-name-text{font-family:Source Sans Pro;font-size:16px;font-weight:600;font-style:normal;font-stretch:normal;line-height:normal;letter-spacing:normal;color:#0081cb}.tcs-document-comment-text{font-family:Source Sans Pro;font-size:12px;font-weight:400;font-style:normal;font-stretch:normal;line-height:normal;letter-spacing:normal;color:#727272}.tcs-document-filesize-text,.tcs-document-modified-text{font-family:Source Sans Pro;font-size:10px;font-weight:600;font-style:normal;font-stretch:normal;line-height:normal;letter-spacing:-.1px;color:#b6b6b6}.tcs-document-details-text-box{padding:2px 10px}:host ::ng-deep .tcs-icon-disabled.tcs-icon.tcs-document-edit-buttons path.svg-content{fill:#b6b6b6}:host ::ng-deep .tcs-icon-disabled.tcs-icon.tcs-document-edit-buttons:hover path.svg-content{fill:#b6b6b6;cursor:not-allowed}:host ::ng-deep .tcs-icon.tcs-document-edit-buttons:hover path.svg-content{fill:#0081cb;cursor:pointer}:host ::ng-deep .tcs-icon.tcs-document-edit-icon:hover path.svg-content{fill:#0081cb;cursor:pointer}.tcs-document-detail-box{min-height:85px;flex-shrink:0;padding-left:20px;padding-right:20px}.tcs-document-detail-box:hover{background-color:#eef0f7;-webkit-transition:background-color .5s;transition:background-color .5s}.tcs-document-line{padding:0;margin:0 20px;border-bottom:1.1px solid #f4f4f4}.tcs-document-list{overflow-y:auto}.tcs-no-item-text{font-family:Source Sans Pro;font-size:16px;font-weight:400;font-style:normal;font-stretch:normal;line-height:normal;letter-spacing:normal;color:#b6b6b6}"]
            }] }
];
/** @nocollapse */
LiveAppsDocumentsComponent.ctorParameters = () => [
    { type: LiveAppsService },
    { type: TcDocumentService },
    { type: MatDialog }
];
LiveAppsDocumentsComponent.propDecorators = {
    sandboxId: [{ type: Input }],
    folderType: [{ type: Input }],
    folderId: [{ type: Input }],
    filter: [{ type: Input }],
    folderDescription: [{ type: Input }],
    showHeader: [{ type: Input }],
    customActions: [{ type: Input }],
    customActionClicked: [{ type: Output }]
};
if (false) {
    /**
     * sandboxId - this comes from claims resolver
     * @type {?}
     */
    LiveAppsDocumentsComponent.prototype.sandboxId;
    /**
     * orgFolders' or 'caseFolders' - different API calls made according to which one this is
     * @type {?}
     */
    LiveAppsDocumentsComponent.prototype.folderType;
    /**
     * The organisation folder to store/retrieve documents
     * @type {?}
     */
    LiveAppsDocumentsComponent.prototype.folderId;
    /**
     * NOT used but would allow a search filter on documents
     * @type {?}
     */
    LiveAppsDocumentsComponent.prototype.filter;
    /**
     * header text on component (defaults to documents)
     * @type {?}
     */
    LiveAppsDocumentsComponent.prototype.folderDescription;
    /**
     * Whether to show the header bar in the widget - eg. favorites on home page (contains icon etc) - if off icons still appear without bar
     * @type {?}
     */
    LiveAppsDocumentsComponent.prototype.showHeader;
    /**
     * Custom Document Buttons (array of text)
     * @type {?}
     */
    LiveAppsDocumentsComponent.prototype.customActions;
    /**
     * Custom Document Action Event: fired when a custom action is clicked for a document (outputs the action name and a document (DocumentAction))
     * @type {?}
     */
    LiveAppsDocumentsComponent.prototype.customActionClicked;
    /** @type {?} */
    LiveAppsDocumentsComponent.prototype.errorMessage;
    /** @type {?} */
    LiveAppsDocumentsComponent.prototype.documents;
    /** @type {?} */
    LiveAppsDocumentsComponent.prototype.fileToUpload;
    /** @type {?} */
    LiveAppsDocumentsComponent.prototype.fileDescription;
    /** @type {?} */
    LiveAppsDocumentsComponent.prototype.uploadMessage;
    /** @type {?} */
    LiveAppsDocumentsComponent.prototype.uploadProgress;
    /** @type {?} */
    LiveAppsDocumentsComponent.prototype.refresh;
    /** @type {?} */
    LiveAppsDocumentsComponent.prototype.customActionClick;
    /** @type {?} */
    LiveAppsDocumentsComponent.prototype.listDocuments;
    /** @type {?} */
    LiveAppsDocumentsComponent.prototype.uploadDocument;
    /** @type {?} */
    LiveAppsDocumentsComponent.prototype.removeDocument;
    /** @type {?} */
    LiveAppsDocumentsComponent.prototype.viewDocument;
    /** @type {?} */
    LiveAppsDocumentsComponent.prototype.downloadDocument;
    /**
     * @type {?}
     * @protected
     */
    LiveAppsDocumentsComponent.prototype.liveapps;
    /**
     * @type {?}
     * @protected
     */
    LiveAppsDocumentsComponent.prototype.documentsService;
    /** @type {?} */
    LiveAppsDocumentsComponent.prototype.dialog;
}
export class LiveAppsDocumentUploadDialogComponent {
    /**
     * @param {?} dialogRef
     */
    constructor(dialogRef) {
        this.dialogRef = dialogRef;
        this.fileevent = new EventEmitter();
        this.fileToUpload = undefined;
        this.description = undefined;
        this.uploadFile = (/**
         * @return {?}
         */
        () => {
            if (this.fileToUpload) {
                this.fileevent.emit({ file: this.fileToUpload, description: this.description });
                this.dialogRef.close();
            }
        });
    }
    /**
     * @param {?} description
     * @return {?}
     */
    setFileDescription(description) {
        this.description = description;
    }
    /**
     * @param {?} files
     * @return {?}
     */
    attachFile(files) {
        // this.uploadMessage = '';
        this.fileToUpload = files.item(0);
    }
    /**
     * @return {?}
     */
    onNoClick() {
        this.dialogRef.close();
    }
}
LiveAppsDocumentUploadDialogComponent.decorators = [
    { type: Component, args: [{
                selector: 'tcla-live-apps-document-upload-dialog',
                template: "<h1 mat-dialog-title>Upload New File</h1>\n<div mat-dialog-content>\n  <form #fileUploadForm=\"ngForm\" fxFlex fxLayout=\"column\">\n    <div fxLayout=\"row\">\n      <button type=\"button\" mat-raised-button (click)=\"fileInput.click()\">Choose File To Upload</button>\n      <div *ngIf=\"fileToUpload\">{{fileToUpload.name}}</div>\n      <!-- below input is hidden and enabled by above button -->\n      <input class=\"tcs-hidden-input\" (change)=\"attachFile($event.target.files)\" #fileInput type=\"file\" id=\"file\">\n    </div>\n    <mat-form-field fxFlex>\n      <input matInput name=\"description\" type=\"text\" placeholder=\"Comments\" [(ngModel)]=\"description\"/>\n    </mat-form-field>\n\n  </form>\n</div>\n<div mat-dialog-actions>\n  <button mat-button (click)=\"uploadFile()\" type=\"submit\" [disabled]=\"!fileToUpload\">Upload</button>\n  <button mat-button (click)=\"onNoClick()\">Cancel</button>\n</div>\n",
                styles: [".tcs-hidden-input{display:none}"]
            }] }
];
/** @nocollapse */
LiveAppsDocumentUploadDialogComponent.ctorParameters = () => [
    { type: MatDialogRef }
];
LiveAppsDocumentUploadDialogComponent.propDecorators = {
    fileevent: [{ type: Output }]
};
if (false) {
    /** @type {?} */
    LiveAppsDocumentUploadDialogComponent.prototype.fileevent;
    /** @type {?} */
    LiveAppsDocumentUploadDialogComponent.prototype.fileToUpload;
    /** @type {?} */
    LiveAppsDocumentUploadDialogComponent.prototype.description;
    /** @type {?} */
    LiveAppsDocumentUploadDialogComponent.prototype.uploadFile;
    /** @type {?} */
    LiveAppsDocumentUploadDialogComponent.prototype.dialogRef;
}
export class LiveAppsDocumentViewerDialogComponent {
    /**
     * @param {?} dialogRef
     * @param {?} data
     */
    constructor(dialogRef, data) {
        this.dialogRef = dialogRef;
        this.data = data;
        this.doc = this.data.doc;
        this.folderType = this.data.folderType;
        this.folderId = this.data.folderId;
        this.sandboxId = this.data.sandboxId;
    }
    /**
     * @return {?}
     */
    onNoClick() {
        this.dialogRef.close();
    }
}
LiveAppsDocumentViewerDialogComponent.decorators = [
    { type: Component, args: [{
                selector: 'tcla-live-apps-document-viewer-dialog',
                template: "<div fxFill fxLayout=\"column\">\n<h1 mat-dialog-title>View Document</h1>\n<div mat-dialog-content fxFlex=\"grow\" style=\"overflow: hidden\">\n  <tcla-live-apps-document-viewer [document]=\"doc\" [folderId]=\"folderId\" [folderType]=\"folderType\" [sandboxId]=\"sandboxId\"></tcla-live-apps-document-viewer>\n</div>\n<div mat-dialog-actions>\n  <button mat-button (click)=\"onNoClick()\">Close</button>\n</div>\n</div>\n",
                styles: [".tcs-hidden-input{display:none}"]
            }] }
];
/** @nocollapse */
LiveAppsDocumentViewerDialogComponent.ctorParameters = () => [
    { type: MatDialogRef },
    { type: undefined, decorators: [{ type: Inject, args: [MAT_DIALOG_DATA,] }] }
];
if (false) {
    /** @type {?} */
    LiveAppsDocumentViewerDialogComponent.prototype.doc;
    /** @type {?} */
    LiveAppsDocumentViewerDialogComponent.prototype.folderType;
    /** @type {?} */
    LiveAppsDocumentViewerDialogComponent.prototype.folderId;
    /** @type {?} */
    LiveAppsDocumentViewerDialogComponent.prototype.sandboxId;
    /** @type {?} */
    LiveAppsDocumentViewerDialogComponent.prototype.dialogRef;
    /** @type {?} */
    LiveAppsDocumentViewerDialogComponent.prototype.data;
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibGl2ZS1hcHBzLWRvY3VtZW50cy5jb21wb25lbnQuanMiLCJzb3VyY2VSb290Ijoibmc6Ly9AdGliY28tdGNzdGsvdGMtbGl2ZWFwcHMtbGliLyIsInNvdXJjZXMiOlsibGliL2NvbXBvbmVudHMvbGl2ZS1hcHBzLWRvY3VtZW50cy9saXZlLWFwcHMtZG9jdW1lbnRzLmNvbXBvbmVudC50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOzs7O0FBQUEsT0FBTyxFQUFDLFNBQVMsRUFBRSxZQUFZLEVBQUUsTUFBTSxFQUFFLEtBQUssRUFBcUIsTUFBTSxFQUFDLE1BQU0sZUFBZSxDQUFDO0FBRWhHLE9BQU8sRUFBQyxlQUFlLEVBQUMsTUFBTSxrQ0FBa0MsQ0FBQztBQUNqRSxPQUFPLEVBQU0sSUFBSSxFQUFFLFNBQVMsRUFBQyxNQUFNLGdCQUFnQixDQUFDO0FBQ3BELE9BQU8sRUFBeUIsY0FBYyxFQUFDLE1BQU0sMEJBQTBCLENBQUM7QUFDaEYsT0FBTyxFQUFDLGVBQWUsRUFBRSxTQUFTLEVBQUUsWUFBWSxFQUFDLE1BQU0sbUJBQW1CLENBQUM7QUFDM0UsT0FBTyxFQUFDLGlCQUFpQixFQUFDLE1BQU0sc0RBQXNELENBQUM7QUFDdkYsT0FBTyxFQUFDLGlCQUFpQixFQUFDLE1BQU0sb0NBQW9DLENBQUM7QUFDckUsT0FBTyxFQUFDLGFBQWEsRUFBQyxNQUFNLHNCQUFzQixDQUFDOzs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBMkJuRCxNQUFNLE9BQU8sMEJBQTJCLFNBQVEsaUJBQWlCOzs7Ozs7SUFFL0QsWUFBc0IsUUFBeUIsRUFBWSxnQkFBbUMsRUFBUyxNQUFpQjtRQUN0SCxLQUFLLEVBQUUsQ0FBQztRQURZLGFBQVEsR0FBUixRQUFRLENBQWlCO1FBQVkscUJBQWdCLEdBQWhCLGdCQUFnQixDQUFtQjtRQUFTLFdBQU0sR0FBTixNQUFNLENBQVc7Ozs7UUErQi9HLGVBQVUsR0FBWSxJQUFJLENBQUMsVUFBVSxDQUFDLENBQUMsQ0FBQyxJQUFJLENBQUMsVUFBVSxD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bnQsIEV2ZW50RW1pdHRlciwgSW5qZWN0LCBJbnB1dCwgT25EZXN0cm95LCBPbkluaXQsIE91dHB1dH0gZnJvbSAnQGFuZ3VsYXIvY29yZSc7XG5pbXBvcnQge1N1YmplY3R9IGZyb20gJ3J4anMnO1xuaW1wb3J0IHtMaXZlQXBwc1NlcnZpY2V9IGZyb20gJy4uLy4uL3NlcnZpY2VzL2xpdmUtYXBwcy5zZXJ2aWNlJztcbmltcG9ydCB7bWFwLCB0YWtlLCB0YWtlVW50aWx9IGZyb20gJ3J4anMvb3BlcmF0b3JzJztcbmltcG9ydCB7RG9jdW1lbnRMaXN0LCBEb2N1bWVudCwgRG9jdW1lbnRBY3Rpb259IGZyb20gJy4uLy4uL21vZGVscy90Yy1kb2N1bWVudCc7XG5pbXBvcnQge01BVF9ESUFMT0dfREFUQSwgTWF0RGlhbG9nLCBNYXREaWFsb2dSZWZ9IGZyb20gJ0Bhbmd1bGFyL21hdGVyaWFsJztcbmltcG9ydCB7TGl2ZUFwcHNDb21wb25lbnR9IGZyb20gJy4uL2xpdmUtYXBwcy1jb21wb25lbnQvbGl2ZS1hcHBzLWNvbXBvbmVudC5jb21wb25lbnQnO1xuaW1wb3J0IHtUY0RvY3VtZW50U2VydmljZX0gZnJvbSAnLi4vLi4vc2VydmljZXMvdGMtZG9jdW1lbnQuc2VydmljZSc7XG5pbXBvcnQge0h0dHBFdmVudFR5cGV9IGZyb20gJ0Bhbmd1bGFyL2NvbW1vbi9odHRwJztcblxuXG4vKipcbiAqIERvY3VtZW50IExpc3QgYW5kIHVwbG9hZCBDb21wb25lbnRcbiAqXG4gKiBUaGlzIENvbXBvbmVudCBhbGxvd3MgdG8gbGlzdCwgdXBsb2FkLCBkb3dubG9hZCwgRG9jdW1lbnRzIGF0dGFjaGVkIHRvIGEgQ2FzZS1JbnN0YW5jZSBvciBhIHdob2xlIEFwcGxpY2F0aW9uLlxuICogSW4gdGhlIFVwbG9hZCBEaWFsb2cgdGhlIFVzZXIgaXMgYWJsZSB0byBzZWxlY3QgYSBsb2NhbCBGaWxlIGFuZCBlbnRlciBhIHNob3J0IERlc2NyaXB0aW9uLlxuICpcbiAqIFRoZSBDb21wb25lbnQgc3RvcmVzIGFsc28gdGhlIGZvbGxvd2luZyBEYXRhXG4gKiAtIHVwbG9hZGluZyBVc2VyXG4gKiAtIFRpbWVzdGFtcFxuICogLSBGaWxlIFNpemVcbiAqXG4gKiBEb2N1bWVudCBMaXN0PGJyPlxuICogIVthbHQtdGV4dF0oLi4vbGl2ZS1hcHBzLWRvY3VtZW50cy5wbmcgXCJEb2N1bWVudHMgQ29tcG9uZW50IEltYWdlXCIpXG4gKiBEb2N1bWVudCBVcGxvYWQgRGlhbG9nIDxicj5cbiAqICFbYWx0LXRleHRdKC4uL0RvY3MtVXBsb2FkLnBuZyBcIkRvY3VtZW50cyBDb21wb25lbnQgSW1hZ2VcIilcbiAqXG4gKkBleGFtcGxlIDx0Y2xhLWxpdmUtYXBwcy1kb2N1bWVudHM+PC90Y2xhLWxpdmUtYXBwcy1kb2N1bWVudHM+XG4gKi9cblxuQENvbXBvbmVudCh7XG4gIHNlbGVjdG9yOiAndGNsYS1saXZlLWFwcHMtZG9jdW1lbnRzJyxcbiAgdGVtcGxhdGVVcmw6ICcuL2xpdmUtYXBwcy1kb2N1bWVudHMuY29tcG9uZW50Lmh0bWwnLFxuICBzdHlsZVVybHM6IFsnLi9saXZlLWFwcHMtZG9jdW1lbnRzLmNvbXBvbmVudC5jc3MnXVxufSlcbmV4cG9ydCBjbGFzcyBMaXZlQXBwc0RvY3VtZW50c0NvbXBvbmVudCBleHRlbmRzIExpdmVBcHBzQ29tcG9uZW50IGltcGxlbWVudHMgT25Jbml0IHtcblxuICBjb25zdHJ1Y3Rvcihwcm90ZWN0ZWQgbGl2ZWFwcHM6IExpdmVBcHBzU2VydmljZSwgcHJvdGVjdGVkIGRvY3VtZW50c1NlcnZpY2U6IFRjRG9jdW1lbnRTZXJ2aWNlLCBwdWJsaWMgZGlhbG9nOiBNYXREaWFsb2cpIHtcbiAgICBzdXBlcigpO1xuICB9XG4gIC8qKlxuICAgKiBzYW5kYm94SWQgLSB0aGlzIGNvbWVzIGZyb20gY2xhaW1zIHJlc29sdmVyXG4gICAqL1xuICBASW5wdXQoKSBzYW5kYm94SWQ6IG51bWJlcjtcblxuICAvKipcbiAgICogb3JnRm9sZGVycycgb3IgJ2Nhc2VGb2xkZXJzJyAtIGRpZmZlcmVudCBBUEkgY2FsbHMgbWFkZSBhY2NvcmRpbmcgdG8gd2hpY2ggb25lIHRoaXMgaXNcbiAgICovXG4gIEBJbnB1dCgpIGZvbGRlclR5cGU6IHN0cmluZzsgLy8gJ29yZ0ZvbGRlcnMnIG9yICdjYXNlRm9sZGVycydcblxuICAvKipcbiAgICogVGhlIG9yZ2FuaXNhdGlvbiBmb2xkZXIgdG8gc3RvcmUvcmV0cmlldmUgZG9jdW1lbnRzXG4gICAqL1xuICBASW5wdXQoKSBmb2xkZXJJZDogc3RyaW5nOyAgIC8vIGNhc2VSZWYgZm9yIGNhc2VGb2xkZXJcblxuICAvKipcbiAgICogTk9UIHVzZWQgYnV0IHdvdWxkIGFsbG93IGEgc2VhcmNoIGZpbHRlciBvbiBkb2N1bWVudHNcbiAgICovXG4gIEBJbnB1dCgpIGZpbHRlcjogc3RyaW5nO1xuXG4gIC8qKlxuICAgKiBoZWFkZXIgdGV4dCBvbiBjb21wb25lbnQgKGRlZmF1bHRzIHRvIGRvY3VtZW50cylcbiAgICovXG4gIEBJbnB1dCgpIGZvbGRlckRlc2NyaXB0aW9uOiBzdHJpbmc7XG5cbiAgLyoqXG4gICAqIFdoZXRoZXIgdG8gc2hvdyB0aGUgaGVhZGVyIGJhciBpbiB0aGUgd2lkZ2V0IC0gZWcuIGZhdm9yaXRlcyBvbiBob21lIHBhZ2UgKGNvbnRhaW5zIGljb24gZXRjKSAtIGlmIG9mZiBpY29ucyBzdGlsbCBhcHBlYXIgd2l0aG91dCBiYXJcbiAgICovXG4gIEBJbnB1dCgpIHNob3dIZWFkZXI6IGJvb2xlYW4gPSB0aGlzLnNob3dIZWFkZXIgPyB0aGlzLnNob3dIZWFkZXIgOiB0cnVlO1xuXG4gIC8qKlxuICAgKiBDdXN0b20gRG9jdW1lbnQgQnV0dG9ucyAoYXJyYXkgb2YgdGV4dClcbiAgICovXG4gIEBJbnB1dCgpIGN1c3RvbUFjdGlvbnM6IHN0cmluZ1tdXG5cbiAgLyoqXG4gICAqIEN1c3RvbSBEb2N1bWVudCBBY3Rpb24gRXZlbnQ6IGZpcmVkIHdoZW4gYSBjdXN0b20gYWN0aW9uIGlzIGNsaWNrZWQgZm9yIGEgZG9jdW1lbnQgKG91dHB1dHMgdGhlIGFjdGlvbiBuYW1lIGFuZCBhIGRvY3VtZW50IChEb2N1bWVudEFjdGlvbikpXG4gICAqL1xuICBAT3V0cHV0KCkgY3VzdG9tQWN0aW9uQ2xpY2tlZDogRXZlbnRFbWl0dGVyPERvY3VtZW50QWN0aW9uPiA9IG5ldyBFdmVudEVtaXR0ZXI8RG9jdW1lbnRBY3Rpb24+KClcblxuICBwdWJsaWMgZXJyb3JNZXNzYWdlOiBzdHJpbmc7XG4gIHB1YmxpYyBkb2N1bWVudHM6IERvY3VtZW50W107XG4gIHB1YmxpYyBmaWxlVG9VcGxvYWQ6IEZpbGUgPSB1bmRlZmluZWQ7XG4gIHB1YmxpYyBmaWxlRGVzY3JpcHRpb246IHN0cmluZztcbiAgdXBsb2FkTWVzc2FnZTogc3RyaW5nO1xuICBwdWJsaWMgdXBsb2FkUHJvZ3Jlc3M6IG51bWJlcjtcblxuICBwdWJsaWMgcmVmcmVzaCA9ICgpID0+IHtcbiAgICB0aGlzLmxpc3REb2N1bWVudHMoKTtcbiAgfVxuXG4gIHB1YmxpYyBjdXN0b21BY3Rpb25DbGljayA9IChhY3Rpb246IHN0cmluZywgZG9jdW1lbnQ6IERvY3VtZW50KSA9PiB7XG4gICAgdGhpcy5jdXN0b21BY3Rpb25DbGlja2VkLmVtaXQobmV3IERvY3VtZW50QWN0aW9uKCkuZGVzZXJpYWxpemUoXG4gICAgICB7XG4gICAgICAgIGFjdGlvbixcbiAgICAgICAgZG9jdW1lbnRcbiAgICAgIH1cbiAgICApKTtcbiAgfVxuXG4gIHB1YmxpYyBsaXN0RG9jdW1lbnRzID0gKCkgPT4ge1xuICAgIHRoaXMuZG9jdW1lbnRzU2VydmljZS5saXN0RG9jdW1lbnRzKHRoaXMuZm9sZGVyVHlwZSwgdGhpcy5mb2xkZXJJZCwgdGhpcy5zYW5kYm94SWQsIHRoaXMuZmlsdGVyKVxuICAgICAgLnBpcGUoXG4gICAgICAgIHRha2UoMSksXG4gICAgICAgIHRha2VVbnRpbCh0aGlzLl9kZXN0cm95ZWQkKVxuICAgICAgKVxuICAgICAgLnN1YnNjcmliZShkb2N1bWVudHNsaXN0ID0+IHtcbiAgICAgICAgdGhpcy5kb2N1bWVudHMgPSBkb2N1bWVudHNsaXN0LmRvY3VtZW50cztcbiAgICAgIH0sIGVycm9yID0+IHsgdGhpcy5lcnJvck1lc3NhZ2UgPSAnRXJyb3IgcmV0cmlldmluZyBjYXNlIHN0YXRlczogJyArIGVycm9yLmVycm9yLmVycm9yTXNnOyB9KTtcbiAgICB9XG5cbiAgcHVibGljIHVwbG9hZERvY3VtZW50ID0gKGRvYykgPT4ge1xuICB9XG5cbiAgcHVibGljIHJlbW92ZURvY3VtZW50ID0gKGRvYykgPT4ge1xuICAgIHRoaXMuZG9jdW1lbnRzU2VydmljZS5kZWxldGVEb2N1bWVudCh0aGlzLmZvbGRlclR5cGUsIHRoaXMuZm9sZGVySWQsIGRvYy5uYW1lLCB0aGlzLnNhbmRib3hJZClcbiAgICAgIC5waXBlKFxuICAgICAgICB0YWtlKDEpLFxuICAgICAgICB0YWtlVW50aWwodGhpcy5fZGVzdHJveWVkJClcbiAgICAgIClcbiAgICAgIC5zdWJzY3JpYmUoXG4gICAgICAgIHZhbCA9PiB7XG4gICAgICAgICAgY29uc29sZS5sb2codmFsKTtcbiAgICAgICAgICB0aGlzLnJlZnJlc2goKTtcbiAgICAgICAgfSwgZXJyb3IgPT4geyB0aGlzLmVycm9yTWVzc2FnZSA9ICdFcnJvciByZW1vdmluZyBkb2N1bWVudDogJyArIGVycm9yLmVycm9yTXNnOyB9KTtcbiAgfVxuXG4gIHB1YmxpYyB2aWV3RG9jdW1lbnQgPSAoZG9jKSA9PiB7XG4gICAgY29uc3Qgdmlld0RvY0RpYWxvZ1JlZiA9IHRoaXMuZGlhbG9nLm9wZW4oTGl2ZUFwcHNEb2N1bWVudFZpZXdlckRpYWxvZ0NvbXBvbmVudCwge1xuICAgICAgd2lkdGg6ICc3NSUnLFxuICAgICAgaGVpZ2h0OiAnNzUlJyxcbiAgICAgIGRhdGE6IHtcbiAgICAgICAgZG9jOiBkb2MsXG4gICAgICAgIGZvbGRlclR5cGU6IHRoaXMuZm9sZGVyVHlwZSxcbiAgICAgICAgZm9sZGVySWQ6IHRoaXMuZm9sZGVySWQsXG4gICAgICAgIHNhbmRib3hJZDogdGhpcy5zYW5kYm94SWRcbiAgICAgIH1cbiAgICB9KTtcblxuICAgIHZpZXdEb2NEaWFsb2dSZWYuYWZ0ZXJDbG9zZWQoKS5zdWJzY3JpYmUocmVzdWx0ID0+IHtcbiAgICB9KTtcbiAgfVxuXG4gIHB1YmxpYyBkb3dubG9hZERvY3VtZW50ID0gKGRvYykgPT4ge1xuICAgIHRoaXMuZG9jdW1lbnRzU2VydmljZS5kb3dubG9hZERvY3VtZW50KHRoaXMuZm9sZGVyVHlwZSwgdGhpcy5mb2xkZXJJZCwgZG9jLm5hbWUsIGRvYy5hcnRpZmFjdFZlcnNpb24sIHRoaXMuc2FuZGJveElkKVxuICAgICAgLnBpcGUoXG4gICAgICAgIHRha2UoMSksXG4gICAgICAgIHRha2VVbnRpbCh0aGlzLl9kZXN0cm95ZWQkKVxuICAgICAgKVxuICAgICAgLnN1YnNjcmliZShcbiAgICAgICAgZGF0YSA9PiB7XG4gICAgICAgICAgLy8gdG9kbzogY2hlY2sgaWYgdGhpcyB3b3JrcyBvbiBhbGwgYnJvd3NlcnNcbiAgICAgICAgICBjb25zdCBkb3dubG9hZFVSTCA9IHdpbmRvdy5VUkwuY3JlYXRlT2JqZWN0VVJMKGRhdGEpO1xuICAgICAgICAgIGNvbnN0IGxpbmsgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdhJyk7XG4gICAgICAgICAgbGluay5ocmVmID0gZG93bmxvYWRVUkw7XG4gICAgICAgICAgbGluay5kb3dubG9hZCA9IGRvYy5uYW1lO1xuICAgICAgICAgIGxpbmsuY2xpY2soKTtcbiAgICAgICAgfSwgZXJyb3IgPT4geyB0aGlzLmVycm9yTWVzc2FnZSA9ICdFcnJvciBkb3dubG9hZGluZyBkb2N1bWVudDogJyArIGVycm9yLmVycm9yTXNnOyB9KTtcbiAgfVxuXG4gIGF0dGFjaEZpbGUoZmlsZXM6IEZpbGVMaXN0KSB7XG4gICAgdGhpcy51cGxvYWRNZXNzYWdlID0gJyc7XG4gICAgdGhpcy5maWxlVG9VcGxvYWQgPSBmaWxlcy5pdGVtKDApO1xuICB9XG5cbiAgc2V0RmlsZURlc2NyaXB0aW9uKGRlc2NyaXB0aW9uOiBzdHJpbmcpIHtcbiAgICB0aGlzLmZpbGVEZXNjcmlwdGlvbiA9IGRlc2NyaXB0aW9uO1xuICB9XG5cbiAgdXBsb2FkRmlsZShmaWxlVG9VcGxvYWQsIGRlc2NyaXB0aW9uKSB7XG4gICAgdGhpcy5maWxlVG9VcGxvYWQgPSBmaWxlVG9VcGxvYWQ7XG4gICAgdGhpcy51cGxvYWRNZXNzYWdlID0gJ1VwbG9hZGluZzogJyArIGZpbGVUb1VwbG9hZC5uYW1lO1xuICAgIHRoaXMuZmlsZURlc2NyaXB0aW9uID0gZGVzY3JpcHRpb247XG4gICAgdGhpcy51cGxvYWRQcm9ncmVzcyA9IDA7XG4gICAgaWYgKHRoaXMuZmlsZVRvVXBsb2FkKSB7XG4gICAgICB0aGlzLmRvY3VtZW50c1NlcnZpY2UudXBsb2FkRG9jdW1lbnQodGhpcy5mb2xkZXJUeXBlLCB0aGlzLmZvbGRlcklkLCB0aGlzLnNhbmRib3hJZCxcbiAgICAgICAgdGhpcy5maWxlVG9VcGxvYWQsIHRoaXMuZmlsZVRvVXBsb2FkLm5hbWUsIHRoaXMuZmlsZURlc2NyaXB0aW9uKVxuICAgICAgICAuc3Vic2NyaWJlKFxuICAgICAgICAgIChyZXNwb25zZTogYW55KSA9PiB7XG4gICAgICAgICAgICBpZiAocmVzcG9uc2UudHlwZSA9PT0gSHR0cEV2ZW50VHlwZS5VcGxvYWRQcm9ncmVzcykge1xuICAgICAgICAgICAgICB0aGlzLnVwbG9hZFByb2dyZXNzID0gTWF0aC5yb3VuZCgxMDAgKiByZXNwb25zZS5sb2FkZWQgLyByZXNwb25zZS50b3RhbCk7XG4gICAgICAgICAgICAgIGlmICh0aGlzLnVwbG9hZFByb2dyZXNzID09PSAxMDApIHtcbiAgICAgICAgICAgICAgICB0aGlzLmZpbGVUb1VwbG9hZCA9IHVuZGVmaW5lZDtcbiAgICAgICAgICAgICAgICB0aGlzLnVwbG9hZE1lc3NhZ2UgPSAnVXBsb2FkZWQ6ICcgKyBmaWxlVG9VcGxvYWQubmFtZTtcbiAgICAgICAgICAgICAgICAvLyBhcGkgc2VlbXMgbm90IHRvIHNob3cgbmV3IGRvY3VtZW50cyBzdHJhaWdodCBhd2F5IHNvbWV0aW1lcyAtIHNvIHRoaXMgbWluaW1pemVzIHRoZSBjaGFuY2VzIG9mIHRoYXQgaWYgZmlsZSA+IDFtYlxuICAgICAgICAgICAgICAgIGlmIChmaWxlVG9VcGxvYWQuc2l6ZSA+IDEwMDAwMDApIHtcbiAgICAgICAgICAgICAgICAgIHNldFRpbWVvdXQoKCkgPT4geyB0aGlzLnJlZnJlc2goKTsgfSwgMjAwMCk7XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgIHRoaXMucmVmcmVzaCgpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHsgdGhpcy51cGxvYWRNZXNzYWdlID0gJyc7IHRoaXMudXBsb2FkUHJvZ3Jlc3MgPSB1bmRlZmluZWQ7IH0sIDUwMDApO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfSxcbiAgICAgICAgICBlcnJvciA9PiB7IGNvbnNvbGUubG9nKCdlcnJvcicpOyB0aGlzLmVycm9yTWVzc2FnZSA9ICdFcnJvciB1cGxvYWRpbmcgZG9jdW1lbnQ6ICcgKyBlcnJvci5lcnJvck1zZzsgfSk7XG4gICAgfVxuICB9XG5cbiAgb3BlbkRpYWxvZygpOiB2b2lkIHtcbiAgICAvLyBvbmx5IGFsbG93IGlmIHVwbG9hZCBub3QgaW4gcHJvZ3Jlc3NcbiAgICBpZiAoIXRoaXMudXBsb2FkUHJvZ3Jlc3MgfHwgdGhpcy51cGxvYWRQcm9ncmVzcyA9PT0gMTAwKSB7XG4gICAgICBjb25zdCBkaWFsb2dSZWYgPSB0aGlzLmRpYWxvZy5vcGVuKExpdmVBcHBzRG9jdW1lbnRVcGxvYWREaWFsb2dDb21wb25lbnQsIHtcbiAgICAgICAgd2lkdGg6ICc1MDBweCcsXG4gICAgICAgIGRhdGE6IHt9XG4gICAgICB9KTtcblxuICAgICAgZGlhbG9nUmVmLmNvbXBvbmVudEluc3RhbmNlLmZpbGVldmVudC5zdWJzY3JpYmUoKCRlKSA9PiB7XG4gICAgICAgIHRoaXMudXBsb2FkRmlsZSgkZS5maWxlLCAkZS5kZXNjcmlwdGlvbik7XG4gICAgICB9KVxuXG4gICAgICBkaWFsb2dSZWYuYWZ0ZXJDbG9zZWQoKS5zdWJzY3JpYmUocmVzdWx0ID0+IHtcbiAgICAgIH0pO1xuICAgIH1cbiAgfVxuXG4gIG5nT25Jbml0KCkge1xuICAgIHRoaXMucmVmcmVzaCgpO1xuICB9XG59XG5cbkBDb21wb25lbnQoe1xuICBzZWxlY3RvcjogJ3RjbGEtbGl2ZS1hcHBzLWRvY3VtZW50LXVwbG9hZC1kaWFsb2cnLFxuICB0ZW1wbGF0ZVVybDogJ2FwcC1saXZlLWFwcHMtZG9jdW1lbnQtdXBsb2FkLWRpYWxvZy5odG1sJyxcbiAgc3R5bGVVcmxzOiBbICdhcHAtbGl2ZS1hcHBzLWRvY3VtZW50LXVwbG9hZC1kaWFsb2cuY3NzJ11cbn0pXG5leHBvcnQgY2xhc3MgTGl2ZUFwcHNEb2N1bWVudFVwbG9hZERpYWxvZ0NvbXBvbmVudCB7XG5cbiAgQE91dHB1dCgpIGZpbGVldmVudCA9IG5ldyBFdmVudEVtaXR0ZXI8YW55PigpO1xuICBwdWJsaWMgZmlsZVRvVXBsb2FkOiBGaWxlID0gdW5kZWZpbmVkO1xuICBwdWJsaWMgZGVzY3JpcHRpb246IHN0cmluZyA9IHVuZGVmaW5lZDtcblxuICBjb25zdHJ1Y3RvcihcbiAgICBwdWJsaWMgZGlhbG9nUmVmOiBNYXREaWFsb2dSZWY8TGl2ZUFwcHNEb2N1bWVudFVwbG9hZERpYWxvZ0NvbXBvbmVudD4pIHt9XG5cblxuICBwdWJsaWMgdXBsb2FkRmlsZSA9ICgpID0+IHtcbiAgICBpZiAodGhpcy5maWxlVG9VcGxvYWQpIHtcbiAgICAgIHRoaXMuZmlsZWV2ZW50LmVtaXQoeyBmaWxlOiB0aGlzLmZpbGVUb1VwbG9hZCwgZGVzY3JpcHRpb246IHRoaXMuZGVzY3JpcHRpb24gfSk7XG4gICAgICB0aGlzLmRpYWxvZ1JlZi5jbG9zZSgpO1xuICAgIH1cbiAgfVxuXG4gIHNldEZpbGVEZXNjcmlwdGlvbihkZXNjcmlwdGlvbjogc3RyaW5nKSB7XG4gICAgdGhpcy5kZXNjcmlwdGlvbiA9IGRlc2NyaXB0aW9uO1xuICB9XG5cbiAgYXR0YWNoRmlsZShmaWxlczogRmlsZUxpc3QpIHtcbiAgICAvLyB0aGlzLnVwbG9hZE1lc3NhZ2UgPSAnJztcbiAgICB0aGlzLmZpbGVUb1VwbG9hZCA9IGZpbGVzLml0ZW0oMCk7XG4gIH1cblxuICBvbk5vQ2xpY2soKTogdm9pZCB7XG4gICAgdGhpcy5kaWFsb2dSZWYuY2xvc2UoKTtcbiAgfVxuXG59XG5cbkBDb21wb25lbnQoe1xuICBzZWxlY3RvcjogJ3RjbGEtbGl2ZS1hcHBzLWRvY3VtZW50LXZpZXdlci1kaWFsb2cnLFxuICB0ZW1wbGF0ZVVybDogJ2FwcC1saXZlLWFwcHMtZG9jdW1lbnQtdmlld2VyLWRpYWxvZy5odG1sJyxcbiAgc3R5bGVVcmxzOiBbICdhcHAtbGl2ZS1hcHBzLWRvY3VtZW50LXZpZXdlci1kaWFsb2cuY3NzJ11cbn0pXG5leHBvcnQgY2xhc3MgTGl2ZUFwcHNEb2N1bWVudFZpZXdlckRpYWxvZ0NvbXBvbmVudCB7XG4gIHB1YmxpYyBkb2M6IERvY3VtZW50O1xuICBwdWJsaWMgZm9sZGVyVHlwZTogc3RyaW5nO1xuICBwdWJsaWMgZm9sZGVySWQ6IHN0cmluZztcbiAgcHVibGljIHNhbmRib3hJZDogbnVtYmVyO1xuXG4gIGNvbnN0cnVjdG9yKFxuICAgIHB1YmxpYyBkaWFsb2dSZWY6IE1hdERpYWxvZ1JlZjxMaXZlQXBwc0RvY3VtZW50VXBsb2FkRGlhbG9nQ29tcG9uZW50PixcbiAgICBASW5qZWN0KE1BVF9ESUFMT0dfREFUQSkgcHVibGljIGRhdGE6IGFueSkge1xuICAgIHRoaXMuZG9jID0gdGhpcy5kYXRhLmRvYztcbiAgICB0aGlzLmZvbGRlclR5cGUgPSB0aGlzLmRhdGEuZm9sZGVyVHlwZTtcbiAgICB0aGlzLmZvbGRlcklkID0gdGhpcy5kYXRhLmZvbGRlcklkO1xuICAgIHRoaXMuc2FuZGJveElkID0gdGhpcy5kYXRhLnNhbmRib3hJZDtcbiAgfVxuXG4gIG9uTm9DbGljaygpOiB2b2lkIHtcbiAgICB0aGlzLmRpYWxvZ1JlZi5jbG9zZSgpO1xuICB9XG5cbn1cblxuIl19