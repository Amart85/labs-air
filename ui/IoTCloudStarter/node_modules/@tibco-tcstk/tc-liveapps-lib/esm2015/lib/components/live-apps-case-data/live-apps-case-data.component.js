/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
import { Component, EventEmitter, Input, Output } from '@angular/core';
import { take, takeUntil } from 'rxjs/operators';
import { ReplaySubject } from 'rxjs';
import { LiveAppsComponent } from '../live-apps-component/live-apps-component.component';
import { TcCaseDataService } from '../../services/tc-case-data.service';
import { CustomFormDefs } from '@tibco-tcstk/tc-forms-lib';
/**
 * Displays data for a case in a widget (high level)
 *
 * ![alt-text](../live-apps-case-data.png "Image")
 *
 * \@example <tcla-live-apps-case-data></tcla-live-apps-case-data>
 */
export class LiveAppsCaseDataComponent extends LiveAppsComponent {
    /**
     * @param {?} caseDataService
     */
    constructor(caseDataService) {
        super();
        this.caseDataService = caseDataService;
        /**
         * Allow override of forms framework
         * Options: bootstrap-4 or material-design
         */
        this.formsFramework = this.formsFramework ? this.formsFramework : 'material-design';
        /**
         * not used
         */
        this.customDataId = this.customDataId ? this.customDataId : 'default';
        /**
         * Emit event to cause refresh of page
         * *
         */
        this.refreshEvent = new EventEmitter();
        this.casedata$ = new ReplaySubject();
        this.summary$ = new ReplaySubject();
        this.metadata$ = new ReplaySubject();
        this.schema$ = new ReplaySubject();
        this.triggerRefresh = (/**
         * @return {?}
         */
        () => {
            this.refreshEvent.emit();
        });
        this.refresh = (/**
         * @return {?}
         */
        () => {
            this.caseDataService.getCaseWithSchema(this.caseRef, this.sandboxId, this.appId, this.typeId, this.uiAppId)
                .pipe(take(1), takeUntil(this._destroyed$)).subscribe((/**
             * @param {?} result
             * @return {?}
             */
            result => {
                this.casedata = result.caseInfo.untaggedCasedataObj;
                this.metadata = result.caseInfo.metadata;
                this.summary = result.caseInfo.summaryObj;
                this.schema = result.caseSchema;
                this.name = result.name;
                this.formRef = result.applicationName + '.' + result.applicationInternalName + '.casedata.' + this.customDataId;
                this.casedata$.next(this.casedata);
                this.summary$.next(this.summary);
                this.metadata$.next(this.metadata);
                this.schema$.next(this.schema);
            }), (/**
             * @param {?} error
             * @return {?}
             */
            error => { this.errorMessage = 'Error retrieving case data: ' + error.error.errorMsg; }));
        });
    }
    /**
     * @return {?}
     */
    ngOnInit() {
        this.refresh();
    }
}
LiveAppsCaseDataComponent.decorators = [
    { type: Component, args: [{
                selector: 'tcla-live-apps-case-data',
                template: "<div class=\"tcs-case-data-pane\" fxLayout=\"column\" fxFill style=\"overflow: hidden;\">\n  <tc-tibco-cloud-widget-header *ngIf=\"showHeader\" fxFlex=\"nogrow\" [headerText]=\"'Case Data'\" [icon]=\"'tcs-case-data-icon'\"></tc-tibco-cloud-widget-header>\n  <tcla-live-apps-case-data-display fxFlex=\"grow\" id=\"readOnlyDiv\" style=\"overflow:auto\" *ngIf=\"casedata && schema\" [schema]=\"schema\" [sandboxId]=\"sandboxId\" [caseRef]=\"caseRef\" [appId]=\"appId\" [typeId]=\"typeId\" [caseData]=\"casedata\" [layout]=\"layout\" [customFormDefs]=\"customFormDefs\" [formsFramework]=\"formsFramework\" [formRef]=\"formRef\" [name]=\"name\" (refreshEvent)=\"triggerRefresh()\"></tcla-live-apps-case-data-display>\n</div>\n",
                styles: [".tcs-case-data-pane{border-radius:3px;box-shadow:0 2px 4px 0 rgba(0,0,0,.33);background-color:#fff}.tcs-case-data-header{height:40px;border-radius:3px 3px 0 0;box-shadow:0 1px 2px 0 #dedede;padding-left:20px;padding-right:20px}.tcs-case-data-header-text{margin-left:10px;font-family:Source Sans Pro;font-size:18px;font-weight:600;font-style:normal;font-stretch:normal;line-height:1.5;letter-spacing:.3px}"]
            }] }
];
/** @nocollapse */
LiveAppsCaseDataComponent.ctorParameters = () => [
    { type: TcCaseDataService }
];
LiveAppsCaseDataComponent.propDecorators = {
    caseRef: [{ type: Input }],
    appId: [{ type: Input }],
    typeId: [{ type: Input }],
    sandboxId: [{ type: Input }],
    uiAppId: [{ type: Input }],
    showHeader: [{ type: Input }],
    layout: [{ type: Input }],
    formsFramework: [{ type: Input }],
    customFormDefs: [{ type: Input }],
    customDataId: [{ type: Input }],
    refreshEvent: [{ type: Output }]
};
if (false) {
    /**
     * The case reference
     * @type {?}
     */
    LiveAppsCaseDataComponent.prototype.caseRef;
    /**
     * The LA Application Id
     * @type {?}
     */
    LiveAppsCaseDataComponent.prototype.appId;
    /**
     * The LA Application Type Id (generally 1)
     * @type {?}
     */
    LiveAppsCaseDataComponent.prototype.typeId;
    /**
     * sandboxId - this comes from claims resolver
     * @type {?}
     */
    LiveAppsCaseDataComponent.prototype.sandboxId;
    /**
     * The Application ID of the UI (should ideally be unique as it is shared state key)
     * @type {?}
     */
    LiveAppsCaseDataComponent.prototype.uiAppId;
    /**
     * Whether to show the header bar in the widget - eg. favorites on home page (contains icon etc) - if off icons still appear without bar
     * @type {?}
     */
    LiveAppsCaseDataComponent.prototype.showHeader;
    /**
     * Layout object that can be passed to override default layout of the form renderer
     * @type {?}
     */
    LiveAppsCaseDataComponent.prototype.layout;
    /**
     * Allow override of forms framework
     * Options: bootstrap-4 or material-design
     * @type {?}
     */
    LiveAppsCaseDataComponent.prototype.formsFramework;
    /**
     * Custom Form configuration file
     * @type {?}
     */
    LiveAppsCaseDataComponent.prototype.customFormDefs;
    /**
     * not used
     * @type {?}
     */
    LiveAppsCaseDataComponent.prototype.customDataId;
    /**
     * Emit event to cause refresh of page
     * *
     * @type {?}
     */
    LiveAppsCaseDataComponent.prototype.refreshEvent;
    /** @type {?} */
    LiveAppsCaseDataComponent.prototype.casedata;
    /**
     * @type {?}
     * @protected
     */
    LiveAppsCaseDataComponent.prototype.casedata$;
    /**
     * @type {?}
     * @protected
     */
    LiveAppsCaseDataComponent.prototype.summary$;
    /**
     * @type {?}
     * @protected
     */
    LiveAppsCaseDataComponent.prototype.metadata$;
    /**
     * @type {?}
     * @protected
     */
    LiveAppsCaseDataComponent.prototype.schema$;
    /** @type {?} */
    LiveAppsCaseDataComponent.prototype.summary;
    /** @type {?} */
    LiveAppsCaseDataComponent.prototype.metadata;
    /** @type {?} */
    LiveAppsCaseDataComponent.prototype.errorMessage;
    /** @type {?} */
    LiveAppsCaseDataComponent.prototype.schema;
    /** @type {?} */
    LiveAppsCaseDataComponent.prototype.formRef;
    /** @type {?} */
    LiveAppsCaseDataComponent.prototype.name;
    /** @type {?} */
    LiveAppsCaseDataComponent.prototype.triggerRefresh;
    /** @type {?} */
    LiveAppsCaseDataComponent.prototype.refresh;
    /**
     * @type {?}
     * @protected
     */
    LiveAppsCaseDataComponent.prototype.caseDataService;
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibGl2ZS1hcHBzLWNhc2UtZGF0YS5jb21wb25lbnQuanMiLCJzb3VyY2VSb290Ijoibmc6Ly9AdGliY28tdGNzdGsvdGMtbGl2ZWFwcHMtbGliLyIsInNvdXJjZXMiOlsibGliL2NvbXBvbmVudHMvbGl2ZS1hcHBzLWNhc2UtZGF0YS9saXZlLWFwcHMtY2FzZS1kYXRhLmNvbXBvbmVudC50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOzs7O0FBQUEsT0FBTyxFQUFDLFNBQVMsRUFBRSxZQUFZLEVBQUUsS0FBSyxFQUFxQixNQUFNLEVBQVksTUFBTSxlQUFlLENBQUM7QUFHbkcsT0FBTyxFQUFNLElBQUksRUFBRSxTQUFTLEVBQUMsTUFBTSxnQkFBZ0IsQ0FBQztBQUNwRCxPQUFPLEVBQUMsYUFBYSxFQUFDLE1BQU0sTUFBTSxDQUFDO0FBQ25DLE9BQU8sRUFBQyxpQkFBaUIsRUFBQyxNQUFNLHNEQUFzRCxDQUFDO0FBQ3ZGLE9BQU8sRUFBQyxpQkFBaUIsRUFBQyxNQUFNLHFDQUFxQyxDQUFDO0FBQ3RFLE9BQU8sRUFBQyxjQUFjLEVBQUMsTUFBTSwyQkFBMkIsQ0FBQzs7Ozs7Ozs7QUFlekQsTUFBTSxPQUFPLHlCQUEwQixTQUFRLGlCQUFpQjs7OztJQXFFOUQsWUFBc0IsZUFBa0M7UUFDdEQsS0FBSyxFQUFFLENBQUM7UUFEWSxvQkFBZSxHQUFmLGVBQWUsQ0FBbUI7Ozs7O1FBN0IvQyxtQkFBYyxHQUFXLElBQUksQ0FBQyxjQUFjLENBQUMsQ0FBQyxDQUFDLElBQUksQ0FBQyxjQUFjLENBQUMsQ0FBQyxDQUFDLGlCQUFpQixDQUFDOzs7O1FBVXZGLGlCQUFZLEdBQUcsSUFBSSxDQUFDLFlBQVksQ0FBQyxDQUFDLENBQUMsSUFBSSxDQUFDLFlBQVksQ0FBQyxDQUFDLENBQUMsU0FBUyxDQUFDOzs7OztRQUtoRSxpQkFBWSxHQUFHLElBQUksWUFBWSxFQUFFLENBQUM7UUFHbEMsY0FBUyxHQUFHLElBQUksYUFBYSxFQUFPLENBQUM7UUFDckMsYUFBUSxHQUFH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SUFDNUIsMkNBQTBCOztJQUMxQiw0Q0FBdUI7O0lBQ3ZCLHlDQUFvQjs7SUFNcEIsbURBRUM7O0lBRUQsNENBa0JDOzs7OztJQTFCVyxvREFBNEMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQge0NvbXBvbmVudCwgRXZlbnRFbWl0dGVyLCBJbnB1dCwgT25EZXN0cm95LCBPbkluaXQsIE91dHB1dCwgVmlld0NoaWxkfSBmcm9tICdAYW5ndWxhci9jb3JlJztcbmltcG9ydCB7TGl2ZUFwcHNTZXJ2aWNlfSBmcm9tICcuLi8uLi9zZXJ2aWNlcy9saXZlLWFwcHMuc2VydmljZSc7XG5pbXBvcnQge0Nhc2VJbmZvLCBKc29uU2NoZW1hLCBNZXRhZGF0YX0gZnJvbSAnLi4vLi4vbW9kZWxzL2xpdmVhcHBzZGF0YSc7XG5pbXBvcnQge21hcCwgdGFrZSwgdGFrZVVudGlsfSBmcm9tICdyeGpzL29wZXJhdG9ycyc7XG5pbXBvcnQge1JlcGxheVN1YmplY3R9IGZyb20gJ3J4anMnO1xuaW1wb3J0IHtMaXZlQXBwc0NvbXBvbmVudH0gZnJvbSAnLi4vbGl2ZS1hcHBzLWNvbXBvbmVudC9saXZlLWFwcHMtY29tcG9uZW50LmNvbXBvbmVudCc7XG5pbXBvcnQge1RjQ2FzZURhdGFTZXJ2aWNlfSBmcm9tICcuLi8uLi9zZXJ2aWNlcy90Yy1jYXNlLWRhdGEuc2VydmljZSc7XG5pbXBvcnQge0N1c3RvbUZvcm1EZWZzfSBmcm9tICdAdGliY28tdGNzdGsvdGMtZm9ybXMtbGliJztcblxuXG4vKipcbiAqIERpc3BsYXlzIGRhdGEgZm9yIGEgY2FzZSBpbiBhIHdpZGdldCAoaGlnaCBsZXZlbClcbiAqXG4gKiAhW2FsdC10ZXh0XSguLi9saXZlLWFwcHMtY2FzZS1kYXRhLnBuZyBcIkltYWdlXCIpXG4gKlxuICpAZXhhbXBsZSA8dGNsYS1saXZlLWFwcHMtY2FzZS1kYXRhPjwvdGNsYS1saXZlLWFwcHMtY2FzZS1kYXRhPlxuICovXG5AQ29tcG9uZW50KHtcbiAgc2VsZWN0b3I6ICd0Y2xhLWxpdmUtYXBwcy1jYXNlLWRhdGEnLFxuICB0ZW1wbGF0ZVVybDogJy4vbGl2ZS1hcHBzLWNhc2UtZGF0YS5jb21wb25lbnQuaHRtbCcsXG4gIHN0eWxlVXJsczogWycuL2xpdmUtYXBwcy1jYXNlLWRhdGEuY29tcG9uZW50LmNzcyddXG59KVxuZXhwb3J0IGNsYXNzIExpdmVBcHBzQ2FzZURhdGFDb21wb25lbnQgZXh0ZW5kcyBMaXZlQXBwc0NvbXBvbmVudCBpbXBsZW1lbnRzIE9uSW5pdCB7XG4gIC8qKlxuICAgKiBUaGUgY2FzZSByZWZlcmVuY2VcbiAgICovXG4gIEBJbnB1dCgpIGNhc2VSZWY6IHN0cmluZztcblxuICAvKipcbiAgICogVGhlIExBIEFwcGxpY2F0aW9uIElkXG4gICAqL1xuICBASW5wdXQoKSBhcHBJZDogc3RyaW5nO1xuXG4gIC8qKlxuICAgKiBUaGUgTEEgQXBwbGljYXRpb24gVHlwZSBJZCAoZ2VuZXJhbGx5IDEpXG4gICAqL1xuICBASW5wdXQoKSB0eXBlSWQ6IHN0cmluZztcblxuICAvKipcbiAgICogc2FuZGJveElkIC0gdGhpcyBjb21lcyBmcm9tIGNsYWltcyByZXNvbHZlclxuICAgKi9cbiAgQElucHV0KCkgc2FuZGJveElkOiBudW1iZXI7XG5cbiAgLyoqXG4gICAqIFRoZSBBcHBsaWNhdGlvbiBJRCBvZiB0aGUgVUkgKHNob3VsZCBpZGVhbGx5IGJlIHVuaXF1ZSBhcyBpdCBpcyBzaGFyZWQgc3RhdGUga2V5KVxuICAgKi9cbiAgQElucHV0KCkgdWlBcHBJZDogc3RyaW5nO1xuXG4gIC8qKlxuICAgKiBXaGV0aGVyIHRvIHNob3cgdGhlIGhlYWRlciBiYXIgaW4gdGhlIHdpZGdldCAtIGVnLiBmYXZvcml0ZXMgb24gaG9tZSBwYWdlIChjb250YWlucyBpY29uIGV0YykgLSBpZiBvZmYgaWNvbnMgc3RpbGwgYXBwZWFyIHdpdGhvdXQgYmFyXG4gICAqL1xuICBASW5wdXQoKSBzaG93SGVhZGVyOiBib29sZWFuO1xuXG4gIC8qKlxuICAgKiBMYXlvdXQgb2JqZWN0IHRoYXQgY2FuIGJlIHBhc3NlZCB0byBvdmVycmlkZSBkZWZhdWx0IGxheW91dCBvZiB0aGUgZm9ybSByZW5kZXJlclxuICAgKi9cbiAgQElucHV0KCkgbGF5b3V0OiBhbnlbXTtcblxuICAvKipcbiAgICogQWxsb3cgb3ZlcnJpZGUgb2YgZm9ybXMgZnJhbWV3b3JrXG4gICAqIE9wdGlvbnM6IGJvb3RzdHJhcC00IG9yIG1hdGVyaWFsLWRlc2lnblxuICAgKi9cbiAgQElucHV0KCkgZm9ybXNGcmFtZXdvcms6IHN0cmluZyA9IHRoaXMuZm9ybXNGcmFtZXdvcmsgPyB0aGlzLmZvcm1zRnJhbWV3b3JrIDogJ21hdGVyaWFsLWRlc2lnbic7XG5cbiAgLyoqXG4gICAqIEN1c3RvbSBGb3JtIGNvbmZpZ3VyYXRpb24gZmlsZVxuICAgKi9cbiAgQElucHV0KCkgY3VzdG9tRm9ybURlZnM6IEN1c3RvbUZvcm1EZWZzO1xuXG4gIC8qKlxuICAgKiBub3QgdXNlZFxuICAgKi9cbiAgQElucHV0KCkgY3VzdG9tRGF0YUlkID0gdGhpcy5jdXN0b21EYXRhSWQgPyB0aGlzLmN1c3RvbURhdGFJZCA6ICdkZWZhdWx0JztcblxuICAvKipcbiAgICogRW1pdCBldmVudCB0byBjYXVzZSByZWZyZXNoIG9mIHBhZ2VcbiAgICogKiovXG4gIEBPdXRwdXQoKSByZWZyZXNoRXZlbnQgPSBuZXcgRXZlbnRFbWl0dGVyKCk7XG5cbiAgcHVibGljIGNhc2VkYXRhOiBhbnk7XG4gIHByb3RlY3RlZCBjYXNlZGF0YSQgPSBuZXcgUmVwbGF5U3ViamVjdDxhbnk+KCk7XG4gIHByb3RlY3RlZCBzdW1tYXJ5JCA9IG5ldyBSZXBsYXlTdWJqZWN0PGFueT4oKTtcbiAgcHJvdGVjdGVkIG1ldGFkYXRhJCA9IG5ldyBSZXBsYXlTdWJqZWN0PE1ldGFkYXRhPigpO1xuICBwcm90ZWN0ZWQgc2NoZW1hJCA9IG5ldyBSZXBsYXlTdWJqZWN0PEpzb25TY2hlbWE+KCk7XG4gIHB1YmxpYyBzdW1tYXJ5OiBhbnk7XG4gIHB1YmxpYyBtZXRhZGF0YTogTWV0YWRhdGE7XG4gIHB1YmxpYyBlcnJvck1lc3NhZ2U6IHN0cmluZztcbiAgcHVibGljIHNjaGVtYTogSnNvblNjaGVtYTtcbiAgcHVibGljIGZvcm1SZWY6IHN0cmluZztcbiAgcHVibGljIG5hbWU6IHN0cmluZztcblxuICBjb25zdHJ1Y3Rvcihwcm90ZWN0ZWQgY2FzZURhdGFTZXJ2aWNlOiBUY0Nhc2VEYXRhU2VydmljZSkge1xuICAgIHN1cGVyKCk7XG4gIH1cblxuICBwdWJsaWMgdHJpZ2dlclJlZnJlc2ggPSAoKSA9PiB7XG4gICAgdGhpcy5yZWZyZXNoRXZlbnQuZW1pdCgpO1xuICB9XG5cbiAgcHVibGljIHJlZnJlc2ggPSAoKSA9PiB7XG4gICAgdGhpcy5jYXNlRGF0YVNlcnZpY2UuZ2V0Q2FzZVdpdGhTY2hlbWEodGhpcy5jYXNlUmVmLCB0aGlzLnNhbmRib3hJZCwgdGhpcy5hcHBJZCwgdGhpcy50eXBlSWQsIHRoaXMudWlBcHBJZClcbiAgICAgIC5waXBlKFxuICAgICAgICB0YWtlKDEpLFxuICAgICAgICB0YWtlVW50aWwodGhpcy5fZGVzdHJveWVkJClcbiAgICAgICkuc3Vic2NyaWJlKFxuICAgICAgcmVzdWx0ID0+IHtcbiAgICAgICAgdGhpcy5jYXNlZGF0YSA9IHJlc3VsdC5jYXNlSW5mby51bnRhZ2dlZENhc2VkYXRhT2JqO1xuICAgICAgICB0aGlzLm1ldGFkYXRhID0gcmVzdWx0LmNhc2VJbmZvLm1ldGFkYXRhO1xuICAgICAgICB0aGlzLnN1bW1hcnkgPSByZXN1bHQuY2FzZUluZm8uc3VtbWFyeU9iajtcbiAgICAgICAgdGhpcy5zY2hlbWEgPSByZXN1bHQuY2FzZVNjaGVtYTtcbiAgICAgICAgdGhpcy5uYW1lID0gcmVzdWx0Lm5hbWU7XG4gICAgICAgIHRoaXMuZm9ybVJlZiA9IHJlc3VsdC5hcHBsaWNhdGlvbk5hbWUgKyAnLicgKyByZXN1bHQuYXBwbGljYXRpb25JbnRlcm5hbE5hbWUgKyAnLmNhc2VkYXRhLicgKyB0aGlzLmN1c3RvbURhdGFJZDtcbiAgICAgICAgdGhpcy5jYXNlZGF0YSQubmV4dCh0aGlzLmNhc2VkYXRhKTtcbiAgICAgICAgdGhpcy5zdW1tYXJ5JC5uZXh0KHRoaXMuc3VtbWFyeSk7XG4gICAgICAgIHRoaXMubWV0YWRhdGEkLm5leHQodGhpcy5tZXRhZGF0YSk7XG4gICAgICAgIHRoaXMuc2NoZW1hJC5uZXh0KHRoaXMuc2NoZW1hKTtcbiAgICAgIH0sIGVycm9yID0+IHsgdGhpcy5lcnJvck1lc3NhZ2UgPSAnRXJyb3IgcmV0cmlldmluZyBjYXNlIGRhdGE6ICcgKyBlcnJvci5lcnJvci5lcnJvck1zZzsgfSk7XG4gIH1cblxuICBuZ09uSW5pdCgpIHtcbiAgICB0aGlzLnJlZnJlc2goKTtcbiAgfVxuXG59XG4iXX0=