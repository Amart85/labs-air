/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
import { Component, Input } from '@angular/core';
import { map, take, takeUntil } from 'rxjs/operators';
import { LiveAppsComponent } from '../live-apps-component/live-apps-component.component';
import { TcCaseDataService } from '../../services/tc-case-data.service';
import { CustomFormDefs } from '@tibco-tcstk/tc-forms-lib';
/**
 * Displays data for a case in a widget (high level)
 *
 * ![alt-text](../live-apps-case-data.png "Image")
 *
 * \@example <tcla-live-apps-case-data></tcla-live-apps-case-data>
 */
export class LiveAppsCaseDataComponent extends LiveAppsComponent {
    /**
     * @param {?} caseDataService
     */
    constructor(caseDataService) {
        super();
        this.caseDataService = caseDataService;
        /**
         * not used
         */
        this.customDataId = this.customDataId ? this.customDataId : 'default';
        this.refresh = (/**
         * @return {?}
         */
        () => {
            this.caseDataService.getCaseWithSchema(this.caseRef, this.sandboxId, this.appId, this.typeId, this.uiAppId)
                .pipe(take(1), takeUntil(this._destroyed$), map((/**
             * @param {?} result
             * @return {?}
             */
            result => {
                this.casedata = result.caseInfo.untaggedCasedataObj;
                this.metadata = result.caseInfo.metadata;
                this.summary = result.caseInfo.summaryObj;
                this.schema = result.caseSchema;
                this.formRef = result.applicationName + '.' + result.applicationInternalName + '.casedata.' + this.customDataId;
            }))).subscribe(null, (/**
             * @param {?} error
             * @return {?}
             */
            error => { this.errorMessage = 'Error retrieving case data: ' + error.error.errorMsg; }));
        });
    }
    /**
     * @return {?}
     */
    ngOnInit() {
        this.refresh();
    }
}
LiveAppsCaseDataComponent.decorators = [
    { type: Component, args: [{
                selector: 'tcla-live-apps-case-data',
                template: "<div class=\"tcs-case-data-pane\" fxLayout=\"column\" fxFill style=\"overflow: hidden;\">\n  <tc-tibco-cloud-widget-header *ngIf=\"showHeader\" fxFlex=\"nogrow\" [headerText]=\"'Case Data'\" [icon]=\"'tcs-case-data-icon'\"></tc-tibco-cloud-widget-header>\n  <tcla-live-apps-case-data-display fxFlex=\"grow\" id=\"readOnlyDiv\" style=\"overflow:auto\" *ngIf=\"casedata && schema\" [schema]=\"schema\" [caseRef]=\"caseRef\" [appId]=\"appId\" [caseData]=\"casedata\" [layout]=\"layout\" [customFormDefs]=\"customFormDefs\" [formRef]=\"formRef\"></tcla-live-apps-case-data-display>\n</div>\n",
                styles: [".tcs-case-data-pane{border-radius:3px;box-shadow:0 2px 4px 0 rgba(0,0,0,.33);background-color:#fff}.tcs-case-data-header{height:40px;border-radius:3px 3px 0 0;box-shadow:0 1px 2px 0 #dedede;padding-left:20px;padding-right:20px}.tcs-case-data-header-text{margin-left:10px;font-family:Source Sans Pro;font-size:18px;font-weight:600;font-style:normal;font-stretch:normal;line-height:1.5;letter-spacing:.3px}"]
            }] }
];
/** @nocollapse */
LiveAppsCaseDataComponent.ctorParameters = () => [
    { type: TcCaseDataService }
];
LiveAppsCaseDataComponent.propDecorators = {
    caseRef: [{ type: Input }],
    appId: [{ type: Input }],
    typeId: [{ type: Input }],
    sandboxId: [{ type: Input }],
    uiAppId: [{ type: Input }],
    showHeader: [{ type: Input }],
    layout: [{ type: Input }],
    customFormDefs: [{ type: Input }],
    customDataId: [{ type: Input }]
};
if (false) {
    /**
     * The case reference
     * @type {?}
     */
    LiveAppsCaseDataComponent.prototype.caseRef;
    /**
     * The LA Application Id
     * @type {?}
     */
    LiveAppsCaseDataComponent.prototype.appId;
    /**
     * The LA Application Type Id (generally 1)
     * @type {?}
     */
    LiveAppsCaseDataComponent.prototype.typeId;
    /**
     * sandboxId - this comes from claims resolver
     * @type {?}
     */
    LiveAppsCaseDataComponent.prototype.sandboxId;
    /**
     * The Application ID of the UI (should ideally be unique as it is shared state key)
     * @type {?}
     */
    LiveAppsCaseDataComponent.prototype.uiAppId;
    /**
     * Whether to show the header bar in the widget - eg. favorites on home page (contains icon etc) - if off icons still appear without bar
     * @type {?}
     */
    LiveAppsCaseDataComponent.prototype.showHeader;
    /**
     * Layout object that can be passed to override default layout of the form renderer
     * @type {?}
     */
    LiveAppsCaseDataComponent.prototype.layout;
    /**
     * Custom Form configuration file
     * @type {?}
     */
    LiveAppsCaseDataComponent.prototype.customFormDefs;
    /**
     * not used
     * @type {?}
     */
    LiveAppsCaseDataComponent.prototype.customDataId;
    /** @type {?} */
    LiveAppsCaseDataComponent.prototype.casedata;
    /** @type {?} */
    LiveAppsCaseDataComponent.prototype.summary;
    /** @type {?} */
    LiveAppsCaseDataComponent.prototype.metadata;
    /** @type {?} */
    LiveAppsCaseDataComponent.prototype.errorMessage;
    /** @type {?} */
    LiveAppsCaseDataComponent.prototype.schema;
    /** @type {?} */
    LiveAppsCaseDataComponent.prototype.formRef;
    /** @type {?} */
    LiveAppsCaseDataComponent.prototype.refresh;
    /**
     * @type {?}
     * @private
     */
    LiveAppsCaseDataComponent.prototype.caseDataService;
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibGl2ZS1hcHBzLWNhc2UtZGF0YS5jb21wb25lbnQuanMiLCJzb3VyY2VSb290Ijoibmc6Ly9AdGliY28tdGNzdGsvdGMtbGl2ZWFwcHMtbGliLyIsInNvdXJjZXMiOlsibGliL2NvbXBvbmVudHMvbGl2ZS1hcHBzLWNhc2UtZGF0YS9saXZlLWFwcHMtY2FzZS1kYXRhLmNvbXBvbmVudC50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOzs7O0FBQUEsT0FBTyxFQUFDLFNBQVMsRUFBRSxLQUFLLEVBQStCLE1BQU0sZUFBZSxDQUFDO0FBRzdFLE9BQU8sRUFBQyxHQUFHLEVBQUUsSUFBSSxFQUFFLFNBQVMsRUFBQyxNQUFNLGdCQUFnQixDQUFDO0FBRXBELE9BQU8sRUFBQyxpQkFBaUIsRUFBQyxNQUFNLHNEQUFzRCxDQUFDO0FBQ3ZGLE9BQU8sRUFBQyxpQkFBaUIsRUFBQyxNQUFNLHFDQUFxQyxDQUFDO0FBQ3RFLE9BQU8sRUFBQyxjQUFjLEVBQUMsTUFBTSwyQkFBMkIsQ0FBQzs7Ozs7Ozs7QUFlekQsTUFBTSxPQUFPLHlCQUEwQixTQUFRLGlCQUFpQjs7OztJQXFEOUQsWUFBb0IsZUFBa0M7UUFDcEQsS0FBSyxFQUFFLENBQUM7UUFEVSxvQkFBZSxHQUFmLGVBQWUsQ0FBbUI7Ozs7UUFUN0MsaUJBQVksR0FBRyxJQUFJLENBQUMsWUFBWSxDQUFDLENBQUMsQ0FBQyxJQUFJLENBQUMsWUFBWSxDQUFDLENBQUMsQ0FBQyxTQUFTLENBQUM7UUFhbkUsWUFBTzs7O1FBQUcsR0FBRyxFQUFFO1lBQ3BCLElBQUksQ0FBQyxlQUFlLENBQUMsaUJBQWlCLENBQUMsSUFBSSxDQUFDLE9BQU8sRUFBRSxJQUFJLENBQUMsU0FBUyxFQUFFLElBQUksQ0FBQyxLQUFLLEVBQUUsSUFBSSxDQUFDLE1BQU0sRUFBRSxJQUFJLENBQUMsT0FBTyxDQUFDO2lCQUN4RyxJQUFJLENBQ0gsSUFBSSxDQUFDLENBQUMsQ0FBQyxFQUNQLFNBQVMsQ0FBQyxJQUFJLENBQUMsV0FBVyxDQUFDLEVBQzNCLEdBQUc7Ozs7WUFBQyxNQUFNLENBQUMsRUFBRTtnQkFDWCxJQUFJLENBQUMsUUFBUSxHQUFHLE1BQU0sQ0FBQyxRQUFRLENBQUMsbUJBQW1CLENBQUM7Z0JBQ3BELElBQUksQ0FBQyxRQUFRLEdBQUcsTUFBTSxDQUFDLFFBQVEsQ0FBQyxRQUFRLENBQUM7Z0JBQ3pDLElBQUksQ0FBQyxPQUFPLEdBQUcsTUFBTSxDQUFDLFFBQVEsQ0FBQyxVQUFVLENBQUM7Z0JBQzFDLElBQUksQ0FBQyxNQUFNLEdBQUcsTUFBTSxDQUFDLFVBQVUsQ0FBQztnQkFDaEMsSUFBSSxDQUFDLE9BQU8sR0FBRyxNQUFNLENBQUMsZUFBZSxHQUFHLEdBQUcsR0FBRyxNQUFNLENBQUMsdUJBQXVCLEdBQUcsWUFBWSxHQUFHLElBQUksQ0FBQyxZQUFZLENBQUM7WUFDbEgsQ0FBQyxFQUFDLENBQ0gsQ0FBQyxTQUFTLENBQ1gsSUFBSTs7OztZQUFFLEtBQUssQ0FBQyxFQUFFLEdBQUcsSUFBSSxDQUFDLFlBQVksR0FBRyw4QkFBOEIsR0FBRyxLQUFLLENBQUMsS0FBSyxDQUFDLFFBQVEsQ0FBQyxDQUFDLENBQUMsRUFBQyxDQUFDO1FBQ25HLENBQUMsRUFBQTtJQWhCRCxDQUFDOzs7O0lBa0JELFFBQVE7UUFDTixJQUFJLENBQUMsT0FBTyxFQUFFLENBQUM7SUFDakIsQ0FBQzs7O1lBaEZGLFNBQVMsU0FBQztnQkFDVCxRQUFRLEVBQUUsMEJBQTBCO2dCQUNwQyx1bEJBQW1EOzthQUVwRDs7OztZQWZPLGlCQUFpQjs7O3NCQW9CdEIsS0FBSztvQkFLTCxLQUFLO3FCQUtMLEtBQUs7d0JBS0wsS0FBSztzQkFLTCxLQUFLO3lCQUtMLEtBQUs7cUJBS0wsS0FBSzs2QkFLTCxLQUFLOzJCQUtMLEtBQUs7Ozs7Ozs7SUF4Q04sNENBQXlCOzs7OztJQUt6QiwwQ0FBdUI7Ozs7O0lBS3ZCLDJDQUF3Qjs7Ozs7SUFLeEIsOENBQTJCOzs7OztJQUszQiw0Q0FBeUI7Ozs7O0lBS3pCLCtDQUE2Qjs7Ozs7SUFLN0IsMkNBQXVCOzs7OztJQUt2QixtREFBd0M7Ozs7O0lBS3hDLGlEQUEwRTs7SUFFMUUsNkNBQXFCOztJQUNyQiw0Q0FBb0I7O0lBQ3BCLDZDQUEwQjs7SUFDMUIsaURBQTRCOztJQUM1QiwyQ0FBMEI7O0lBQzFCLDRDQUF1Qjs7SUFNdkIsNENBY0M7Ozs7O0lBbEJXLG9EQUEwQyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7Q29tcG9uZW50LCBJbnB1dCwgT25EZXN0cm95LCBPbkluaXQsIFZpZXdDaGlsZH0gZnJvbSAnQGFuZ3VsYXIvY29yZSc7XG5pbXBvcnQge0xpdmVBcHBzU2VydmljZX0gZnJvbSAnLi4vLi4vc2VydmljZXMvbGl2ZS1hcHBzLnNlcnZpY2UnO1xuaW1wb3J0IHtDYXNlSW5mbywgSnNvblNjaGVtYSwgTWV0YWRhdGF9IGZyb20gJy4uLy4uL21vZGVscy9saXZlYXBwc2RhdGEnO1xuaW1wb3J0IHttYXAsIHRha2UsIHRha2VVbnRpbH0gZnJvbSAncnhqcy9vcGVyYXRvcnMnO1xuaW1wb3J0IHtTdWJqZWN0fSBmcm9tICdyeGpzJztcbmltcG9ydCB7TGl2ZUFwcHNDb21wb25lbnR9IGZyb20gJy4uL2xpdmUtYXBwcy1jb21wb25lbnQvbGl2ZS1hcHBzLWNvbXBvbmVudC5jb21wb25lbnQnO1xuaW1wb3J0IHtUY0Nhc2VEYXRhU2VydmljZX0gZnJvbSAnLi4vLi4vc2VydmljZXMvdGMtY2FzZS1kYXRhLnNlcnZpY2UnO1xuaW1wb3J0IHtDdXN0b21Gb3JtRGVmc30gZnJvbSAnQHRpYmNvLXRjc3RrL3RjLWZvcm1zLWxpYic7XG5cblxuLyoqXG4gKiBEaXNwbGF5cyBkYXRhIGZvciBhIGNhc2UgaW4gYSB3aWRnZXQgKGhpZ2ggbGV2ZWwpXG4gKlxuICogIVthbHQtdGV4dF0oLi4vbGl2ZS1hcHBzLWNhc2UtZGF0YS5wbmcgXCJJbWFnZVwiKVxuICpcbiAqQGV4YW1wbGUgPHRjbGEtbGl2ZS1hcHBzLWNhc2UtZGF0YT48L3RjbGEtbGl2ZS1hcHBzLWNhc2UtZGF0YT5cbiAqL1xuQENvbXBvbmVudCh7XG4gIHNlbGVjdG9yOiAndGNsYS1saXZlLWFwcHMtY2FzZS1kYXRhJyxcbiAgdGVtcGxhdGVVcmw6ICcuL2xpdmUtYXBwcy1jYXNlLWRhdGEuY29tcG9uZW50Lmh0bWwnLFxuICBzdHlsZVVybHM6IFsnLi9saXZlLWFwcHMtY2FzZS1kYXRhLmNvbXBvbmVudC5jc3MnXVxufSlcbmV4cG9ydCBjbGFzcyBMaXZlQXBwc0Nhc2VEYXRhQ29tcG9uZW50IGV4dGVuZHMgTGl2ZUFwcHNDb21wb25lbnQgaW1wbGVtZW50cyBPbkluaXQge1xuICAvKipcbiAgICogVGhlIGNhc2UgcmVmZXJlbmNlXG4gICAqL1xuICBASW5wdXQoKSBjYXNlUmVmOiBzdHJpbmc7XG5cbiAgLyoqXG4gICAqIFRoZSBMQSBBcHBsaWNhdGlvbiBJZFxuICAgKi9cbiAgQElucHV0KCkgYXBwSWQ6IHN0cmluZztcblxuICAvKipcbiAgICogVGhlIExBIEFwcGxpY2F0aW9uIFR5cGUgSWQgKGdlbmVyYWxseSAxKVxuICAgKi9cbiAgQElucHV0KCkgdHlwZUlkOiBzdHJpbmc7XG5cbiAgLyoqXG4gICAqIHNhbmRib3hJZCAtIHRoaXMgY29tZXMgZnJvbSBjbGFpbXMgcmVzb2x2ZXJcbiAgICovXG4gIEBJbnB1dCgpIHNhbmRib3hJZDogbnVtYmVyO1xuXG4gIC8qKlxuICAgKiBUaGUgQXBwbGljYXRpb24gSUQgb2YgdGhlIFVJIChzaG91bGQgaWRlYWxseSBiZSB1bmlxdWUgYXMgaXQgaXMgc2hhcmVkIHN0YXRlIGtleSlcbiAgICovXG4gIEBJbnB1dCgpIHVpQXBwSWQ6IHN0cmluZztcblxuICAvKipcbiAgICogV2hldGhlciB0byBzaG93IHRoZSBoZWFkZXIgYmFyIGluIHRoZSB3aWRnZXQgLSBlZy4gZmF2b3JpdGVzIG9uIGhvbWUgcGFnZSAoY29udGFpbnMgaWNvbiBldGMpIC0gaWYgb2ZmIGljb25zIHN0aWxsIGFwcGVhciB3aXRob3V0IGJhclxuICAgKi9cbiAgQElucHV0KCkgc2hvd0hlYWRlcjogYm9vbGVhbjtcblxuICAvKipcbiAgICogTGF5b3V0IG9iamVjdCB0aGF0IGNhbiBiZSBwYXNzZWQgdG8gb3ZlcnJpZGUgZGVmYXVsdCBsYXlvdXQgb2YgdGhlIGZvcm0gcmVuZGVyZXJcbiAgICovXG4gIEBJbnB1dCgpIGxheW91dDogYW55W107XG5cbiAgLyoqXG4gICAqIEN1c3RvbSBGb3JtIGNvbmZpZ3VyYXRpb24gZmlsZVxuICAgKi9cbiAgQElucHV0KCkgY3VzdG9tRm9ybURlZnM6IEN1c3RvbUZvcm1EZWZzO1xuXG4gIC8qKlxuICAgKiBub3QgdXNlZFxuICAgKi9cbiAgQElucHV0KCkgY3VzdG9tRGF0YUlkID0gdGhpcy5jdXN0b21EYXRhSWQgPyB0aGlzLmN1c3RvbURhdGFJZCA6ICdkZWZhdWx0JztcblxuICBwdWJsaWMgY2FzZWRhdGE6IGFueTtcbiAgcHVibGljIHN1bW1hcnk6IGFueTtcbiAgcHVibGljIG1ldGFkYXRhOiBNZXRhZGF0YTtcbiAgcHVibGljIGVycm9yTWVzc2FnZTogc3RyaW5nO1xuICBwdWJsaWMgc2NoZW1hOiBKc29uU2NoZW1hO1xuICBwdWJsaWMgZm9ybVJlZjogc3RyaW5nO1xuXG4gIGNvbnN0cnVjdG9yKHByaXZhdGUgY2FzZURhdGFTZXJ2aWNlOiBUY0Nhc2VEYXRhU2VydmljZSkge1xuICAgIHN1cGVyKCk7XG4gIH1cblxuICBwdWJsaWMgcmVmcmVzaCA9ICgpID0+IHtcbiAgICB0aGlzLmNhc2VEYXRhU2VydmljZS5nZXRDYXNlV2l0aFNjaGVtYSh0aGlzLmNhc2VSZWYsIHRoaXMuc2FuZGJveElkLCB0aGlzLmFwcElkLCB0aGlzLnR5cGVJZCwgdGhpcy51aUFwcElkKVxuICAgICAgLnBpcGUoXG4gICAgICAgIHRha2UoMSksXG4gICAgICAgIHRha2VVbnRpbCh0aGlzLl9kZXN0cm95ZWQkKSxcbiAgICAgICAgbWFwKHJlc3VsdCA9PiB7XG4gICAgICAgICAgdGhpcy5jYXNlZGF0YSA9IHJlc3VsdC5jYXNlSW5mby51bnRhZ2dlZENhc2VkYXRhT2JqO1xuICAgICAgICAgIHRoaXMubWV0YWRhdGEgPSByZXN1bHQuY2FzZUluZm8ubWV0YWRhdGE7XG4gICAgICAgICAgdGhpcy5zdW1tYXJ5ID0gcmVzdWx0LmNhc2VJbmZvLnN1bW1hcnlPYmo7XG4gICAgICAgICAgdGhpcy5zY2hlbWEgPSByZXN1bHQuY2FzZVNjaGVtYTtcbiAgICAgICAgICB0aGlzLmZvcm1SZWYgPSByZXN1bHQuYXBwbGljYXRpb25OYW1lICsgJy4nICsgcmVzdWx0LmFwcGxpY2F0aW9uSW50ZXJuYWxOYW1lICsgJy5jYXNlZGF0YS4nICsgdGhpcy5jdXN0b21EYXRhSWQ7XG4gICAgICAgIH0pXG4gICAgICApLnN1YnNjcmliZShcbiAgICAgIG51bGwsIGVycm9yID0+IHsgdGhpcy5lcnJvck1lc3NhZ2UgPSAnRXJyb3IgcmV0cmlldmluZyBjYXNlIGRhdGE6ICcgKyBlcnJvci5lcnJvci5lcnJvck1zZzsgfSk7XG4gIH1cblxuICBuZ09uSW5pdCgpIHtcbiAgICB0aGlzLnJlZnJlc2goKTtcbiAgfVxuXG59XG4iXX0=