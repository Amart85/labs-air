/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
import { Component, ViewEncapsulation } from '@angular/core';
import { FormGroup, Validators, FormControl, FormBuilder } from '@angular/forms';
import { SpotfireCustomization, SpotfireFilter } from '../spotfire-customization';
import { CUSTLABELS } from '../spotfire-webplayer';
import { PersistanceService } from '../persitence.service';
import { SpotfireViewerComponent } from '../viewer/spotfire-viewer.component';
import { DocumentService } from '../document.service';
export class SpotfireEditorComponent extends SpotfireViewerComponent {
    /**
     * @param {?} fb
     * @param {?} storSvc
     * @param {?} d
     */
    constructor(fb, storSvc, d) {
        super(d);
        this.fb = fb;
        this.storSvc = storSvc;
        /**
         * When user hits Update button, depending on what settings are modified, call the right level of
         * method to update the dashboard
         */
        this.dataTables = {};
        this.pages = [];
        this.possibleValues = '';
        this.custLabels = CUSTLABELS;
        this.update = (/**
         * @param {?} e
         * @return {?}
         */
        (e) => {
            this.edit = false;
            e.stopPropagation();
            /** @type {?} */
            const isD = (/**
             * @param {?} z
             * @return {?}
             */
            (z) => this.form.get(z).dirty);
            /** @type {?} */
            const onlyTrueProps = (/**
             * @param {?} t
             * @return {?}
             */
            (t) => Object.keys(t).filter((/**
             * @param {?} key
             * @return {?}
             */
            key => t[key] === true))
                .reduce((/**
             * @param {?} obj
             * @param {?} key
             * @return {?}
             */
            (obj, key) => { obj[key] = t[key]; return obj; }), {}));
            console.log('[SPOTFIRE-EDITOR] SpotfireEditorComponent Update', this.form.getRawValue(), `u:${isD('url')}, p:${isD('path')}, a:${isD('page')}, c:${isD('cust')}, f:${isD('filters')}, m:${isD('marking')}`);
            /** @type {?} */
            const cus = new SpotfireCustomization(this.form.get('cust').value);
            if (isD('url')) {
                this.docSvc.openWebPlayer$(this.spotParams).subscribe();
                //            this.openWebPlayer(this.form.get('url').value, this.form.get('path').value, cus);
            }
            else if (isD('path') || isD('filters') || isD('marking') || isD('cust')) {
                this.path = isD('path') ? this.form.get('path').value : this.path;
                this.page = isD('page') ? this.form.get('page').value : this.page;
                console.log('[SPOTFIRE-EDITOR] Marking : ', this.form.get('marking').value);
                this.customization = cus;
                this.pages = [];
                /** @type {?} */
                const allFilters = [];
                if (this.form.get('filters').value) {
                    /** @type {?} */
                    const fltersValue = this.form.get('filters').value;
                    Object.keys(fltersValue).forEach((/**
                     * @param {?} dataTableName
                     * @return {?}
                     */
                    dataTableName => {
                        /** @type {?} */
                        const flt = fltersValue[dataTableName];
                        Object.keys(flt).forEach((/**
                         * @param {?} dataColumnName
                         * @return {?}
                         */
                        dataColumnName => allFilters.push(new SpotfireFilter({
                            dataTableName: dataTableName,
                            dataColumnName: dataColumnName,
                            filterSettings: { values: flt[dataColumnName] }
                        }))));
                    }));
                }
                this.filters = allFilters;
                if (this.sid) {
                    this.storSvc.set('url', this.form.get('url').value);
                    this.storSvc.set('path', this.form.get('path').value);
                    this.storSvc.set('page', this.form.get('page').value);
                    this.storSvc.set('cust', onlyTrueProps(this.customization));
                    this.storSvc.set('flts', this.filters);
                    this.storSvc.set('mark', this.markingOn);
                }
                this.docSvc.openPath$(this.spotParams).subscribe();
            }
            else if (isD('page')) {
                // if only page has changed, just refresh it
                //
                if (this.sid) {
                    this.storSvc.set('page', this.form.get('page').value);
                }
                this.docSvc.openPage$(this.form.get('page').value).subscribe();
            }
        });
    }
    /**
     * @param {?} doc
     * @return {?}
     */
    doForm(doc) {
        this.form = this.fb.group({
            url: [this.url, Validators.required],
            path: [this.path, Validators.required],
            page: this.fb.control({ value: this.page, disabled: false }),
            // !this.url }),
            cust: this.fb.group((/** @type {?} */ (this.customization))),
            filters: this.fb.group({}),
            marking: this.fb.group({})
        });
        // then subscribe to observables to retrieves some info about the document
        //
        doc.getDocumentMetadata$().subscribe((/**
         * @param {?} g
         * @return {?}
         */
        g => this.metadata = g));
        /*  doc.getDocumentProperties$().subscribe(g => console.log('--> getDocumentProperties', g));
          doc.getBookmarks$().subscribe(g => console.log('--> getBookmarks', g));
          doc.getBookmarkNames$().subscribe(g => console.log('--> getBookmarkNames', g));
          doc.getReports$().subscribe(g => console.log('--> getReports', g));
          */
        doc.getPages$().subscribe((/**
         * @param {?} g
         * @return {?}
         */
        g => this.pages = g));
        doc.getActivePage$().subscribe((/**
         * @param {?} g
         * @return {?}
         */
        g => this.form.get('page').patchValue(g.pageTitle)));
        //   this.doc.exportActiveVisualAsImage(100, 200);
        // this.marking = doc.marking;
        //  this.marking.getMarkingNames(g => console.log('SFINFO', 'getMarkingNames() = ', g));
        // get Table info
        //
        /** @type {?} */
        const difference = (/**
         * @param {?} a
         * @param {?} b
         * @return {?}
         */
        (a, b) => b.filter((/**
         * @param {?} i
         * @return {?}
         */
        i => a.indexOf(i) < 0)));
        doc.onDocumentReady$().subscribe((/**
         * @param {?} __
         * @return {?}
         */
        __ => {
            doc.getData().getAllTables$().subscribe((/**
             * @param {?} tables
             * @return {?}
             */
            tables => {
                console.log('[SPOTFIRE-EDITOR] getAllTables$ returns', tables, this.filters, this.markingOn);
                /** @type {?} */
                const toList = (/**
                 * @param {?} g
                 * @return {?}
                 */
                (g) => g.map((/**
                 * @param {?} f
                 * @return {?}
                 */
                f => `'${f}'`)).join(', '));
                /** @type {?} */
                const errTxt1 = '[spotfire-EDITOr] Attribut marking-on contains unknwon';
                /** @type {?} */
                const errTxt2 = '[spotfire-EDITOr] Possible values for';
                /** @type {?} */
                const fil = (/** @type {?} */ (this.form.get('filters')));
                /** @type {?} */
                const mar = (/** @type {?} */ (this.form.get('marking')));
                /** @type {?} */
                const tNames = Object.keys(tables);
                /** @type {?} */
                const tdiff = this.markingOn ? difference(Object.keys(this.markingOn), tNames) : [];
                console.log('Tables : ', tNames, tdiff, fil);
                if (tdiff.length > 0) {
                    this.errorMessages.push(`${errTxt1} table names: ${toList(tdiff)}`);
                    this.possibleValues = `${errTxt2} table names are: ${toList(tNames)} `;
                    //        return;
                }
                // Update marking and filters fields
                //
                Object.keys(tables).forEach((/**
                 * @param {?} tname
                 * @return {?}
                 */
                tname => {
                    /** @type {?} */
                    const columns = tables[tname];
                    mar.addControl(tname, new FormControl(this.markingOn ? this.markingOn[tname] : null));
                    if (!fil.contains(tname)) {
                        fil.addControl(tname, new FormGroup({}));
                    }
                    /** @type {?} */
                    const frm = (/** @type {?} */ (fil.get(tname)));
                    /** @type {?} */
                    const cNames = Object.keys(columns);
                    /*
                    console.log('Columns : ', cNames, this.markingOn);
                    if (this.markingOn) {
                      const cdiff = this.markingOn[tname] ? this.difference(this.markingOn[tname], cNames) : [];
                      console.log('Columns : ', cNames, cdiff);
                      if (_.size(cdiff) > 0) {
                        this.errorMessages.push(`${errTxt1} column names: ${toList(cdiff)}`);
                        this.possibleValues = `${errTxt2} columns of table ${tname} are: ${toList(cNames)} `;
                        //          return;
                      }
                    }
                    */
                    cNames.forEach((/**
                     * @param {?} cname
                     * @return {?}
                     */
                    cname => {
                        /** @type {?} */
                        let flt2 = null;
                        ((/** @type {?} */ (this.filters)) || []).some((/**
                         * @param {?} element
                         * @return {?}
                         */
                        element => {
                            if (element.dataTableName === tname && element.dataColumnName === cname) {
                                flt2 = element;
                                return true;
                            }
                        }));
                        frm.addControl(cname, new FormControl(flt2 ? flt2.filterSettings.values : null));
                    }));
                }));
                this.dataTables = tables;
            }));
        }));
    }
}
SpotfireEditorComponent.decorators = [
    { type: Component, args: [{
                selector: 'spotfire-editor',
                template: "<div class=\"flip-container\" [class.flipit]=\"edit\">\n  <div class=\"flipper\">\n    <div *ngIf=\"form && metadata && dataTables\" class=\"back\" [formGroup]=\"form\" (click)=\"stopPropagation($event)\">\n      <div class=\"header\">\n        <h3 class=\"mat-heading\" style='flex-grow:1'>{{metadata.title||'Add a new dashboard'}}</h3>\n        <div style='display:flex; flex-direction:column; align-items:flex-end'>\n          <span class=\"mat-caption\" *ngIf=\"metadata.size\">\n            {{metadata.size|number:'1.1-1'}}{{metadata.sizeUnit}}\n          </span>\n          <span class=\"mat-caption\" *ngIf=\"metadata.lastModified?.getTime() < metadata.created?.getTime()\">\n            {{metadata.created|date:'medium'}}\n          </span>\n          <span class=\"mat-caption\" *ngIf=\"metadata.lastModified?.getTime() >= metadata.created?.getTime()\">\n            {{metadata.lastModified|date:'medium'}}\n          </span>\n        </div>\n      </div>\n      <div class=\"flexcol\">\n        <h4 *ngIf=\"metadata.description\">{{metadata.description}}</h4>\n        <mat-form-field>\n          <input matInput type=\"url\" formControlName=\"url\" required placeholder=\"WebPlayer server root url\">\n        </mat-form-field>\n        <mat-form-field>\n          <input matInput type=\"text\" formControlName=\"path\" required placeholder=\"Analysis path\">\n        </mat-form-field>\n        <mat-form-field>\n          <mat-select formControlName=\"page\" placeholder=\"Document page\">\n            <mat-option *ngFor=\"let p of pages\" [value]=\"p\">{{p}}</mat-option>\n          </mat-select>\n        </mat-form-field>\n        <h3>Customization information:</h3>\n        <div class=\"flexrow\" formGroupName=\"cust\">\n          <mat-checkbox *ngFor=\"let s of custLabels | keyvalue\" [formControlName]=\"s.key\">{{s.value}}</mat-checkbox>\n        </div>\n        <div formGroupName=\"filters\" *ngIf=\"dataTables\">\n          <h3>Filters:</h3>\n          <div class=\"flexrow\">\n            <span *ngFor=\"let table of dataTables | keyvalue\" [formGroupName]=\"table.key\">\n              <mat-form-field *ngFor=\"let column of table.value | keyvalue\">\n                <mat-select [placeholder]=\"table.key+'/'+column.key\" multiple [formControlName]=\"column.key\">\n                  <mat-option *ngFor=\"let val of column.value\" [value]=\"val\">{{val}}</mat-option>\n                </mat-select>\n              </mat-form-field>\n            </span>\n          </div>\n        </div>\n        <div formGroupName=\"marking\" *ngIf=\"dataTables\">\n          <h3>Marking:</h3>\n          <div class=\"flexrow\">\n            <mat-form-field *ngFor=\"let table of dataTables | keyvalue\">\n              <mat-select [placeholder]=\"table.key\" multiple [formControlName]=\"table.key\">\n                <mat-option *ngFor=\"let column of table.value | keyvalue\" [value]=\"column.key\">{{column.key}}</mat-option>\n              </mat-select>\n            </mat-form-field>\n          </div>\n        </div>\n        <!--\n        <pre>{{markingOn|json}}</pre>\n        <pre>{{dataTables|json}}</pre>\n        <pre>{{form.value|json}}</pre>\n        -->\n      </div>\n      <div style='border-top:1px solid #ccc; padding: 20px 30px; text-align:right'>\n        <button mat-flat-button (click)=\"edit=!edit;stopPropagation($event)\">Close</button>\n        &nbsp;&nbsp;\n        <button [disabled]=\"form.pristine || form.invalid\" mat-flat-button color=\"accent\" (click)=\"update($event)\">Update</button>\n      </div>\n    </div>\n    <div class=\"front\">\n      <div class=\"err\" *ngIf=\"errorMessages.length > 0\">{{errorMessages|json}}</div>\n      <div class=\"err\" *ngIf=\"possibleValues\">{{possibleValues}}</div>\n      <div style='height:100%; border:2px dashed orange; border-radius:8px' #spot></div>\n      <div class=\"editdiv\"> {{url}}/{{path}}/{{page}}\n        <span (click)='edit=!edit;stopPropagation($event)'>edit</span>\n      </div>\n    </div>\n  </div>\n</div>",
                exportAs: 'spotfireEditor',
                encapsulation: ViewEncapsulation.None,
                styles: [".mat-badge-content{font-weight:600;font-size:12px;font-family:Roboto,\"Helvetica Neue\",sans-serif}.mat-badge-small .mat-badge-content{font-size:9px}.mat-badge-large .mat-badge-content{font-size:24px}.mat-h1,.mat-headline,.mat-typography h1{font:400 24px/32px Roboto,\"Helvetica Neue\",sans-serif;margin:0 0 16px}.mat-h2,.mat-title,.mat-typography h2{font:500 20px/32px Roboto,\"Helvetica Neue\",sans-serif;margin:0 0 16px}.mat-h3,.mat-subheading-2,.mat-typography h3{font:400 16px/28px Roboto,\"Helvetica Neue\",sans-serif;margin:0 0 16px}.mat-h4,.mat-subheading-1,.mat-typography h4{font:400 15px/24px Roboto,\"Helvetica Neue\",sans-serif;margin:0 0 16px}.mat-h5,.mat-typography h5{font:400 11.62px/20px Roboto,\"Helvetica Neue\",sans-serif;margin:0 0 12px}.mat-h6,.mat-typography h6{font:400 9.38px/20px Roboto,\"Helvetica Neue\",sans-serif;margin:0 0 12px}.mat-body-2,.mat-body-strong{font:500 14px/24px Roboto,\"Helvetica Neue\",sans-serif}.mat-body,.mat-body-1,.mat-typography{font:400 14px/20px Roboto,\"Helvetica Neue\",sans-serif}.mat-body p,.mat-body-1 p,.mat-typography p{margin:0 0 12px}.mat-caption,.mat-small{font:400 12px/20px Roboto,\"Helvetica Neue\",sans-serif}.mat-display-4,.mat-typography .mat-display-4{font:300 112px/112px Roboto,\"Helvetica Neue\",sans-serif;letter-spacing:-.05em;margin:0 0 56px}.mat-display-3,.mat-typography .mat-display-3{font:400 56px/56px Roboto,\"Helvetica Neue\",sans-serif;letter-spacing:-.02em;margin:0 0 64px}.mat-display-2,.mat-typography .mat-display-2{font:400 45px/48px Roboto,\"Helvetica Neue\",sans-serif;letter-spacing:-.005em;margin:0 0 64px}.mat-display-1,.mat-typography .mat-display-1{font:400 34px/40px Roboto,\"Helvetica Neue\",sans-serif;margin:0 0 64px}.mat-bottom-sheet-container{font:400 14px/20px Roboto,\"Helvetica Neue\",sans-serif}.mat-button,.mat-fab,.mat-flat-button,.mat-icon-button,.mat-mini-fab,.mat-raised-button,.mat-stroked-button{font-family:Roboto,\"Helvetica Neue\",sans-serif;font-size:14px;font-weight:500}.mat-button-toggle,.mat-card{font-family:Roboto,\"Helvetica Neue\",sans-serif}.mat-card-title{font-size:24px;font-weight:500}.mat-card-header .mat-card-title{font-size:20px}.mat-card-content,.mat-card-subtitle{font-size:14px}.mat-checkbox{font-family:Roboto,\"Helvetica Neue\",sans-serif}.mat-checkbox-layout .mat-checkbox-label{line-height:24px}.mat-chip{font-size:14px;font-weight:500}.mat-chip .mat-chip-remove.mat-icon,.mat-chip .mat-chip-trailing-icon.mat-icon{font-size:18px}.mat-table{font-family:Roboto,\"Helvetica Neue\",sans-serif}.mat-header-cell{font-size:12px;font-weight:500}.mat-cell,.mat-footer-cell{font-size:14px}.mat-calendar{font-family:Roboto,\"Helvetica Neue\",sans-serif}.mat-calendar-body{font-size:13px}.mat-calendar-body-label,.mat-calendar-period-button{font-size:14px;font-weight:500}.mat-calendar-table-header th{font-size:11px;font-weight:400}.mat-dialog-title{font:500 20px/32px Roboto,\"Helvetica Neue\",sans-serif}.mat-expansion-panel-header{font-family:Roboto,\"Helvetica Neue\",sans-serif;font-size:15px;font-weight:400}.mat-expansion-panel-content{font:400 14px/20px Roboto,\"Helvetica Neue\",sans-serif}.mat-form-field{font-size:inherit;font-weight:400;line-height:1.125;font-family:Roboto,\"Helvetica Neue\",sans-serif}.mat-form-field-wrapper{padding-bottom:1.34375em}.mat-form-field-prefix .mat-icon,.mat-form-field-suffix .mat-icon{font-size:150%;line-height:1.125}.mat-form-field-prefix .mat-icon-button,.mat-form-field-suffix .mat-icon-button{height:1.5em;width:1.5em}.mat-form-field-prefix .mat-icon-button .mat-icon,.mat-form-field-suffix .mat-icon-button .mat-icon{height:1.125em;line-height:1.125}.mat-form-field-infix{padding:.5em 0;border-top:.84375em solid transparent}.mat-form-field-can-float .mat-input-server:focus+.mat-form-field-label-wrapper .mat-form-field-label,.mat-form-field-can-float.mat-form-field-should-float .mat-form-field-label{-webkit-transform:translateY(-1.34375em) scale(.75);transform:translateY(-1.34375em) scale(.75);width:133.3333333333%}.mat-form-field-can-float .mat-input-server[label]:not(:label-shown)+.mat-form-field-label-wrapper .mat-form-field-label{-webkit-transform:translateY(-1.34374em) scale(.75);transform:translateY(-1.34374em) scale(.75);width:133.3333433333%}.mat-form-field-label-wrapper{top:-.84375em;padding-top:.84375em}.mat-form-field-label{top:1.34375em}.mat-form-field-underline{bottom:1.34375em}.mat-form-field-subscript-wrapper{font-size:75%;margin-top:.6666666667em;top:calc(100% - 1.7916666667em)}.mat-form-field-appearance-legacy .mat-form-field-wrapper{padding-bottom:1.25em}.mat-form-field-appearance-legacy .mat-form-field-infix{padding:.4375em 0}.mat-form-field-appearance-legacy.mat-form-field-can-float .mat-input-server:focus+.mat-form-field-label-wrapper .mat-form-field-label,.mat-form-field-appearance-legacy.mat-form-field-can-float.mat-form-field-should-float .mat-form-field-label{-webkit-transform:translateY(-1.28125em) scale(.75) perspective(100px) translateZ(.001px);transform:translateY(-1.28125em) scale(.75) perspective(100px) translateZ(.001px);-ms-transform:translateY(-1.28125em) scale(.75);width:133.3333333333%}.mat-form-field-appearance-legacy.mat-form-field-can-float .mat-form-field-autofill-control:-webkit-autofill+.mat-form-field-label-wrapper .mat-form-field-label{-webkit-transform:translateY(-1.28125em) scale(.75) perspective(100px) translateZ(.00101px);transform:translateY(-1.28125em) scale(.75) perspective(100px) translateZ(.00101px);-ms-transform:translateY(-1.28124em) scale(.75);width:133.3333433333%}.mat-form-field-appearance-legacy.mat-form-field-can-float .mat-input-server[label]:not(:label-shown)+.mat-form-field-label-wrapper .mat-form-field-label{-webkit-transform:translateY(-1.28125em) scale(.75) perspective(100px) translateZ(.00102px);transform:translateY(-1.28125em) scale(.75) perspective(100px) translateZ(.00102px);-ms-transform:translateY(-1.28123em) scale(.75);width:133.3333533333%}.mat-form-field-appearance-legacy .mat-form-field-label{top:1.28125em}.mat-form-field-appearance-legacy .mat-form-field-subscript-wrapper{margin-top:.5416666667em;top:calc(100% - 1.6666666667em)}@media print{.mat-form-field-appearance-legacy.mat-form-field-can-float .mat-input-server:focus+.mat-form-field-label-wrapper .mat-form-field-label,.mat-form-field-appearance-legacy.mat-form-field-can-float.mat-form-field-should-float .mat-form-field-label{-webkit-transform:translateY(-1.28122em) scale(.75);transform:translateY(-1.28122em) scale(.75)}.mat-form-field-appearance-legacy.mat-form-field-can-float .mat-form-field-autofill-control:-webkit-autofill+.mat-form-field-label-wrapper .mat-form-field-label{-webkit-transform:translateY(-1.28121em) scale(.75);transform:translateY(-1.28121em) scale(.75)}.mat-form-field-appearance-legacy.mat-form-field-can-float .mat-input-server[label]:not(:label-shown)+.mat-form-field-label-wrapper .mat-form-field-label{-webkit-transform:translateY(-1.2812em) scale(.75);transform:translateY(-1.2812em) scale(.75)}}.mat-form-field-appearance-fill .mat-form-field-infix{padding:.25em 0 .75em}.mat-form-field-appearance-fill .mat-form-field-label{top:1.09375em;margin-top:-.5em}.mat-form-field-appearance-fill.mat-form-field-can-float .mat-input-server:focus+.mat-form-field-label-wrapper .mat-form-field-label,.mat-form-field-appearance-fill.mat-form-field-can-float.mat-form-field-should-float .mat-form-field-label{-webkit-transform:translateY(-.59375em) scale(.75);transform:translateY(-.59375em) scale(.75);width:133.3333333333%}.mat-form-field-appearance-fill.mat-form-field-can-float .mat-input-server[label]:not(:label-shown)+.mat-form-field-label-wrapper .mat-form-field-label{-webkit-transform:translateY(-.59374em) scale(.75);transform:translateY(-.59374em) scale(.75);width:133.3333433333%}.mat-form-field-appearance-outline .mat-form-field-infix{padding:1em 0}.mat-form-field-appearance-outline .mat-form-field-label{top:1.84375em;margin-top:-.25em}.mat-form-field-appearance-outline.mat-form-field-can-float .mat-input-server:focus+.mat-form-field-label-wrapper .mat-form-field-label,.mat-form-field-appearance-outline.mat-form-field-can-float.mat-form-field-should-float .mat-form-field-label{-webkit-transform:translateY(-1.59375em) scale(.75);transform:translateY(-1.59375em) scale(.75);width:133.3333333333%}.mat-form-field-appearance-outline.mat-form-field-can-float .mat-input-server[label]:not(:label-shown)+.mat-form-field-label-wrapper .mat-form-field-label{-webkit-transform:translateY(-1.59374em) scale(.75);transform:translateY(-1.59374em) scale(.75);width:133.3333433333%}.mat-grid-tile-footer,.mat-grid-tile-header{font-size:14px}.mat-grid-tile-footer .mat-line,.mat-grid-tile-header .mat-line{white-space:nowrap;overflow:hidden;text-overflow:ellipsis;display:block;box-sizing:border-box}.mat-grid-tile-footer .mat-line:nth-child(n+2),.mat-grid-tile-header .mat-line:nth-child(n+2){font-size:12px}input.mat-input-element{margin-top:-.0625em}.mat-menu-item{font-family:Roboto,\"Helvetica Neue\",sans-serif;font-size:14px;font-weight:400}.mat-paginator,.mat-paginator-page-size .mat-select-trigger{font-family:Roboto,\"Helvetica Neue\",sans-serif;font-size:12px}.mat-radio-button,.mat-select{font-family:Roboto,\"Helvetica Neue\",sans-serif}.mat-select-trigger{height:1.125em}.mat-slide-toggle-content{font-family:Roboto,\"Helvetica Neue\",sans-serif}.mat-slider-thumb-label-text{font-family:Roboto,\"Helvetica Neue\",sans-serif;font-size:12px;font-weight:500}.mat-stepper-horizontal,.mat-stepper-vertical{font-family:Roboto,\"Helvetica Neue\",sans-serif}.mat-step-label{font-size:14px;font-weight:400}.mat-step-sub-label-error{font-weight:400}.mat-step-label-error{font-size:14px}.mat-step-label-selected{font-size:14px;font-weight:500}.mat-tab-group{font-family:Roboto,\"Helvetica Neue\",sans-serif}.mat-tab-label,.mat-tab-link{font-family:Roboto,\"Helvetica Neue\",sans-serif;font-size:14px;font-weight:500}.mat-toolbar,.mat-toolbar h1,.mat-toolbar h2,.mat-toolbar h3,.mat-toolbar h4,.mat-toolbar h5,.mat-toolbar h6{font:500 20px/32px Roboto,\"Helvetica Neue\",sans-serif;margin:0}.mat-tooltip{font-family:Roboto,\"Helvetica Neue\",sans-serif;font-size:10px;padding-top:6px;padding-bottom:6px}.mat-tooltip-handset{font-size:14px;padding-top:8px;padding-bottom:8px}.mat-list-item,.mat-list-option{font-family:Roboto,\"Helvetica Neue\",sans-serif}.mat-list-base .mat-list-item{font-size:16px}.mat-list-base .mat-list-item .mat-line{white-space:nowrap;overflow:hidden;text-overflow:ellipsis;display:block;box-sizing:border-box}.mat-list-base .mat-list-item .mat-line:nth-child(n+2){font-size:14px}.mat-list-base .mat-list-option{font-size:16px}.mat-list-base .mat-list-option .mat-line{white-space:nowrap;overflow:hidden;text-overflow:ellipsis;display:block;box-sizing:border-box}.mat-list-base .mat-list-option .mat-line:nth-child(n+2){font-size:14px}.mat-list-base .mat-subheader{font-family:Roboto,\"Helvetica Neue\",sans-serif;font-size:14px;font-weight:500}.mat-list-base[dense] .mat-list-item{font-size:12px}.mat-list-base[dense] .mat-list-item .mat-line{white-space:nowrap;overflow:hidden;text-overflow:ellipsis;display:block;box-sizing:border-box}.mat-list-base[dense] .mat-list-item .mat-line:nth-child(n+2),.mat-list-base[dense] .mat-list-option{font-size:12px}.mat-list-base[dense] .mat-list-option .mat-line{white-space:nowrap;overflow:hidden;text-overflow:ellipsis;display:block;box-sizing:border-box}.mat-list-base[dense] .mat-list-option .mat-line:nth-child(n+2){font-size:12px}.mat-list-base[dense] .mat-subheader{font-family:Roboto,\"Helvetica Neue\",sans-serif;font-size:12px;font-weight:500}.mat-option{font-family:Roboto,\"Helvetica Neue\",sans-serif;font-size:16px;color:rgba(0,0,0,.87)}.mat-optgroup-label{font:500 14px/24px Roboto,\"Helvetica Neue\",sans-serif;color:rgba(0,0,0,.54)}.mat-simple-snackbar{font-family:Roboto,\"Helvetica Neue\",sans-serif;font-size:14px}.mat-simple-snackbar-action{line-height:1;font-family:inherit;font-size:inherit;font-weight:500}.mat-tree{font-family:Roboto,\"Helvetica Neue\",sans-serif}.mat-nested-tree-node,.mat-tree-node{font-weight:400;font-size:14px}.mat-ripple{overflow:hidden;position:relative}.mat-ripple.mat-ripple-unbounded{overflow:visible}.mat-ripple-element{position:absolute;border-radius:50%;pointer-events:none;-webkit-transition:opacity,-webkit-transform cubic-bezier(0,0,.2,1);transition:opacity,transform cubic-bezier(0,0,.2,1),-webkit-transform cubic-bezier(0,0,.2,1);-webkit-transform:scale(0);transform:scale(0)}@media (-ms-high-contrast:active){.mat-ripple-element{display:none}}.cdk-visually-hidden{border:0;clip:rect(0 0 0 0);height:1px;margin:-1px;overflow:hidden;padding:0;position:absolute;width:1px;outline:0;-webkit-appearance:none;-moz-appearance:none}.cdk-global-overlay-wrapper,.cdk-overlay-container{pointer-events:none;top:0;left:0;height:100%;width:100%}.cdk-overlay-container{position:fixed;z-index:1000}.cdk-overlay-container:empty{display:none}.cdk-global-overlay-wrapper{display:-webkit-box;display:flex;position:absolute;z-index:1000}.cdk-overlay-pane{position:absolute;pointer-events:auto;box-sizing:border-box;z-index:1000;display:-webkit-box;display:flex;max-width:100%;max-height:100%}.cdk-overlay-backdrop{position:absolute;top:0;bottom:0;left:0;right:0;z-index:1000;pointer-events:auto;-webkit-tap-highlight-color:transparent;-webkit-transition:opacity .4s cubic-bezier(.25,.8,.25,1);transition:opacity .4s cubic-bezier(.25,.8,.25,1);opacity:0}.cdk-overlay-backdrop.cdk-overlay-backdrop-showing{opacity:1}@media screen and (-ms-high-contrast:active){.cdk-overlay-backdrop.cdk-overlay-backdrop-showing{opacity:.6}}.cdk-overlay-dark-backdrop{background:rgba(0,0,0,.32)}.cdk-overlay-transparent-backdrop,.cdk-overlay-transparent-backdrop.cdk-overlay-backdrop-showing{opacity:0}.cdk-overlay-connected-position-bounding-box{position:absolute;z-index:1000;display:-webkit-box;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;flex-direction:column;min-width:1px;min-height:1px}.cdk-global-scrollblock{position:fixed;width:100%;overflow-y:scroll}@-webkit-keyframes cdk-text-field-autofill-start{/*!*/}@keyframes cdk-text-field-autofill-start{/*!*/}@-webkit-keyframes cdk-text-field-autofill-end{/*!*/}@keyframes cdk-text-field-autofill-end{/*!*/}.cdk-text-field-autofill-monitored:-webkit-autofill{-webkit-animation-name:cdk-text-field-autofill-start;animation-name:cdk-text-field-autofill-start}.cdk-text-field-autofill-monitored:not(:-webkit-autofill){-webkit-animation-name:cdk-text-field-autofill-end;animation-name:cdk-text-field-autofill-end}textarea.cdk-textarea-autosize{resize:none}textarea.cdk-textarea-autosize-measuring{height:auto!important;overflow:hidden!important;padding:2px 0!important;box-sizing:content-box!important}.mat-ripple-element{background-color:rgba(0,0,0,.1)}.mat-option.mat-selected:not(.mat-option-multiple):not(.mat-option-disabled),.mat-option:focus:not(.mat-option-disabled),.mat-option:hover:not(.mat-option-disabled){background:rgba(0,0,0,.04)}.mat-option.mat-active{background:rgba(0,0,0,.04);color:rgba(0,0,0,.87)}.mat-option.mat-option-disabled{color:rgba(0,0,0,.38)}.mat-primary .mat-option.mat-selected:not(.mat-option-disabled){color:#3f51b5}.mat-accent .mat-option.mat-selected:not(.mat-option-disabled){color:#ff4081}.mat-warn .mat-option.mat-selected:not(.mat-option-disabled){color:#f44336}.mat-optgroup-disabled .mat-optgroup-label{color:rgba(0,0,0,.38)}.mat-pseudo-checkbox{color:rgba(0,0,0,.54)}.mat-pseudo-checkbox::after{color:#fafafa}.mat-pseudo-checkbox-disabled{color:#b0b0b0}.mat-accent .mat-pseudo-checkbox-checked,.mat-accent .mat-pseudo-checkbox-indeterminate,.mat-pseudo-checkbox-checked,.mat-pseudo-checkbox-indeterminate{background:#ff4081}.mat-primary .mat-pseudo-checkbox-checked,.mat-primary .mat-pseudo-checkbox-indeterminate{background:#3f51b5}.mat-warn .mat-pseudo-checkbox-checked,.mat-warn .mat-pseudo-checkbox-indeterminate{background:#f44336}.mat-pseudo-checkbox-checked.mat-pseudo-checkbox-disabled,.mat-pseudo-checkbox-indeterminate.mat-pseudo-checkbox-disabled{background:#b0b0b0}.mat-elevation-z0{box-shadow:0 0 0 0 rgba(0,0,0,.2),0 0 0 0 rgba(0,0,0,.14),0 0 0 0 rgba(0,0,0,.12)}.mat-elevation-z1{box-shadow:0 2px 1px -1px rgba(0,0,0,.2),0 1px 1px 0 rgba(0,0,0,.14),0 1px 3px 0 rgba(0,0,0,.12)}.mat-elevation-z2{box-shadow:0 3px 1px -2px rgba(0,0,0,.2),0 2px 2px 0 rgba(0,0,0,.14),0 1px 5px 0 rgba(0,0,0,.12)}.mat-elevation-z3{box-shadow:0 3px 3px -2px rgba(0,0,0,.2),0 3px 4px 0 rgba(0,0,0,.14),0 1px 8px 0 rgba(0,0,0,.12)}.mat-elevation-z4{box-shadow:0 2px 4px -1px rgba(0,0,0,.2),0 4px 5px 0 rgba(0,0,0,.14),0 1px 10px 0 rgba(0,0,0,.12)}.mat-elevation-z5{box-shadow:0 3px 5px -1px rgba(0,0,0,.2),0 5px 8px 0 rgba(0,0,0,.14),0 1px 14px 0 rgba(0,0,0,.12)}.mat-elevation-z6{box-shadow:0 3px 5px -1px rgba(0,0,0,.2),0 6px 10px 0 rgba(0,0,0,.14),0 1px 18px 0 rgba(0,0,0,.12)}.mat-elevation-z7{box-shadow:0 4px 5px -2px rgba(0,0,0,.2),0 7px 10px 1px rgba(0,0,0,.14),0 2px 16px 1px rgba(0,0,0,.12)}.mat-elevation-z8{box-shadow:0 5px 5px -3px rgba(0,0,0,.2),0 8px 10px 1px rgba(0,0,0,.14),0 3px 14px 2px rgba(0,0,0,.12)}.mat-elevation-z9{box-shadow:0 5px 6px -3px rgba(0,0,0,.2),0 9px 12px 1px rgba(0,0,0,.14),0 3px 16px 2px rgba(0,0,0,.12)}.mat-elevation-z10{box-shadow:0 6px 6px -3px rgba(0,0,0,.2),0 10px 14px 1px rgba(0,0,0,.14),0 4px 18px 3px rgba(0,0,0,.12)}.mat-elevation-z11{box-shadow:0 6px 7px -4px rgba(0,0,0,.2),0 11px 15px 1px rgba(0,0,0,.14),0 4px 20px 3px rgba(0,0,0,.12)}.mat-elevation-z12{box-shadow:0 7px 8px -4px rgba(0,0,0,.2),0 12px 17px 2px rgba(0,0,0,.14),0 5px 22px 4px rgba(0,0,0,.12)}.mat-elevation-z13{box-shadow:0 7px 8px -4px rgba(0,0,0,.2),0 13px 19px 2px rgba(0,0,0,.14),0 5px 24px 4px rgba(0,0,0,.12)}.mat-elevation-z14{box-shadow:0 7px 9px -4px rgba(0,0,0,.2),0 14px 21px 2px rgba(0,0,0,.14),0 5px 26px 4px rgba(0,0,0,.12)}.mat-elevation-z15{box-shadow:0 8px 9px -5px rgba(0,0,0,.2),0 15px 22px 2px rgba(0,0,0,.14),0 6px 28px 5px rgba(0,0,0,.12)}.mat-elevation-z16{box-shadow:0 8px 10px -5px rgba(0,0,0,.2),0 16px 24px 2px rgba(0,0,0,.14),0 6px 30px 5px rgba(0,0,0,.12)}.mat-elevation-z17{box-shadow:0 8px 11px -5px rgba(0,0,0,.2),0 17px 26px 2px rgba(0,0,0,.14),0 6px 32px 5px rgba(0,0,0,.12)}.mat-elevation-z18{box-shadow:0 9px 11px -5px rgba(0,0,0,.2),0 18px 28px 2px rgba(0,0,0,.14),0 7px 34px 6px rgba(0,0,0,.12)}.mat-elevation-z19{box-shadow:0 9px 12px -6px rgba(0,0,0,.2),0 19px 29px 2px rgba(0,0,0,.14),0 7px 36px 6px rgba(0,0,0,.12)}.mat-elevation-z20{box-shadow:0 10px 13px -6px rgba(0,0,0,.2),0 20px 31px 3px rgba(0,0,0,.14),0 8px 38px 7px rgba(0,0,0,.12)}.mat-elevation-z21{box-shadow:0 10px 13px -6px rgba(0,0,0,.2),0 21px 33px 3px rgba(0,0,0,.14),0 8px 40px 7px rgba(0,0,0,.12)}.mat-elevation-z22{box-shadow:0 10px 14px -6px rgba(0,0,0,.2),0 22px 35px 3px rgba(0,0,0,.14),0 8px 42px 7px rgba(0,0,0,.12)}.mat-elevation-z23{box-shadow:0 11px 14px -7px rgba(0,0,0,.2),0 23px 36px 3px rgba(0,0,0,.14),0 9px 44px 8px rgba(0,0,0,.12)}.mat-elevation-z24{box-shadow:0 11px 15px -7px rgba(0,0,0,.2),0 24px 38px 3px rgba(0,0,0,.14),0 9px 46px 8px rgba(0,0,0,.12)}.mat-app-background{background-color:#fafafa;color:rgba(0,0,0,.87)}.mat-theme-loaded-marker{display:none}.mat-button,.mat-icon-button,.mat-stroked-button{color:inherit;background:0 0}.mat-button.mat-primary,.mat-icon-button.mat-primary,.mat-stroked-button.mat-primary{color:#3f51b5}.mat-button.mat-accent,.mat-icon-button.mat-accent,.mat-stroked-button.mat-accent{color:#ff4081}.mat-button.mat-warn,.mat-icon-button.mat-warn,.mat-stroked-button.mat-warn{color:#f44336}.mat-button.mat-accent[disabled],.mat-button.mat-primary[disabled],.mat-button.mat-warn[disabled],.mat-button[disabled][disabled],.mat-icon-button.mat-accent[disabled],.mat-icon-button.mat-primary[disabled],.mat-icon-button.mat-warn[disabled],.mat-icon-button[disabled][disabled],.mat-stroked-button.mat-accent[disabled],.mat-stroked-button.mat-primary[disabled],.mat-stroked-button.mat-warn[disabled],.mat-stroked-button[disabled][disabled]{color:rgba(0,0,0,.26)}.mat-button.mat-primary .mat-button-focus-overlay,.mat-icon-button.mat-primary .mat-button-focus-overlay,.mat-stroked-button.mat-primary .mat-button-focus-overlay{background-color:#3f51b5}.mat-button.mat-accent .mat-button-focus-overlay,.mat-icon-button.mat-accent .mat-button-focus-overlay,.mat-stroked-button.mat-accent .mat-button-focus-overlay{background-color:#ff4081}.mat-button.mat-warn .mat-button-focus-overlay,.mat-icon-button.mat-warn .mat-button-focus-overlay,.mat-stroked-button.mat-warn .mat-button-focus-overlay{background-color:#f44336}.mat-button[disabled] .mat-button-focus-overlay,.mat-icon-button[disabled] .mat-button-focus-overlay,.mat-stroked-button[disabled] .mat-button-focus-overlay{background-color:transparent}.mat-button .mat-ripple-element,.mat-icon-button .mat-ripple-element,.mat-stroked-button .mat-ripple-element{opacity:.1;background-color:currentColor}.mat-button-focus-overlay{background:#000}.mat-stroked-button:not([disabled]){border-color:rgba(0,0,0,.12)}.mat-fab,.mat-flat-button,.mat-mini-fab,.mat-raised-button{color:rgba(0,0,0,.87);background-color:#fff}.mat-fab.mat-accent,.mat-fab.mat-primary,.mat-fab.mat-warn,.mat-flat-button.mat-accent,.mat-flat-button.mat-primary,.mat-flat-button.mat-warn,.mat-mini-fab.mat-accent,.mat-mini-fab.mat-primary,.mat-mini-fab.mat-warn,.mat-raised-button.mat-accent,.mat-raised-button.mat-primary,.mat-raised-button.mat-warn{color:#fff}.mat-fab.mat-accent[disabled],.mat-fab.mat-primary[disabled],.mat-fab.mat-warn[disabled],.mat-fab[disabled][disabled],.mat-flat-button.mat-accent[disabled],.mat-flat-button.mat-primary[disabled],.mat-flat-button.mat-warn[disabled],.mat-flat-button[disabled][disabled],.mat-mini-fab.mat-accent[disabled],.mat-mini-fab.mat-primary[disabled],.mat-mini-fab.mat-warn[disabled],.mat-mini-fab[disabled][disabled],.mat-raised-button.mat-accent[disabled],.mat-raised-button.mat-primary[disabled],.mat-raised-button.mat-warn[disabled],.mat-raised-button[disabled][disabled]{color:rgba(0,0,0,.26);background-color:rgba(0,0,0,.12)}.mat-fab.mat-primary,.mat-flat-button.mat-primary,.mat-mini-fab.mat-primary,.mat-raised-button.mat-primary{background-color:#3f51b5}.mat-fab.mat-accent,.mat-flat-button.mat-accent,.mat-mini-fab.mat-accent,.mat-raised-button.mat-accent{background-color:#ff4081}.mat-fab.mat-warn,.mat-flat-button.mat-warn,.mat-mini-fab.mat-warn,.mat-raised-button.mat-warn{background-color:#f44336}.mat-fab.mat-accent .mat-ripple-element,.mat-fab.mat-primary .mat-ripple-element,.mat-fab.mat-warn .mat-ripple-element,.mat-flat-button.mat-accent .mat-ripple-element,.mat-flat-button.mat-primary .mat-ripple-element,.mat-flat-button.mat-warn .mat-ripple-element,.mat-mini-fab.mat-accent .mat-ripple-element,.mat-mini-fab.mat-primary .mat-ripple-element,.mat-mini-fab.mat-warn .mat-ripple-element,.mat-raised-button.mat-accent .mat-ripple-element,.mat-raised-button.mat-primary .mat-ripple-element,.mat-raised-button.mat-warn .mat-ripple-element{background-color:rgba(255,255,255,.1)}.mat-flat-button:not([class*=mat-elevation-z]),.mat-stroked-button:not([class*=mat-elevation-z]){box-shadow:0 0 0 0 rgba(0,0,0,.2),0 0 0 0 rgba(0,0,0,.14),0 0 0 0 rgba(0,0,0,.12)}.mat-raised-button:not([class*=mat-elevation-z]){box-shadow:0 3px 1px -2px rgba(0,0,0,.2),0 2px 2px 0 rgba(0,0,0,.14),0 1px 5px 0 rgba(0,0,0,.12)}.mat-raised-button:not([disabled]):active:not([class*=mat-elevation-z]){box-shadow:0 5px 5px -3px rgba(0,0,0,.2),0 8px 10px 1px rgba(0,0,0,.14),0 3px 14px 2px rgba(0,0,0,.12)}.mat-raised-button[disabled]:not([class*=mat-elevation-z]){box-shadow:0 0 0 0 rgba(0,0,0,.2),0 0 0 0 rgba(0,0,0,.14),0 0 0 0 rgba(0,0,0,.12)}.mat-fab:not([class*=mat-elevation-z]),.mat-mini-fab:not([class*=mat-elevation-z]){box-shadow:0 3px 5px -1px rgba(0,0,0,.2),0 6px 10px 0 rgba(0,0,0,.14),0 1px 18px 0 rgba(0,0,0,.12)}.mat-fab:not([disabled]):active:not([class*=mat-elevation-z]),.mat-mini-fab:not([disabled]):active:not([class*=mat-elevation-z]){box-shadow:0 7px 8px -4px rgba(0,0,0,.2),0 12px 17px 2px rgba(0,0,0,.14),0 5px 22px 4px rgba(0,0,0,.12)}.mat-fab[disabled]:not([class*=mat-elevation-z]),.mat-mini-fab[disabled]:not([class*=mat-elevation-z]){box-shadow:0 0 0 0 rgba(0,0,0,.2),0 0 0 0 rgba(0,0,0,.14),0 0 0 0 rgba(0,0,0,.12)}.mat-checkbox-frame{border-color:rgba(0,0,0,.54)}.mat-checkbox-checkmark{fill:#fafafa}.mat-checkbox-checkmark-path{stroke:#fafafa!important}@media (-ms-high-contrast:black-on-white){.mat-checkbox-checkmark-path{stroke:#000!important}}.mat-checkbox-mixedmark{background-color:#fafafa}.mat-checkbox-checked.mat-primary .mat-checkbox-background,.mat-checkbox-indeterminate.mat-primary .mat-checkbox-background{background-color:#3f51b5}.mat-checkbox-checked.mat-accent .mat-checkbox-background,.mat-checkbox-indeterminate.mat-accent .mat-checkbox-background{background-color:#ff4081}.mat-checkbox-checked.mat-warn .mat-checkbox-background,.mat-checkbox-indeterminate.mat-warn .mat-checkbox-background{background-color:#f44336}.mat-checkbox-disabled.mat-checkbox-checked .mat-checkbox-background,.mat-checkbox-disabled.mat-checkbox-indeterminate .mat-checkbox-background{background-color:#b0b0b0}.mat-checkbox-disabled:not(.mat-checkbox-checked) .mat-checkbox-frame{border-color:#b0b0b0}.mat-checkbox-disabled .mat-checkbox-label{color:rgba(0,0,0,.54)}@media (-ms-high-contrast:active){.mat-checkbox-disabled{opacity:.5}.mat-checkbox-background{background:0 0}}.mat-checkbox .mat-ripple-element{background-color:#000}.mat-checkbox-checked:not(.mat-checkbox-disabled).mat-primary .mat-ripple-element,.mat-checkbox:active:not(.mat-checkbox-disabled).mat-primary .mat-ripple-element{background:#3f51b5}.mat-checkbox-checked:not(.mat-checkbox-disabled).mat-accent .mat-ripple-element,.mat-checkbox:active:not(.mat-checkbox-disabled).mat-accent .mat-ripple-element{background:#ff4081}.mat-checkbox-checked:not(.mat-checkbox-disabled).mat-warn .mat-ripple-element,.mat-checkbox:active:not(.mat-checkbox-disabled).mat-warn .mat-ripple-element{background:#f44336}.mat-form-field-label,.mat-hint{color:rgba(0,0,0,.6)}.mat-form-field.mat-focused .mat-form-field-label{color:#3f51b5}.mat-form-field.mat-focused .mat-form-field-label.mat-accent{color:#ff4081}.mat-form-field.mat-focused .mat-form-field-label.mat-warn{color:#f44336}.mat-focused .mat-form-field-required-marker{color:#ff4081}.mat-form-field-ripple{background-color:rgba(0,0,0,.87)}.mat-form-field.mat-focused .mat-form-field-ripple{background-color:#3f51b5}.mat-form-field.mat-focused .mat-form-field-ripple.mat-accent{background-color:#ff4081}.mat-form-field.mat-focused .mat-form-field-ripple.mat-warn{background-color:#f44336}.mat-form-field-type-mat-native-select.mat-focused:not(.mat-form-field-invalid) .mat-form-field-infix::after{color:#3f51b5}.mat-form-field-type-mat-native-select.mat-focused:not(.mat-form-field-invalid).mat-accent .mat-form-field-infix::after{color:#ff4081}.mat-form-field-type-mat-native-select.mat-focused:not(.mat-form-field-invalid).mat-warn .mat-form-field-infix::after,.mat-form-field.mat-form-field-invalid .mat-form-field-label,.mat-form-field.mat-form-field-invalid .mat-form-field-label .mat-form-field-required-marker,.mat-form-field.mat-form-field-invalid .mat-form-field-label.mat-accent{color:#f44336}.mat-form-field.mat-form-field-invalid .mat-form-field-ripple,.mat-form-field.mat-form-field-invalid .mat-form-field-ripple.mat-accent{background-color:#f44336}.mat-error{color:#f44336}.mat-form-field-appearance-legacy .mat-form-field-label,.mat-form-field-appearance-legacy .mat-hint{color:rgba(0,0,0,.54)}.mat-form-field-appearance-legacy .mat-form-field-underline{bottom:1.25em;background-color:rgba(0,0,0,.42)}.mat-form-field-appearance-legacy.mat-form-field-disabled .mat-form-field-underline{background-image:-webkit-gradient(linear,left top,right top,from(rgba(0,0,0,.42)),color-stop(33%,rgba(0,0,0,.42)),color-stop(0,transparent));background-image:linear-gradient(to right,rgba(0,0,0,.42) 0,rgba(0,0,0,.42) 33%,transparent 0);background-size:4px 100%;background-repeat:repeat-x}.mat-form-field-appearance-standard .mat-form-field-underline{background-color:rgba(0,0,0,.42)}.mat-form-field-appearance-standard.mat-form-field-disabled .mat-form-field-underline{background-image:-webkit-gradient(linear,left top,right top,from(rgba(0,0,0,.42)),color-stop(33%,rgba(0,0,0,.42)),color-stop(0,transparent));background-image:linear-gradient(to right,rgba(0,0,0,.42) 0,rgba(0,0,0,.42) 33%,transparent 0);background-size:4px 100%;background-repeat:repeat-x}.mat-form-field-appearance-fill .mat-form-field-flex{background-color:rgba(0,0,0,.04)}.mat-form-field-appearance-fill.mat-form-field-disabled .mat-form-field-flex{background-color:rgba(0,0,0,.02)}.mat-form-field-appearance-fill .mat-form-field-underline::before{background-color:rgba(0,0,0,.42)}.mat-form-field-appearance-fill.mat-form-field-disabled .mat-form-field-label{color:rgba(0,0,0,.38)}.mat-form-field-appearance-fill.mat-form-field-disabled .mat-form-field-underline::before{background-color:transparent}.mat-form-field-appearance-outline .mat-form-field-outline{color:rgba(0,0,0,.12)}.mat-form-field-appearance-outline .mat-form-field-outline-thick{color:rgba(0,0,0,.87)}.mat-form-field-appearance-outline.mat-focused .mat-form-field-outline-thick{color:#3f51b5}.mat-form-field-appearance-outline.mat-focused.mat-accent .mat-form-field-outline-thick{color:#ff4081}.mat-form-field-appearance-outline.mat-focused.mat-warn .mat-form-field-outline-thick,.mat-form-field-appearance-outline.mat-form-field-invalid.mat-form-field-invalid .mat-form-field-outline-thick{color:#f44336}.mat-form-field-appearance-outline.mat-form-field-disabled .mat-form-field-label{color:rgba(0,0,0,.38)}.mat-form-field-appearance-outline.mat-form-field-disabled .mat-form-field-outline{color:rgba(0,0,0,.06)}.mat-form-field-type-mat-native-select .mat-form-field-infix::after{color:rgba(0,0,0,.54)}.mat-form-field-type-mat-native-select.mat-form-field-disabled .mat-form-field-infix::after,.mat-input-element:disabled{color:rgba(0,0,0,.38)}.mat-input-element{caret-color:#3f51b5}.mat-input-element::-ms-input-placeholder{color:rgba(0,0,0,.42)}.mat-input-element::placeholder{color:rgba(0,0,0,.42)}.mat-input-element::-moz-placeholder{color:rgba(0,0,0,.42)}.mat-input-element::-webkit-input-placeholder{color:rgba(0,0,0,.42)}.mat-input-element:-ms-input-placeholder{color:rgba(0,0,0,.42)}.mat-accent .mat-input-element{caret-color:#ff4081}.mat-form-field-invalid .mat-input-element,.mat-warn .mat-input-element{caret-color:#f44336}.mat-form-field-type-mat-native-select.mat-form-field-invalid .mat-form-field-infix::after{color:#f44336}.mat-select-value{color:rgba(0,0,0,.87)}.mat-select-placeholder{color:rgba(0,0,0,.42)}.mat-select-disabled .mat-select-value{color:rgba(0,0,0,.38)}.mat-select-arrow{color:rgba(0,0,0,.54)}.mat-select-panel{background:#fff}.mat-select-panel:not([class*=mat-elevation-z]){box-shadow:0 2px 4px -1px rgba(0,0,0,.2),0 4px 5px 0 rgba(0,0,0,.14),0 1px 10px 0 rgba(0,0,0,.12)}.mat-select-panel .mat-option.mat-selected:not(.mat-option-multiple){background:rgba(0,0,0,.12)}.mat-form-field.mat-focused.mat-primary .mat-select-arrow{color:#3f51b5}.mat-form-field.mat-focused.mat-accent .mat-select-arrow{color:#ff4081}.mat-form-field .mat-select.mat-select-invalid .mat-select-arrow,.mat-form-field.mat-focused.mat-warn .mat-select-arrow{color:#f44336}.mat-form-field .mat-select.mat-select-disabled .mat-select-arrow{color:rgba(0,0,0,.38)}", ".flip-container{-webkit-perspective:1000px;perspective:1000px}.flip-container.flipit .flipper{-webkit-transform:rotateY(180deg);transform:rotateY(180deg)}.flip-container,.flip-container .back,.flip-container .front{width:100%;height:900px}.flip-container .flipper{-webkit-transition:1s ease-out;transition:1s ease-out;-webkit-transform-style:preserve-3d;transform-style:preserve-3d;position:relative}.flip-container .back,.flip-container .front{-webkit-backface-visibility:hidden;backface-visibility:hidden;position:absolute;top:0;left:0}.flip-container .front{z-index:2;-webkit-transform:rotateY(0);transform:rotateY(0)}.flip-container .front .err{font-size:10px;color:red;font-family:monospace}.flip-container .back{-webkit-transform:rotateY(180deg);transform:rotateY(180deg);box-shadow:inset 0 0 7px #000;overflow:scroll}.flexcol{margin:20px 30px;display:-webkit-box;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;flex-flow:column}.flexcol>*{margin-top:10px;-webkit-box-flex:1;flex-grow:1}.flexrow{display:-webkit-box;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;flex-flow:row wrap}.flexrow>*{margin-top:10px;-webkit-box-flex:0;flex:0 0 48%;margin-right:2%}.flexrow>button{margin-top:10px;margin-left:20px;-webkit-box-flex:0;flex:0 0 1}.header{background:#0081cb;color:#fff;padding:5px 30px;display:-webkit-box;display:flex;-webkit-box-align:center;align-items:center}.editdiv{font-size:9px;color:#666;float:right;padding:10px;font-family:monospace}.editdiv span{font-size:10px;border:1px solid #0081cb;border-radius:5px;padding:0 5px;color:#0081cb}.editdiv span:hover{cursor:pointer;color:#fff;background-color:#0081cb}"]
            }] }
];
/** @nocollapse */
SpotfireEditorComponent.ctorParameters = () => [
    { type: FormBuilder },
    { type: PersistanceService },
    { type: DocumentService }
];
if (false) {
    /** @type {?} */
    SpotfireEditorComponent.prototype.form;
    /**
     * When user hits Update button, depending on what settings are modified, call the right level of
     * method to update the dashboard
     * @type {?}
     */
    SpotfireEditorComponent.prototype.dataTables;
    /** @type {?} */
    SpotfireEditorComponent.prototype.pages;
    /** @type {?} */
    SpotfireEditorComponent.prototype.possibleValues;
    /** @type {?} */
    SpotfireEditorComponent.prototype.custLabels;
    /** @type {?} */
    SpotfireEditorComponent.prototype.update;
    /** @type {?} */
    SpotfireEditorComponent.prototype.fb;
    /**
     * @type {?}
     * @private
     */
    SpotfireEditorComponent.prototype.storSvc;
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoic3BvdGZpcmUtZWRpdG9yLmNvbXBvbmVudC5qcyIsInNvdXJjZVJvb3QiOiJuZzovL0B0aWJjby9zcG90ZmlyZS13cmFwcGVyLyIsInNvdXJjZXMiOlsibGliL2VkaXRvci9zcG90ZmlyZS1lZGl0b3IuY29tcG9uZW50LnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7Ozs7QUFBQSxPQUFPLEVBQUUsU0FBUyxFQUFFLGlCQUFpQixFQUFFLE1BQU0sZUFBZSxDQUFDO0FBQzdELE9BQU8sRUFBRSxTQUFTLEVBQUUsVUFBVSxFQUFFLFdBQVcsRUFBRSxXQUFXLEVBQUUsTUFBTSxnQkFBZ0IsQ0FBQztBQUVqRixPQUFPLEVBQUUscUJBQXFCLEVBQUUsY0FBYyxFQUFFLE1BQU0sMkJBQTJCLENBQUM7QUFDbEYsT0FBTyxFQUF1QixVQUFVLEVBQUUsTUFBTSx1QkFBdUIsQ0FBQztBQUN4RSxPQUFPLEVBQUUsa0JBQWtCLEVBQUUsTUFBTSx1QkFBdUIsQ0FBQztBQUMzRCxPQUFPLEVBQUUsdUJBQXVCLEVBQUUsTUFBTSxxQ0FBcUMsQ0FBQztBQUM5RSxPQUFPLEVBQUUsZUFBZSxFQUFFLE1BQU0scUJBQXFCLENBQUM7QUFTdEQsTUFBTSxPQUFPLHVCQUF3QixTQUFRLHVCQUF1Qjs7Ozs7O0lBV2hFLFlBQW1CLEVBQWUsRUFBVSxPQUEyQixFQUFFLENBQWtCO1FBQ3ZGLEtBQUssQ0FBQyxDQUFDLENBQUMsQ0FBQztRQURNLE9BQUUsR0FBRixFQUFFLENBQWE7UUFBVSxZQUFPLEdBQVAsT0FBTyxDQUFvQjs7Ozs7UUFMdkUsZUFBVSxHQUFHLEVBQUUsQ0FBQztRQUNoQixVQUFLLEdBQUcsRUFBRSxDQUFDO1FBQ1gsbUJBQWMsR0FBRyxFQUFFLENBQUM7UUFDcEIsZUFBVSxHQUFHLFVBQVUsQ0FBQztRQU14QixXQUFNOzs7O1FBQUcsQ0FBQyxDQUFDLEVBQUUsRUFBRTtZQUNYLElBQUksQ0FBQyxJQUFJLEdBQUcsS0FBSyxDQUFDO1lBQ2xCLENBQUMsQ0FBQyxlQUFlLEVB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QVEsRUFBRSxnQkFBZ0I7Z0JBQzFCLGFBQWEsRUFBRSxpQkFBaUIsQ0FBQyxJQUFJOzthQUV4Qzs7OztZQWQ0QyxXQUFXO1lBSS9DLGtCQUFrQjtZQUVsQixlQUFlOzs7O0lBVXBCLHVDQUFnQjs7Ozs7O0lBS2hCLDZDQUFnQjs7SUFDaEIsd0NBQVc7O0lBQ1gsaURBQW9COztJQUNwQiw2Q0FBd0I7O0lBTXhCLHlDQWlEQzs7SUFyRFcscUNBQXNCOzs7OztJQUFFLDBDQUFtQyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IENvbXBvbmVudCwgVmlld0VuY2Fwc3VsYXRpb24gfSBmcm9tICdAYW5ndWxhci9jb3JlJztcbmltcG9ydCB7IEZvcm1Hcm91cCwgVmFsaWRhdG9ycywgRm9ybUNvbnRyb2wsIEZvcm1CdWlsZGVyIH0gZnJvbSAnQGFuZ3VsYXIvZm9ybXMnO1xuXG5pbXBvcnQgeyBTcG90ZmlyZUN1c3RvbWl6YXRpb24sIFNwb3RmaXJlRmlsdGVyIH0gZnJvbSAnLi4vc3BvdGZpcmUtY3VzdG9taXphdGlvbic7XG5pbXBvcnQgeyBEb2N1bWVudCBhcyBTcG90RG9jLCBDVVNUTEFCRUxTIH0gZnJvbSAnLi4vc3BvdGZpcmUtd2VicGxheWVyJztcbmltcG9ydCB7IFBlcnNpc3RhbmNlU2VydmljZSB9IGZyb20gJy4uL3BlcnNpdGVuY2Uuc2VydmljZSc7XG5pbXBvcnQgeyBTcG90ZmlyZVZpZXdlckNvbXBvbmVudCB9IGZyb20gJy4uL3ZpZXdlci9zcG90ZmlyZS12aWV3ZXIuY29tcG9uZW50JztcbmltcG9ydCB7IERvY3VtZW50U2VydmljZSB9IGZyb20gJy4uL2RvY3VtZW50LnNlcnZpY2UnO1xuXG5AQ29tcG9uZW50KHtcbiAgICBzZWxlY3RvcjogJ3Nwb3RmaXJlLWVkaXRvcicsXG4gICAgdGVtcGxhdGVVcmw6ICdzcG90ZmlyZS1lZGl0b3IuY29tcG9uZW50Lmh0bWwnLFxuICAgIGV4cG9ydEFzOiAnc3BvdGZpcmVFZGl0b3InLFxuICAgIGVuY2Fwc3VsYXRpb246IFZpZXdFbmNhcHN1bGF0aW9uLk5vbmUsXG4gICAgc3R5bGVVcmxzOiBbJy4vbXktdGhlbWUuc2NzcycsICcuL3Nwb3RmaXJlLWVkaXRvci5jb21wb25lbnQuc2NzcyddXG59KVxuZXhwb3J0IGNsYXNzIFNwb3RmaXJlRWRpdG9yQ29tcG9uZW50IGV4dGVuZHMgU3BvdGZpcmVWaWV3ZXJDb21wb25lbnQge1xuICAgIGZvcm06IEZvcm1Hcm91cDtcbiAgICAvKipcbiAgICAgICogV2hlbiB1c2VyIGhpdHMgVXBkYXRlIGJ1dHRvbiwgZGVwZW5kaW5nIG9uIHdoYXQgc2V0dGluZ3MgYXJlIG1vZGlmaWVkLCBjYWxsIHRoZSByaWdodCBsZXZlbCBvZlxuICAgICAgKiBtZXRob2QgdG8gdXBkYXRlIHRoZSBkYXNoYm9hcmRcbiAgICAgICovXG4gICAgZGF0YVRhYmxlcyA9IHt9O1xuICAgIHBhZ2VzID0gW107XG4gICAgcG9zc2libGVWYWx1ZXMgPSAnJztcbiAgICBjdXN0TGFiZWxzID0gQ1VTVExBQkVMUztcblxuICAgIGNvbnN0cnVjdG9yKHB1YmxpYyBmYjogRm9ybUJ1aWxkZXIsIHByaXZhdGUgc3RvclN2YzogUGVyc2lzdGFuY2VTZXJ2aWNlLCBkOiBEb2N1bWVudFNlcnZpY2UpIHtcbiAgICAgICAgc3VwZXIoZCk7XG4gICAgfVxuXG4gICAgdXBkYXRlID0gKGUpID0+IHtcbiAgICAgICAgdGhpcy5lZGl0ID0gZmFsc2U7XG4gICAgICAgIGUuc3RvcFByb3BhZ2F0aW9uKCk7XG4gICAgICAgIGNvbnN0IGlzRCA9ICh6KSA9PiB0aGlzLmZvcm0uZ2V0KHopLmRpcnR5O1xuICAgICAgICBjb25zdCBvbmx5VHJ1ZVByb3BzID0gKHQpID0+IE9iamVjdC5rZXlzKHQpLmZpbHRlcihrZXkgPT4gdFtrZXldID09PSB0cnVlKVxuICAgICAgICAgICAgLnJlZHVjZSgob2JqLCBrZXkpID0+IHsgb2JqW2tleV0gPSB0W2tleV07IHJldHVybiBvYmo7IH0sIHt9KTtcbiAgICAgICAgY29uc29sZS5sb2coJ1tTUE9URklSRS1FRElUT1JdIFNwb3RmaXJlRWRpdG9yQ29tcG9uZW50IFVwZGF0ZScsIHRoaXMuZm9ybS5nZXRSYXdWYWx1ZSgpLFxuICAgICAgICAgICAgYHU6JHtpc0QoJ3VybCcpfSwgcDoke2lzRCgncGF0aCcpfSwgYToke2lzRCgncGFnZScpfSwgYzoke2lzRCgnY3VzdCcpfSwgZjoke2lzRCgnZmlsdGVycycpfSwgbToke2lzRCgnbWFya2luZycpfWApO1xuICAgICAgICBjb25zdCBjdXMgPSBuZXcgU3BvdGZpcmVDdXN0b21pemF0aW9uKHRoaXMuZm9ybS5nZXQoJ2N1c3QnKS52YWx1ZSk7XG4gICAgICAgIGlmIChpc0QoJ3VybCcpKSB7XG4gICAgICAgICAgICB0aGlzLmRvY1N2Yy5vcGVuV2ViUGxheWVyJCh0aGlzLnNwb3RQYXJhbXMpLnN1YnNjcmliZSgpO1xuICAgICAgICAgICAgLy8gICAgICAgICAgICB0aGlzLm9wZW5XZWJQbGF5ZXIodGhpcy5mb3JtLmdldCgndXJsJykudmFsdWUsIHRoaXMuZm9ybS5nZXQoJ3BhdGgnKS52YWx1ZSwgY3VzKTtcbiAgICAgICAgfSBlbHNlIGlmIChpc0QoJ3BhdGgnKSB8fCBpc0QoJ2ZpbHRlcnMnKSB8fCBpc0QoJ21hcmtpbmcnKSB8fCBpc0QoJ2N1c3QnKSkge1xuICAgICAgICAgICAgdGhpcy5wYXRoID0gaXNEKCdwYXRoJykgPyB0aGlzLmZvcm0uZ2V0KCdwYXRoJykudmFsdWUgOiB0aGlzLnBhdGg7XG4gICAgICAgICAgICB0aGlzLnBhZ2UgPSBpc0QoJ3BhZ2UnKSA/IHRoaXMuZm9ybS5nZXQoJ3BhZ2UnKS52YWx1ZSA6IHRoaXMucGFnZTtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKCdbU1BPVEZJUkUtRURJVE9SXSBNYXJraW5nIDogJywgdGhpcy5mb3JtLmdldCgnbWFya2luZycpLnZhbHVlKTtcbiAgICAgICAgICAgIHRoaXMuY3VzdG9taXphdGlvbiA9IGN1cztcbiAgICAgICAgICAgIHRoaXMucGFnZXMgPSBbXTtcbiAgICAgICAgICAgIGNvbnN0IGFsbEZpbHRlcnM6IEFycmF5PFNwb3RmaXJlRmlsdGVyPiA9IFtdO1xuICAgICAgICAgICAgaWYgKHRoaXMuZm9ybS5nZXQoJ2ZpbHRlcnMnKS52YWx1ZSkge1xuICAgICAgICAgICAgICAgIGNvbnN0IGZsdGVyc1ZhbHVlID0gdGhpcy5mb3JtLmdldCgnZmlsdGVycycpLnZhbHVlO1xuICAgICAgICAgICAgICAgIE9iamVjdC5rZXlzKGZsdGVyc1ZhbHVlKS5mb3JFYWNoKGRhdGFUYWJsZU5hbWUgPT4ge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBmbHQgPSBmbHRlcnNWYWx1ZVtkYXRhVGFibGVOYW1lXTtcbiAgICAgICAgICAgICAgICAgICAgT2JqZWN0LmtleXMoZmx0KS5mb3JFYWNoKGRhdGFDb2x1bW5OYW1lID0+XG4gICAgICAgICAgICAgICAgICAgICAgICBhbGxGaWx0ZXJzLnB1c2gobmV3IFNwb3RmaXJlRmlsdGVyKHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkYXRhVGFibGVOYW1lOiBkYXRhVGFibGVOYW1lLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRhdGFDb2x1bW5OYW1lOiBkYXRhQ29sdW1uTmFtZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmaWx0ZXJTZXR0aW5nczogeyB2YWx1ZXM6IGZsdFtkYXRhQ29sdW1uTmFtZV0gfVxuICAgICAgICAgICAgICAgICAgICAgICAgfSkpKTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMuZmlsdGVycyA9IGFsbEZpbHRlcnM7XG4gICAgICAgICAgICBpZiAodGhpcy5zaWQpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnN0b3JTdmMuc2V0KCd1cmwnLCB0aGlzLmZvcm0uZ2V0KCd1cmwnKS52YWx1ZSk7XG4gICAgICAgICAgICAgICAgdGhpcy5zdG9yU3ZjLnNldCgncGF0aCcsIHRoaXMuZm9ybS5nZXQoJ3BhdGgnKS52YWx1ZSk7XG4gICAgICAgICAgICAgICAgdGhpcy5zdG9yU3ZjLnNldCgncGFnZScsIHRoaXMuZm9ybS5nZXQoJ3BhZ2UnKS52YWx1ZSk7XG4gICAgICAgICAgICAgICAgdGhpcy5zdG9yU3ZjLnNldCgnY3VzdCcsIG9ubHlUcnVlUHJvcHModGhpcy5jdXN0b21pemF0aW9uKSk7XG4gICAgICAgICAgICAgICAgdGhpcy5zdG9yU3ZjLnNldCgnZmx0cycsIHRoaXMuZmlsdGVycyk7XG4gICAgICAgICAgICAgICAgdGhpcy5zdG9yU3ZjLnNldCgnbWFyaycsIHRoaXMubWFya2luZ09uKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMuZG9jU3ZjLm9wZW5QYXRoJCh0aGlzLnNwb3RQYXJhbXMpLnN1YnNjcmliZSgpO1xuICAgICAgICB9IGVsc2UgaWYgKGlzRCgncGFnZScpKSB7XG4gICAgICAgICAgICAvLyBpZiBvbmx5IHBhZ2UgaGFzIGNoYW5nZWQsIGp1c3QgcmVmcmVzaCBpdFxuICAgICAgICAgICAgLy9cbiAgICAgICAgICAgIGlmICh0aGlzLnNpZCkge1xuICAgICAgICAgICAgICAgIHRoaXMuc3RvclN2Yy5zZXQoJ3BhZ2UnLCB0aGlzLmZvcm0uZ2V0KCdwYWdlJykudmFsdWUpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5kb2NTdmMub3BlblBhZ2UkKHRoaXMuZm9ybS5nZXQoJ3BhZ2UnKS52YWx1ZSkuc3Vic2NyaWJlKCk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgZG9Gb3JtKGRvYzogU3BvdERvYykge1xuXG4gICAgICAgIHRoaXMuZm9ybSA9IHRoaXMuZmIuZ3JvdXAoe1xuICAgICAgICAgICAgdXJsOiBbdGhpcy51cmwsIFZhbGlkYXRvcnMucmVxdWlyZWRdLFxuICAgICAgICAgICAgcGF0aDogW3RoaXMucGF0aCwgVmFsaWRhdG9ycy5yZXF1aXJlZF0sXG4gICAgICAgICAgICBwYWdlOiB0aGlzLmZiLmNvbnRyb2woeyB2YWx1ZTogdGhpcy5wYWdlLCBkaXNhYmxlZDogZmFsc2UgfSksIC8vICF0aGlzLnVybCB9KSxcbiAgICAgICAgICAgIGN1c3Q6IHRoaXMuZmIuZ3JvdXAodGhpcy5jdXN0b21pemF0aW9uIGFzIFNwb3RmaXJlQ3VzdG9taXphdGlvbiksXG4gICAgICAgICAgICBmaWx0ZXJzOiB0aGlzLmZiLmdyb3VwKHt9KSxcbiAgICAgICAgICAgIG1hcmtpbmc6IHRoaXMuZmIuZ3JvdXAoe30pXG4gICAgICAgIH0pO1xuXG5cbiAgICAgICAgLy8gdGhlbiBzdWJzY3JpYmUgdG8gb2JzZXJ2YWJsZXMgdG8gcmV0cmlldmVzIHNvbWUgaW5mbyBhYm91dCB0aGUgZG9jdW1lbnRcbiAgICAgICAgLy9cbiAgICAgICAgZG9jLmdldERvY3VtZW50TWV0YWRhdGEkKCkuc3Vic2NyaWJlKGcgPT4gdGhpcy5tZXRhZGF0YSA9IGcpO1xuICAgICAgICAvKiAgZG9jLmdldERvY3VtZW50UHJvcGVydGllcyQoKS5zdWJzY3JpYmUoZyA9PiBjb25zb2xlLmxvZygnLS0+IGdldERvY3VtZW50UHJvcGVydGllcycsIGcpKTtcbiAgICAgICAgICBkb2MuZ2V0Qm9va21hcmtzJCgpLnN1YnNjcmliZShnID0+IGNvbnNvbGUubG9nKCctLT4gZ2V0Qm9va21hcmtzJywgZykpO1xuICAgICAgICAgIGRvYy5nZXRCb29rbWFya05hbWVzJCgpLnN1YnNjcmliZShnID0+IGNvbnNvbGUubG9nKCctLT4gZ2V0Qm9va21hcmtOYW1lcycsIGcpKTtcbiAgICAgICAgICBkb2MuZ2V0UmVwb3J0cyQoKS5zdWJzY3JpYmUoZyA9PiBjb25zb2xlLmxvZygnLS0+IGdldFJlcG9ydHMnLCBnKSk7XG4gICAgICAgICAgKi9cbiAgICAgICAgZG9jLmdldFBhZ2VzJCgpLnN1YnNjcmliZShnID0+IHRoaXMucGFnZXMgPSBnKTtcbiAgICAgICAgZG9jLmdldEFjdGl2ZVBhZ2UkKCkuc3Vic2NyaWJlKGcgPT4gdGhpcy5mb3JtLmdldCgncGFnZScpLnBhdGNoVmFsdWUoZy5wYWdlVGl0bGUpKTtcblxuICAgICAgICAvLyAgIHRoaXMuZG9jLmV4cG9ydEFjdGl2ZVZpc3VhbEFzSW1hZ2UoMTAwLCAyMDApO1xuICAgICAgICAvLyB0aGlzLm1hcmtpbmcgPSBkb2MubWFya2luZztcbiAgICAgICAgLy8gIHRoaXMubWFya2luZy5nZXRNYXJraW5nTmFtZXMoZyA9PiBjb25zb2xlLmxvZygnU0ZJTkZPJywgJ2dldE1hcmtpbmdOYW1lcygpID0gJywgZykpO1xuXG5cbiAgICAgICAgLy8gZ2V0IFRhYmxlIGluZm9cbiAgICAgICAgLy9cbiAgICAgICAgY29uc3QgZGlmZmVyZW5jZSA9IChhLCBiKSA9PiBiLmZpbHRlcihpID0+IGEuaW5kZXhPZihpKSA8IDApO1xuICAgICAgICBkb2Mub25Eb2N1bWVudFJlYWR5JCgpLnN1YnNjcmliZShfXyA9PiB7XG4gICAgICAgICAgICBkb2MuZ2V0RGF0YSgpLmdldEFsbFRhYmxlcyQoKS5zdWJzY3JpYmUodGFibGVzID0+IHtcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygnW1NQT1RGSVJFLUVESVRPUl0gZ2V0QWxsVGFibGVzJCByZXR1cm5zJywgdGFibGVzLCB0aGlzLmZpbHRlcnMsIHRoaXMubWFya2luZ09uKTtcbiAgICAgICAgICAgICAgICBjb25zdCB0b0xpc3QgPSAoZykgPT4gZy5tYXAoZiA9PiBgJyR7Zn0nYCkuam9pbignLCAnKSxcbiAgICAgICAgICAgICAgICAgICAgZXJyVHh0MSA9ICdbc3BvdGZpcmUtRURJVE9yXSBBdHRyaWJ1dCBtYXJraW5nLW9uIGNvbnRhaW5zIHVua253b24nLFxuICAgICAgICAgICAgICAgICAgICBlcnJUeHQyID0gJ1tzcG90ZmlyZS1FRElUT3JdIFBvc3NpYmxlIHZhbHVlcyBmb3InLFxuICAgICAgICAgICAgICAgICAgICBmaWw6IEZvcm1Hcm91cCA9IHRoaXMuZm9ybS5nZXQoJ2ZpbHRlcnMnKSBhcyBGb3JtR3JvdXAsXG4gICAgICAgICAgICAgICAgICAgIG1hcjogRm9ybUdyb3VwID0gdGhpcy5mb3JtLmdldCgnbWFya2luZycpIGFzIEZvcm1Hcm91cCxcbiAgICAgICAgICAgICAgICAgICAgdE5hbWVzID0gT2JqZWN0LmtleXModGFibGVzKSxcbiAgICAgICAgICAgICAgICAgICAgdGRpZmYgPSB0aGlzLm1hcmtpbmdPbiA/IGRpZmZlcmVuY2UoT2JqZWN0LmtleXModGhpcy5tYXJraW5nT24pLCB0TmFtZXMpIDogW107XG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ1RhYmxlcyA6ICcsIHROYW1lcywgdGRpZmYsIGZpbCk7XG5cbiAgICAgICAgICAgICAgICBpZiAodGRpZmYubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmVycm9yTWVzc2FnZXMucHVzaChgJHtlcnJUeHQxfSB0YWJsZSBuYW1lczogJHt0b0xpc3QodGRpZmYpfWApO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnBvc3NpYmxlVmFsdWVzID0gYCR7ZXJyVHh0Mn0gdGFibGUgbmFtZXMgYXJlOiAke3RvTGlzdCh0TmFtZXMpfSBgO1xuICAgICAgICAgICAgICAgICAgICAvLyAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIC8vIFVwZGF0ZSBtYXJraW5nIGFuZCBmaWx0ZXJzIGZpZWxkc1xuICAgICAgICAgICAgICAgIC8vXG4gICAgICAgICAgICAgICAgT2JqZWN0LmtleXModGFibGVzKS5mb3JFYWNoKHRuYW1lID0+IHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgY29sdW1ucyA9IHRhYmxlc1t0bmFtZV07XG4gICAgICAgICAgICAgICAgICAgIG1hci5hZGRDb250cm9sKHRuYW1lLCBuZXcgRm9ybUNvbnRyb2wodGhpcy5tYXJraW5nT24gPyB0aGlzLm1hcmtpbmdPblt0bmFtZV0gOiBudWxsKSk7XG4gICAgICAgICAgICAgICAgICAgIGlmICghZmlsLmNvbnRhaW5zKHRuYW1lKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgZmlsLmFkZENvbnRyb2wodG5hbWUsIG5ldyBGb3JtR3JvdXAoe30pKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBjb25zdCBmcm06IEZvcm1Hcm91cCA9IGZpbC5nZXQodG5hbWUpIGFzIEZvcm1Hcm91cDtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgY05hbWVzID0gT2JqZWN0LmtleXMoY29sdW1ucyk7XG4gICAgICAgICAgICAgICAgICAgIC8qXG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdDb2x1bW5zIDogJywgY05hbWVzLCB0aGlzLm1hcmtpbmdPbik7XG4gICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLm1hcmtpbmdPbikge1xuICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGNkaWZmID0gdGhpcy5tYXJraW5nT25bdG5hbWVdID8gdGhpcy5kaWZmZXJlbmNlKHRoaXMubWFya2luZ09uW3RuYW1lXSwgY05hbWVzKSA6IFtdO1xuICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdDb2x1bW5zIDogJywgY05hbWVzLCBjZGlmZik7XG4gICAgICAgICAgICAgICAgICAgICAgaWYgKF8uc2l6ZShjZGlmZikgPiAwKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmVycm9yTWVzc2FnZXMucHVzaChgJHtlcnJUeHQxfSBjb2x1bW4gbmFtZXM6ICR7dG9MaXN0KGNkaWZmKX1gKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucG9zc2libGVWYWx1ZXMgPSBgJHtlcnJUeHQyfSBjb2x1bW5zIG9mIHRhYmxlICR7dG5hbWV9IGFyZTogJHt0b0xpc3QoY05hbWVzKX0gYDtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgKi9cblxuICAgICAgICAgICAgICAgICAgICBjTmFtZXMuZm9yRWFjaChjbmFtZSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBsZXQgZmx0MiA9IG51bGw7XG4gICAgICAgICAgICAgICAgICAgICAgICAodGhpcy5maWx0ZXJzIGFzIFNwb3RmaXJlRmlsdGVyW10gfHwgW10pLnNvbWUoZWxlbWVudCA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGVsZW1lbnQuZGF0YVRhYmxlTmFtZSA9PT0gdG5hbWUgJiYgZWxlbWVudC5kYXRhQ29sdW1uTmFtZSA9PT0gY25hbWUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZmx0MiA9IGVsZW1lbnQ7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgZnJtLmFkZENvbnRyb2woY25hbWUsIG5ldyBGb3JtQ29udHJvbChmbHQyID8gZmx0Mi5maWx0ZXJTZXR0aW5ncy52YWx1ZXMgOiBudWxsKSk7XG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIHRoaXMuZGF0YVRhYmxlcyA9IHRhYmxlcztcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9KTtcbiAgICB9XG59XG4iXX0=