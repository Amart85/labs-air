/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
import * as tslib_1 from "tslib";
import { Component, ViewEncapsulation } from '@angular/core';
import { FormGroup, Validators, FormControl, FormBuilder } from '@angular/forms';
import { SpotfireCustomization, SpotfireFilter } from '../spotfire-customization';
import { CUSTLABELS } from '../spotfire-webplayer';
import { PersistanceService } from '../persitence.service';
import { SpotfireViewerComponent } from '../viewer/spotfire-viewer.component';
import { DocumentService } from '../document.service';
var SpotfireEditorComponent = /** @class */ (function (_super) {
    tslib_1.__extends(SpotfireEditorComponent, _super);
    function SpotfireEditorComponent(fb, storSvc, d) {
        var _this = _super.call(this, d) || this;
        _this.fb = fb;
        _this.storSvc = storSvc;
        /**
         * When user hits Update button, depending on what settings are modified, call the right level of
         * method to update the dashboard
         */
        _this.dataTables = {};
        _this.pages = [];
        _this.possibleValues = '';
        _this.custLabels = CUSTLABELS;
        _this.update = (/**
         * @param {?} e
         * @return {?}
         */
        function (e) {
            _this.edit = false;
            e.stopPropagation();
            /** @type {?} */
            var isD = (/**
             * @param {?} z
             * @return {?}
             */
            function (z) { return _this.form.get(z).dirty; });
            /** @type {?} */
            var onlyTrueProps = (/**
             * @param {?} t
             * @return {?}
             */
            function (t) { return Object.keys(t).filter((/**
             * @param {?} key
             * @return {?}
             */
            function (key) { return t[key] === true; }))
                .reduce((/**
             * @param {?} obj
             * @param {?} key
             * @return {?}
             */
            function (obj, key) { obj[key] = t[key]; return obj; }), {}); });
            console.log('[SPOTFIRE-EDITOR] SpotfireEditorComponent Update', _this.form.getRawValue(), "u:" + isD('url') + ", p:" + isD('path') + ", a:" + isD('page') + ", c:" + isD('cust') + ", f:" + isD('filters') + ", m:" + isD('marking'));
            /** @type {?} */
            var cus = new SpotfireCustomization(_this.form.get('cust').value);
            if (isD('url')) {
                _this.docSvc.openWebPlayer$(_this.spotParams).subscribe();
                //            this.openWebPlayer(this.form.get('url').value, this.form.get('path').value, cus);
            }
            else if (isD('path') || isD('filters') || isD('marking') || isD('cust')) {
                _this.path = isD('path') ? _this.form.get('path').value : _this.path;
                _this.page = isD('page') ? _this.form.get('page').value : _this.page;
                console.log('[SPOTFIRE-EDITOR] Marking : ', _this.form.get('marking').value);
                _this.customization = cus;
                _this.pages = [];
                /** @type {?} */
                var allFilters_1 = [];
                if (_this.form.get('filters').value) {
                    /** @type {?} */
                    var fltersValue_1 = _this.form.get('filters').value;
                    Object.keys(fltersValue_1).forEach((/**
                     * @param {?} dataTableName
                     * @return {?}
                     */
                    function (dataTableName) {
                        /** @type {?} */
                        var flt = fltersValue_1[dataTableName];
                        Object.keys(flt).forEach((/**
                         * @param {?} dataColumnName
                         * @return {?}
                         */
                        function (dataColumnName) {
                            return allFilters_1.push(new SpotfireFilter({
                                dataTableName: dataTableName,
                                dataColumnName: dataColumnName,
                                filterSettings: { values: flt[dataColumnName] }
                            }));
                        }));
                    }));
                }
                _this.filters = allFilters_1;
                if (_this.sid) {
                    _this.storSvc.set('url', _this.form.get('url').value);
                    _this.storSvc.set('path', _this.form.get('path').value);
                    _this.storSvc.set('page', _this.form.get('page').value);
                    _this.storSvc.set('cust', onlyTrueProps(_this.customization));
                    _this.storSvc.set('flts', _this.filters);
                    _this.storSvc.set('mark', _this.markingOn);
                }
                _this.docSvc.openPath$(_this.spotParams).subscribe();
            }
            else if (isD('page')) {
                // if only page has changed, just refresh it
                //
                if (_this.sid) {
                    _this.storSvc.set('page', _this.form.get('page').value);
                }
                _this.docSvc.openPage$(_this.form.get('page').value).subscribe();
            }
        });
        return _this;
    }
    /**
     * @param {?} doc
     * @return {?}
     */
    SpotfireEditorComponent.prototype.doForm = /**
     * @param {?} doc
     * @return {?}
     */
    function (doc) {
        var _this = this;
        this.form = this.fb.group({
            url: [this.url, Validators.required],
            path: [this.path, Validators.required],
            page: this.fb.control({ value: this.page, disabled: false }),
            // !this.url }),
            cust: this.fb.group((/** @type {?} */ (this.customization))),
            filters: this.fb.group({}),
            marking: this.fb.group({})
        });
        // then subscribe to observables to retrieves some info about the document
        //
        doc.getDocumentMetadata$().subscribe((/**
         * @param {?} g
         * @return {?}
         */
        function (g) { return _this.metadata = g; }));
        /*  doc.getDocumentProperties$().subscribe(g => console.log('--> getDocumentProperties', g));
          doc.getBookmarks$().subscribe(g => console.log('--> getBookmarks', g));
          doc.getBookmarkNames$().subscribe(g => console.log('--> getBookmarkNames', g));
          doc.getReports$().subscribe(g => console.log('--> getReports', g));
          */
        doc.getPages$().subscribe((/**
         * @param {?} g
         * @return {?}
         */
        function (g) { return _this.pages = g; }));
        doc.getActivePage$().subscribe((/**
         * @param {?} g
         * @return {?}
         */
        function (g) { return _this.form.get('page').patchValue(g.pageTitle); }));
        //   this.doc.exportActiveVisualAsImage(100, 200);
        // this.marking = doc.marking;
        //  this.marking.getMarkingNames(g => console.log('SFINFO', 'getMarkingNames() = ', g));
        // get Table info
        //
        /** @type {?} */
        var difference = (/**
         * @param {?} a
         * @param {?} b
         * @return {?}
         */
        function (a, b) { return b.filter((/**
         * @param {?} i
         * @return {?}
         */
        function (i) { return a.indexOf(i) < 0; })); });
        doc.onDocumentReady$().subscribe((/**
         * @param {?} __
         * @return {?}
         */
        function (__) {
            doc.getData().getAllTables$().subscribe((/**
             * @param {?} tables
             * @return {?}
             */
            function (tables) {
                console.log('[SPOTFIRE-EDITOR] getAllTables$ returns', tables, _this.filters, _this.markingOn);
                /** @type {?} */
                var toList = (/**
                 * @param {?} g
                 * @return {?}
                 */
                function (g) { return g.map((/**
                 * @param {?} f
                 * @return {?}
                 */
                function (f) { return "'" + f + "'"; })).join(', '); });
                /** @type {?} */
                var errTxt1 = '[spotfire-EDITOr] Attribut marking-on contains unknwon';
                /** @type {?} */
                var errTxt2 = '[spotfire-EDITOr] Possible values for';
                /** @type {?} */
                var fil = (/** @type {?} */ (_this.form.get('filters')));
                /** @type {?} */
                var mar = (/** @type {?} */ (_this.form.get('marking')));
                /** @type {?} */
                var tNames = Object.keys(tables);
                /** @type {?} */
                var tdiff = _this.markingOn ? difference(Object.keys(_this.markingOn), tNames) : [];
                console.log('Tables : ', tNames, tdiff, fil);
                if (tdiff.length > 0) {
                    _this.errorMessages.push(errTxt1 + " table names: " + toList(tdiff));
                    _this.possibleValues = errTxt2 + " table names are: " + toList(tNames) + " ";
                    //        return;
                }
                // Update marking and filters fields
                //
                Object.keys(tables).forEach((/**
                 * @param {?} tname
                 * @return {?}
                 */
                function (tname) {
                    /** @type {?} */
                    var columns = tables[tname];
                    mar.addControl(tname, new FormControl(_this.markingOn ? _this.markingOn[tname] : null));
                    if (!fil.contains(tname)) {
                        fil.addControl(tname, new FormGroup({}));
                    }
                    /** @type {?} */
                    var frm = (/** @type {?} */ (fil.get(tname)));
                    /** @type {?} */
                    var cNames = Object.keys(columns);
                    /*
                    console.log('Columns : ', cNames, this.markingOn);
                    if (this.markingOn) {
                      const cdiff = this.markingOn[tname] ? this.difference(this.markingOn[tname], cNames) : [];
                      console.log('Columns : ', cNames, cdiff);
                      if (_.size(cdiff) > 0) {
                        this.errorMessages.push(`${errTxt1} column names: ${toList(cdiff)}`);
                        this.possibleValues = `${errTxt2} columns of table ${tname} are: ${toList(cNames)} `;
                        //          return;
                      }
                    }
                    */
                    cNames.forEach((/**
                     * @param {?} cname
                     * @return {?}
                     */
                    function (cname) {
                        /** @type {?} */
                        var flt2 = null;
                        ((/** @type {?} */ (_this.filters)) || []).some((/**
                         * @param {?} element
                         * @return {?}
                         */
                        function (element) {
                            if (element.dataTableName === tname && element.dataColumnName === cname) {
                                flt2 = element;
                                return true;
                            }
                        }));
                        frm.addControl(cname, new FormControl(flt2 ? flt2.filterSettings.values : null));
                    }));
                }));
                _this.dataTables = tables;
            }));
        }));
    };
    SpotfireEditorComponent.decorators = [
        { type: Component, args: [{
                    selector: 'spotfire-editor',
                    template: "<div class=\"flip-container\" [class.flipit]=\"edit\">\n  <div class=\"flipper\">\n    <div *ngIf=\"form && metadata && dataTables\" class=\"back\" [formGroup]=\"form\" (click)=\"stopPropagation($event)\">\n      <div class=\"header\">\n        <h3 class=\"mat-heading\" style='flex-grow:1'>{{metadata.title||'Add a new dashboard'}}</h3>\n        <div style='display:flex; flex-direction:column; align-items:flex-end'>\n          <span class=\"mat-caption\" *ngIf=\"metadata.size\">\n            {{metadata.size|number:'1.1-1'}}{{metadata.sizeUnit}}\n          </span>\n          <span class=\"mat-caption\" *ngIf=\"metadata.lastModified?.getTime() < metadata.created?.getTime()\">\n            {{metadata.created|date:'medium'}}\n          </span>\n          <span class=\"mat-caption\" *ngIf=\"metadata.lastModified?.getTime() >= metadata.created?.getTime()\">\n            {{metadata.lastModified|date:'medium'}}\n          </span>\n        </div>\n      </div>\n      <div class=\"flexcol\">\n        <h4 *ngIf=\"metadata.description\">{{metadata.description}}</h4>\n        <mat-form-field>\n          <input matInput type=\"url\" formControlName=\"url\" required placeholder=\"WebPlayer server root url\">\n        </mat-form-field>\n        <mat-form-field>\n          <input matInput type=\"text\" formControlName=\"path\" required placeholder=\"Analysis path\">\n        </mat-form-field>\n        <mat-form-field>\n          <mat-select formControlName=\"page\" placeholder=\"Document page\">\n            <mat-option *ngFor=\"let p of pages\" [value]=\"p\">{{p}}</mat-option>\n          </mat-select>\n        </mat-form-field>\n        <h3>Customization information:</h3>\n        <div class=\"flexrow\" formGroupName=\"cust\">\n          <mat-checkbox *ngFor=\"let s of custLabels | keyvalue\" [formControlName]=\"s.key\">{{s.value}}</mat-checkbox>\n        </div>\n        <div formGroupName=\"filters\" *ngIf=\"dataTables\">\n          <h3>Filters:</h3>\n          <div class=\"flexrow\">\n            <span *ngFor=\"let table of dataTables | keyvalue\" [formGroupName]=\"table.key\">\n              <mat-form-field *ngFor=\"let column of table.value | keyvalue\">\n                <mat-select [placeholder]=\"table.key+'/'+column.key\" multiple [formControlName]=\"column.key\">\n                  <mat-option *ngFor=\"let val of column.value\" [value]=\"val\">{{val}}</mat-option>\n                </mat-select>\n              </mat-form-field>\n            </span>\n          </div>\n        </div>\n        <div formGroupName=\"marking\" *ngIf=\"dataTables\">\n          <h3>Marking:</h3>\n          <div class=\"flexrow\">\n            <mat-form-field *ngFor=\"let table of dataTables | keyvalue\">\n              <mat-select [placeholder]=\"table.key\" multiple [formControlName]=\"table.key\">\n                <mat-option *ngFor=\"let column of table.value | keyvalue\" [value]=\"column.key\">{{column.key}}</mat-option>\n              </mat-select>\n            </mat-form-field>\n          </div>\n        </div>\n        <!--\n        <pre>{{markingOn|json}}</pre>\n        <pre>{{dataTables|json}}</pre>\n        <pre>{{form.value|json}}</pre>\n        -->\n      </div>\n      <div style='border-top:1px solid #ccc; padding: 20px 30px; text-align:right'>\n        <button mat-flat-button (click)=\"edit=!edit;stopPropagation($event)\">Close</button>\n        &nbsp;&nbsp;\n        <button [disabled]=\"form.pristine || form.invalid\" mat-flat-button color=\"accent\" (click)=\"update($event)\">Update</button>\n      </div>\n    </div>\n    <div class=\"front\">\n      <div class=\"err\" *ngIf=\"errorMessages.length > 0\">{{errorMessages|json}}</div>\n      <div class=\"err\" *ngIf=\"possibleValues\">{{possibleValues}}</div>\n      <div style='height:100%; border:2px dashed orange; border-radius:8px' #spot></div>\n      <div class=\"editdiv\"> {{url}}/{{path}}/{{page}}\n        <span (click)='edit=!edit;stopPropagation($event)'>edit</span>\n      </div>\n    </div>\n  </div>\n</div>",
                    exportAs: 'spotfireEditor',
                    encapsulation: ViewEncapsulation.None,
                    styles: [".mat-badge-content{font-weight:600;font-size:12px;font-family:Roboto,\"Helvetica Neue\",sans-serif}.mat-badge-small .mat-badge-content{font-size:9px}.mat-badge-large .mat-badge-content{font-size:24px}.mat-h1,.mat-headline,.mat-typography h1{font:400 24px/32px Roboto,\"Helvetica Neue\",sans-serif;margin:0 0 16px}.mat-h2,.mat-title,.mat-typography h2{font:500 20px/32px Roboto,\"Helvetica Neue\",sans-serif;margin:0 0 16px}.mat-h3,.mat-subheading-2,.mat-typography h3{font:400 16px/28px Roboto,\"Helvetica Neue\",sans-serif;margin:0 0 16px}.mat-h4,.mat-subheading-1,.mat-typography h4{font:400 15px/24px Roboto,\"Helvetica Neue\",sans-serif;margin:0 0 16px}.mat-h5,.mat-typography h5{font:400 11.62px/20px Roboto,\"Helvetica Neue\",sans-serif;margin:0 0 12px}.mat-h6,.mat-typography h6{font:400 9.38px/20px Roboto,\"Helvetica Neue\",sans-serif;margin:0 0 12px}.mat-body-2,.mat-body-strong{font:500 14px/24px Roboto,\"Helvetica Neue\",sans-serif}.mat-body,.mat-body-1,.mat-typography{font:400 14px/20px Roboto,\"Helvetica Neue\",sans-serif}.mat-body p,.mat-body-1 p,.mat-typography p{margin:0 0 12px}.mat-caption,.mat-small{font:400 12px/20px Roboto,\"Helvetica Neue\",sans-serif}.mat-display-4,.mat-typography .mat-display-4{font:300 112px/112px Roboto,\"Helvetica Neue\",sans-serif;letter-spacing:-.05em;margin:0 0 56px}.mat-display-3,.mat-typography .mat-display-3{font:400 56px/56px Roboto,\"Helvetica Neue\",sans-serif;letter-spacing:-.02em;margin:0 0 64px}.mat-display-2,.mat-typography .mat-display-2{font:400 45px/48px Roboto,\"Helvetica Neue\",sans-serif;letter-spacing:-.005em;margin:0 0 64px}.mat-display-1,.mat-typography .mat-display-1{font:400 34px/40px Roboto,\"Helvetica Neue\",sans-serif;margin:0 0 64px}.mat-bottom-sheet-container{font:400 14px/20px Roboto,\"Helvetica Neue\",sans-serif}.mat-button,.mat-fab,.mat-flat-button,.mat-icon-button,.mat-mini-fab,.mat-raised-button,.mat-stroked-button{font-family:Roboto,\"Helvetica Neue\",sans-serif;font-size:14px;font-weight:500}.mat-button-toggle,.mat-card{font-family:Roboto,\"Helvetica Neue\",sans-serif}.mat-card-title{font-size:24px;font-weight:500}.mat-card-header .mat-card-title{font-size:20px}.mat-card-content,.mat-card-subtitle{font-size:14px}.mat-checkbox{font-family:Roboto,\"Helvetica Neue\",sans-serif}.mat-checkbox-layout .mat-checkbox-label{line-height:24px}.mat-chip{font-size:14px;font-weight:500}.mat-chip .mat-chip-remove.mat-icon,.mat-chip .mat-chip-trailing-icon.mat-icon{font-size:18px}.mat-table{font-family:Roboto,\"Helvetica Neue\",sans-serif}.mat-header-cell{font-size:12px;font-weight:500}.mat-cell,.mat-footer-cell{font-size:14px}.mat-calendar{font-family:Roboto,\"Helvetica Neue\",sans-serif}.mat-calendar-body{font-size:13px}.mat-calendar-body-label,.mat-calendar-period-button{font-size:14px;font-weight:500}.mat-calendar-table-header th{font-size:11px;font-weight:400}.mat-dialog-title{font:500 20px/32px Roboto,\"Helvetica Neue\",sans-serif}.mat-expansion-panel-header{font-family:Roboto,\"Helvetica Neue\",sans-serif;font-size:15px;font-weight:400}.mat-expansion-panel-content{font:400 14px/20px Roboto,\"Helvetica Neue\",sans-serif}.mat-form-field{font-size:inherit;font-weight:400;line-height:1.125;font-family:Roboto,\"Helvetica Neue\",sans-serif}.mat-form-field-wrapper{padding-bottom:1.34375em}.mat-form-field-prefix .mat-icon,.mat-form-field-suffix .mat-icon{font-size:150%;line-height:1.125}.mat-form-field-prefix .mat-icon-button,.mat-form-field-suffix .mat-icon-button{height:1.5em;width:1.5em}.mat-form-field-prefix .mat-icon-button .mat-icon,.mat-form-field-suffix .mat-icon-button .mat-icon{height:1.125em;line-height:1.125}.mat-form-field-infix{padding:.5em 0;border-top:.84375em solid transparent}.mat-form-field-can-float .mat-input-server:focus+.mat-form-field-label-wrapper .mat-form-field-label,.mat-form-field-can-float.mat-form-field-should-float .mat-form-field-label{-webkit-transform:translateY(-1.34375em) scale(.75);transform:translateY(-1.34375em) scale(.75);width:133.3333333333%}.mat-form-field-can-float .mat-input-server[label]:not(:label-shown)+.mat-form-field-label-wrapper .mat-form-field-label{-webkit-transform:translateY(-1.34374em) scale(.75);transform:translateY(-1.34374em) scale(.75);width:133.3333433333%}.mat-form-field-label-wrapper{top:-.84375em;padding-top:.84375em}.mat-form-field-label{top:1.34375em}.mat-form-field-underline{bottom:1.34375em}.mat-form-field-subscript-wrapper{font-size:75%;margin-top:.6666666667em;top:calc(100% - 1.7916666667em)}.mat-form-field-appearance-legacy .mat-form-field-wrapper{padding-bottom:1.25em}.mat-form-field-appearance-legacy .mat-form-field-infix{padding:.4375em 0}.mat-form-field-appearance-legacy.mat-form-field-can-float .mat-input-server:focus+.mat-form-field-label-wrapper .mat-form-field-label,.mat-form-field-appearance-legacy.mat-form-field-can-float.mat-form-field-should-float .mat-form-field-label{-webkit-transform:translateY(-1.28125em) scale(.75) perspective(100px) translateZ(.001px);transform:translateY(-1.28125em) scale(.75) perspective(100px) translateZ(.001px);-ms-transform:translateY(-1.28125em) scale(.75);width:133.3333333333%}.mat-form-field-appearance-legacy.mat-form-field-can-float .mat-form-field-autofill-control:-webkit-autofill+.mat-form-field-label-wrapper .mat-form-field-label{-webkit-transform:translateY(-1.28125em) scale(.75) perspective(100px) translateZ(.00101px);transform:translateY(-1.28125em) scale(.75) perspective(100px) translateZ(.00101px);-ms-transform:translateY(-1.28124em) scale(.75);width:133.3333433333%}.mat-form-field-appearance-legacy.mat-form-field-can-float .mat-input-server[label]:not(:label-shown)+.mat-form-field-label-wrapper .mat-form-field-label{-webkit-transform:translateY(-1.28125em) scale(.75) perspective(100px) translateZ(.00102px);transform:translateY(-1.28125em) scale(.75) perspective(100px) translateZ(.00102px);-ms-transform:translateY(-1.28123em) scale(.75);width:133.3333533333%}.mat-form-field-appearance-legacy .mat-form-field-label{top:1.28125em}.mat-form-field-appearance-legacy .mat-form-field-subscript-wrapper{margin-top:.5416666667em;top:calc(100% - 1.6666666667em)}@media print{.mat-form-field-appearance-legacy.mat-form-field-can-float .mat-input-server:focus+.mat-form-field-label-wrapper .mat-form-field-label,.mat-form-field-appearance-legacy.mat-form-field-can-float.mat-form-field-should-float .mat-form-field-label{-webkit-transform:translateY(-1.28122em) scale(.75);transform:translateY(-1.28122em) scale(.75)}.mat-form-field-appearance-legacy.mat-form-field-can-float .mat-form-field-autofill-control:-webkit-autofill+.mat-form-field-label-wrapper .mat-form-field-label{-webkit-transform:translateY(-1.28121em) scale(.75);transform:translateY(-1.28121em) scale(.75)}.mat-form-field-appearance-legacy.mat-form-field-can-float .mat-input-server[label]:not(:label-shown)+.mat-form-field-label-wrapper .mat-form-field-label{-webkit-transform:translateY(-1.2812em) scale(.75);transform:translateY(-1.2812em) scale(.75)}}.mat-form-field-appearance-fill .mat-form-field-infix{padding:.25em 0 .75em}.mat-form-field-appearance-fill .mat-form-field-label{top:1.09375em;margin-top:-.5em}.mat-form-field-appearance-fill.mat-form-field-can-float .mat-input-server:focus+.mat-form-field-label-wrapper .mat-form-field-label,.mat-form-field-appearance-fill.mat-form-field-can-float.mat-form-field-should-float .mat-form-field-label{-webkit-transform:translateY(-.59375em) scale(.75);transform:translateY(-.59375em) scale(.75);width:133.3333333333%}.mat-form-field-appearance-fill.mat-form-field-can-float .mat-input-server[label]:not(:label-shown)+.mat-form-field-label-wrapper .mat-form-field-label{-webkit-transform:translateY(-.59374em) scale(.75);transform:translateY(-.59374em) scale(.75);width:133.3333433333%}.mat-form-field-appearance-outline .mat-form-field-infix{padding:1em 0}.mat-form-field-appearance-outline .mat-form-field-label{top:1.84375em;margin-top:-.25em}.mat-form-field-appearance-outline.mat-form-field-can-float .mat-input-server:focus+.mat-form-field-label-wrapper .mat-form-field-label,.mat-form-field-appearance-outline.mat-form-field-can-float.mat-form-field-should-float .mat-form-field-label{-webkit-transform:translateY(-1.59375em) scale(.75);transform:translateY(-1.59375em) scale(.75);width:133.3333333333%}.mat-form-field-appearance-outline.mat-form-field-can-float .mat-input-server[label]:not(:label-shown)+.mat-form-field-label-wrapper .mat-form-field-label{-webkit-transform:translateY(-1.59374em) scale(.75);transform:translateY(-1.59374em) scale(.75);width:133.3333433333%}.mat-grid-tile-footer,.mat-grid-tile-header{font-size:14px}.mat-grid-tile-footer .mat-line,.mat-grid-tile-header .mat-line{white-space:nowrap;overflow:hidden;text-overflow:ellipsis;display:block;box-sizing:border-box}.mat-grid-tile-footer .mat-line:nth-child(n+2),.mat-grid-tile-header .mat-line:nth-child(n+2){font-size:12px}input.mat-input-element{margin-top:-.0625em}.mat-menu-item{font-family:Roboto,\"Helvetica Neue\",sans-serif;font-size:14px;font-weight:400}.mat-paginator,.mat-paginator-page-size .mat-select-trigger{font-family:Roboto,\"Helvetica Neue\",sans-serif;font-size:12px}.mat-radio-button,.mat-select{font-family:Roboto,\"Helvetica Neue\",sans-serif}.mat-select-trigger{height:1.125em}.mat-slide-toggle-content{font-family:Roboto,\"Helvetica Neue\",sans-serif}.mat-slider-thumb-label-text{font-family:Roboto,\"Helvetica Neue\",sans-serif;font-size:12px;font-weight:500}.mat-stepper-horizontal,.mat-stepper-vertical{font-family:Roboto,\"Helvetica Neue\",sans-serif}.mat-step-label{font-size:14px;font-weight:400}.mat-step-sub-label-error{font-weight:400}.mat-step-label-error{font-size:14px}.mat-step-label-selected{font-size:14px;font-weight:500}.mat-tab-group{font-family:Roboto,\"Helvetica Neue\",sans-serif}.mat-tab-label,.mat-tab-link{font-family:Roboto,\"Helvetica Neue\",sans-serif;font-size:14px;font-weight:500}.mat-toolbar,.mat-toolbar h1,.mat-toolbar h2,.mat-toolbar h3,.mat-toolbar h4,.mat-toolbar h5,.mat-toolbar h6{font:500 20px/32px Roboto,\"Helvetica Neue\",sans-serif;margin:0}.mat-tooltip{font-family:Roboto,\"Helvetica Neue\",sans-serif;font-size:10px;padding-top:6px;padding-bottom:6px}.mat-tooltip-handset{font-size:14px;padding-top:8px;padding-bottom:8px}.mat-list-item,.mat-list-option{font-family:Roboto,\"Helvetica Neue\",sans-serif}.mat-list-base .mat-list-item{font-size:16px}.mat-list-base .mat-list-item .mat-line{white-space:nowrap;overflow:hidden;text-overflow:ellipsis;display:block;box-sizing:border-box}.mat-list-base .mat-list-item .mat-line:nth-child(n+2){font-size:14px}.mat-list-base .mat-list-option{font-size:16px}.mat-list-base .mat-list-option .mat-line{white-space:nowrap;overflow:hidden;text-overflow:ellipsis;display:block;box-sizing:border-box}.mat-list-base .mat-list-option .mat-line:nth-child(n+2){font-size:14px}.mat-list-base .mat-subheader{font-family:Roboto,\"Helvetica Neue\",sans-serif;font-size:14px;font-weight:500}.mat-list-base[dense] .mat-list-item{font-size:12px}.mat-list-base[dense] .mat-list-item .mat-line{white-space:nowrap;overflow:hidden;text-overflow:ellipsis;display:block;box-sizing:border-box}.mat-list-base[dense] .mat-list-item .mat-line:nth-child(n+2),.mat-list-base[dense] .mat-list-option{font-size:12px}.mat-list-base[dense] .mat-list-option .mat-line{white-space:nowrap;overflow:hidden;text-overflow:ellipsis;display:block;box-sizing:border-box}.mat-list-base[dense] .mat-list-option .mat-line:nth-child(n+2){font-size:12px}.mat-list-base[dense] .mat-subheader{font-family:Roboto,\"Helvetica Neue\",sans-serif;font-size:12px;font-weight:500}.mat-option{font-family:Roboto,\"Helvetica Neue\",sans-serif;font-size:16px;color:rgba(0,0,0,.87)}.mat-optgroup-label{font:500 14px/24px Roboto,\"Helvetica Neue\",sans-serif;color:rgba(0,0,0,.54)}.mat-simple-snackbar{font-family:Roboto,\"Helvetica Neue\",sans-serif;font-size:14px}.mat-simple-snackbar-action{line-height:1;font-family:inherit;font-size:inherit;font-weight:500}.mat-tree{font-family:Roboto,\"Helvetica Neue\",sans-serif}.mat-nested-tree-node,.mat-tree-node{font-weight:400;font-size:14px}.mat-ripple{overflow:hidden;position:relative}.mat-ripple.mat-ripple-unbounded{overflow:visible}.mat-ripple-element{position:absolute;border-radius:50%;pointer-events:none;-webkit-transition:opacity,-webkit-transform cubic-bezier(0,0,.2,1);transition:opacity,transform cubic-bezier(0,0,.2,1),-webkit-transform cubic-bezier(0,0,.2,1);-webkit-transform:scale(0);transform:scale(0)}@media (-ms-high-contrast:active){.mat-ripple-element{display:none}}.cdk-visually-hidden{border:0;clip:rect(0 0 0 0);height:1px;margin:-1px;overflow:hidden;padding:0;position:absolute;width:1px;outline:0;-webkit-appearance:none;-moz-appearance:none}.cdk-global-overlay-wrapper,.cdk-overlay-container{pointer-events:none;top:0;left:0;height:100%;width:100%}.cdk-overlay-container{position:fixed;z-index:1000}.cdk-overlay-container:empty{display:none}.cdk-global-overlay-wrapper{display:-webkit-box;display:flex;position:absolute;z-index:1000}.cdk-overlay-pane{position:absolute;pointer-events:auto;box-sizing:border-box;z-index:1000;display:-webkit-box;display:flex;max-width:100%;max-height:100%}.cdk-overlay-backdrop{position:absolute;top:0;bottom:0;left:0;right:0;z-index:1000;pointer-events:auto;-webkit-tap-highlight-color:transparent;-webkit-transition:opacity .4s cubic-bezier(.25,.8,.25,1);transition:opacity .4s cubic-bezier(.25,.8,.25,1);opacity:0}.cdk-overlay-backdrop.cdk-overlay-backdrop-showing{opacity:1}@media screen and (-ms-high-contrast:active){.cdk-overlay-backdrop.cdk-overlay-backdrop-showing{opacity:.6}}.cdk-overlay-dark-backdrop{background:rgba(0,0,0,.32)}.cdk-overlay-transparent-backdrop,.cdk-overlay-transparent-backdrop.cdk-overlay-backdrop-showing{opacity:0}.cdk-overlay-connected-position-bounding-box{position:absolute;z-index:1000;display:-webkit-box;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;flex-direction:column;min-width:1px;min-height:1px}.cdk-global-scrollblock{position:fixed;width:100%;overflow-y:scroll}@-webkit-keyframes cdk-text-field-autofill-start{/*!*/}@keyframes cdk-text-field-autofill-start{/*!*/}@-webkit-keyframes cdk-text-field-autofill-end{/*!*/}@keyframes cdk-text-field-autofill-end{/*!*/}.cdk-text-field-autofill-monitored:-webkit-autofill{-webkit-animation-name:cdk-text-field-autofill-start;animation-name:cdk-text-field-autofill-start}.cdk-text-field-autofill-monitored:not(:-webkit-autofill){-webkit-animation-name:cdk-text-field-autofill-end;animation-name:cdk-text-field-autofill-end}textarea.cdk-textarea-autosize{resize:none}textarea.cdk-textarea-autosize-measuring{height:auto!important;overflow:hidden!important;padding:2px 0!important;box-sizing:content-box!important}.mat-ripple-element{background-color:rgba(0,0,0,.1)}.mat-option.mat-selected:not(.mat-option-multiple):not(.mat-option-disabled),.mat-option:focus:not(.mat-option-disabled),.mat-option:hover:not(.mat-option-disabled){background:rgba(0,0,0,.04)}.mat-option.mat-active{background:rgba(0,0,0,.04);color:rgba(0,0,0,.87)}.mat-option.mat-option-disabled{color:rgba(0,0,0,.38)}.mat-primary .mat-option.mat-selected:not(.mat-option-disabled){color:#3f51b5}.mat-accent .mat-option.mat-selected:not(.mat-option-disabled){color:#ff4081}.mat-warn .mat-option.mat-selected:not(.mat-option-disabled){color:#f44336}.mat-optgroup-disabled .mat-optgroup-label{color:rgba(0,0,0,.38)}.mat-pseudo-checkbox{color:rgba(0,0,0,.54)}.mat-pseudo-checkbox::after{color:#fafafa}.mat-pseudo-checkbox-disabled{color:#b0b0b0}.mat-accent .mat-pseudo-checkbox-checked,.mat-accent .mat-pseudo-checkbox-indeterminate,.mat-pseudo-checkbox-checked,.mat-pseudo-checkbox-indeterminate{background:#ff4081}.mat-primary .mat-pseudo-checkbox-checked,.mat-primary .mat-pseudo-checkbox-indeterminate{background:#3f51b5}.mat-warn .mat-pseudo-checkbox-checked,.mat-warn .mat-pseudo-checkbox-indeterminate{background:#f44336}.mat-pseudo-checkbox-checked.mat-pseudo-checkbox-disabled,.mat-pseudo-checkbox-indeterminate.mat-pseudo-checkbox-disabled{background:#b0b0b0}.mat-elevation-z0{box-shadow:0 0 0 0 rgba(0,0,0,.2),0 0 0 0 rgba(0,0,0,.14),0 0 0 0 rgba(0,0,0,.12)}.mat-elevation-z1{box-shadow:0 2px 1px -1px rgba(0,0,0,.2),0 1px 1px 0 rgba(0,0,0,.14),0 1px 3px 0 rgba(0,0,0,.12)}.mat-elevation-z2{box-shadow:0 3px 1px -2px rgba(0,0,0,.2),0 2px 2px 0 rgba(0,0,0,.14),0 1px 5px 0 rgba(0,0,0,.12)}.mat-elevation-z3{box-shadow:0 3px 3px -2px rgba(0,0,0,.2),0 3px 4px 0 rgba(0,0,0,.14),0 1px 8px 0 rgba(0,0,0,.12)}.mat-elevation-z4{box-shadow:0 2px 4px -1px rgba(0,0,0,.2),0 4px 5px 0 rgba(0,0,0,.14),0 1px 10px 0 rgba(0,0,0,.12)}.mat-elevation-z5{box-shadow:0 3px 5px -1px rgba(0,0,0,.2),0 5px 8px 0 rgba(0,0,0,.14),0 1px 14px 0 rgba(0,0,0,.12)}.mat-elevation-z6{box-shadow:0 3px 5px -1px rgba(0,0,0,.2),0 6px 10px 0 rgba(0,0,0,.14),0 1px 18px 0 rgba(0,0,0,.12)}.mat-elevation-z7{box-shadow:0 4px 5px -2px rgba(0,0,0,.2),0 7px 10px 1px rgba(0,0,0,.14),0 2px 16px 1px rgba(0,0,0,.12)}.mat-elevation-z8{box-shadow:0 5px 5px -3px rgba(0,0,0,.2),0 8px 10px 1px rgba(0,0,0,.14),0 3px 14px 2px rgba(0,0,0,.12)}.mat-elevation-z9{box-shadow:0 5px 6px -3px rgba(0,0,0,.2),0 9px 12px 1px rgba(0,0,0,.14),0 3px 16px 2px rgba(0,0,0,.12)}.mat-elevation-z10{box-shadow:0 6px 6px -3px rgba(0,0,0,.2),0 10px 14px 1px rgba(0,0,0,.14),0 4px 18px 3px rgba(0,0,0,.12)}.mat-elevation-z11{box-shadow:0 6px 7px -4px rgba(0,0,0,.2),0 11px 15px 1px rgba(0,0,0,.14),0 4px 20px 3px rgba(0,0,0,.12)}.mat-elevation-z12{box-shadow:0 7px 8px -4px rgba(0,0,0,.2),0 12px 17px 2px rgba(0,0,0,.14),0 5px 22px 4px rgba(0,0,0,.12)}.mat-elevation-z13{box-shadow:0 7px 8px -4px rgba(0,0,0,.2),0 13px 19px 2px rgba(0,0,0,.14),0 5px 24px 4px rgba(0,0,0,.12)}.mat-elevation-z14{box-shadow:0 7px 9px -4px rgba(0,0,0,.2),0 14px 21px 2px rgba(0,0,0,.14),0 5px 26px 4px rgba(0,0,0,.12)}.mat-elevation-z15{box-shadow:0 8px 9px -5px rgba(0,0,0,.2),0 15px 22px 2px rgba(0,0,0,.14),0 6px 28px 5px rgba(0,0,0,.12)}.mat-elevation-z16{box-shadow:0 8px 10px -5px rgba(0,0,0,.2),0 16px 24px 2px rgba(0,0,0,.14),0 6px 30px 5px rgba(0,0,0,.12)}.mat-elevation-z17{box-shadow:0 8px 11px -5px rgba(0,0,0,.2),0 17px 26px 2px rgba(0,0,0,.14),0 6px 32px 5px rgba(0,0,0,.12)}.mat-elevation-z18{box-shadow:0 9px 11px -5px rgba(0,0,0,.2),0 18px 28px 2px rgba(0,0,0,.14),0 7px 34px 6px rgba(0,0,0,.12)}.mat-elevation-z19{box-shadow:0 9px 12px -6px rgba(0,0,0,.2),0 19px 29px 2px rgba(0,0,0,.14),0 7px 36px 6px rgba(0,0,0,.12)}.mat-elevation-z20{box-shadow:0 10px 13px -6px rgba(0,0,0,.2),0 20px 31px 3px rgba(0,0,0,.14),0 8px 38px 7px rgba(0,0,0,.12)}.mat-elevation-z21{box-shadow:0 10px 13px -6px rgba(0,0,0,.2),0 21px 33px 3px rgba(0,0,0,.14),0 8px 40px 7px rgba(0,0,0,.12)}.mat-elevation-z22{box-shadow:0 10px 14px -6px rgba(0,0,0,.2),0 22px 35px 3px rgba(0,0,0,.14),0 8px 42px 7px rgba(0,0,0,.12)}.mat-elevation-z23{box-shadow:0 11px 14px -7px rgba(0,0,0,.2),0 23px 36px 3px rgba(0,0,0,.14),0 9px 44px 8px rgba(0,0,0,.12)}.mat-elevation-z24{box-shadow:0 11px 15px -7px rgba(0,0,0,.2),0 24px 38px 3px rgba(0,0,0,.14),0 9px 46px 8px rgba(0,0,0,.12)}.mat-app-background{background-color:#fafafa;color:rgba(0,0,0,.87)}.mat-theme-loaded-marker{display:none}.mat-button,.mat-icon-button,.mat-stroked-button{color:inherit;background:0 0}.mat-button.mat-primary,.mat-icon-button.mat-primary,.mat-stroked-button.mat-primary{color:#3f51b5}.mat-button.mat-accent,.mat-icon-button.mat-accent,.mat-stroked-button.mat-accent{color:#ff4081}.mat-button.mat-warn,.mat-icon-button.mat-warn,.mat-stroked-button.mat-warn{color:#f44336}.mat-button.mat-accent[disabled],.mat-button.mat-primary[disabled],.mat-button.mat-warn[disabled],.mat-button[disabled][disabled],.mat-icon-button.mat-accent[disabled],.mat-icon-button.mat-primary[disabled],.mat-icon-button.mat-warn[disabled],.mat-icon-button[disabled][disabled],.mat-stroked-button.mat-accent[disabled],.mat-stroked-button.mat-primary[disabled],.mat-stroked-button.mat-warn[disabled],.mat-stroked-button[disabled][disabled]{color:rgba(0,0,0,.26)}.mat-button.mat-primary .mat-button-focus-overlay,.mat-icon-button.mat-primary .mat-button-focus-overlay,.mat-stroked-button.mat-primary .mat-button-focus-overlay{background-color:#3f51b5}.mat-button.mat-accent .mat-button-focus-overlay,.mat-icon-button.mat-accent .mat-button-focus-overlay,.mat-stroked-button.mat-accent .mat-button-focus-overlay{background-color:#ff4081}.mat-button.mat-warn .mat-button-focus-overlay,.mat-icon-button.mat-warn .mat-button-focus-overlay,.mat-stroked-button.mat-warn .mat-button-focus-overlay{background-color:#f44336}.mat-button[disabled] .mat-button-focus-overlay,.mat-icon-button[disabled] .mat-button-focus-overlay,.mat-stroked-button[disabled] .mat-button-focus-overlay{background-color:transparent}.mat-button .mat-ripple-element,.mat-icon-button .mat-ripple-element,.mat-stroked-button .mat-ripple-element{opacity:.1;background-color:currentColor}.mat-button-focus-overlay{background:#000}.mat-stroked-button:not([disabled]){border-color:rgba(0,0,0,.12)}.mat-fab,.mat-flat-button,.mat-mini-fab,.mat-raised-button{color:rgba(0,0,0,.87);background-color:#fff}.mat-fab.mat-accent,.mat-fab.mat-primary,.mat-fab.mat-warn,.mat-flat-button.mat-accent,.mat-flat-button.mat-primary,.mat-flat-button.mat-warn,.mat-mini-fab.mat-accent,.mat-mini-fab.mat-primary,.mat-mini-fab.mat-warn,.mat-raised-button.mat-accent,.mat-raised-button.mat-primary,.mat-raised-button.mat-warn{color:#fff}.mat-fab.mat-accent[disabled],.mat-fab.mat-primary[disabled],.mat-fab.mat-warn[disabled],.mat-fab[disabled][disabled],.mat-flat-button.mat-accent[disabled],.mat-flat-button.mat-primary[disabled],.mat-flat-button.mat-warn[disabled],.mat-flat-button[disabled][disabled],.mat-mini-fab.mat-accent[disabled],.mat-mini-fab.mat-primary[disabled],.mat-mini-fab.mat-warn[disabled],.mat-mini-fab[disabled][disabled],.mat-raised-button.mat-accent[disabled],.mat-raised-button.mat-primary[disabled],.mat-raised-button.mat-warn[disabled],.mat-raised-button[disabled][disabled]{color:rgba(0,0,0,.26);background-color:rgba(0,0,0,.12)}.mat-fab.mat-primary,.mat-flat-button.mat-primary,.mat-mini-fab.mat-primary,.mat-raised-button.mat-primary{background-color:#3f51b5}.mat-fab.mat-accent,.mat-flat-button.mat-accent,.mat-mini-fab.mat-accent,.mat-raised-button.mat-accent{background-color:#ff4081}.mat-fab.mat-warn,.mat-flat-button.mat-warn,.mat-mini-fab.mat-warn,.mat-raised-button.mat-warn{background-color:#f44336}.mat-fab.mat-accent .mat-ripple-element,.mat-fab.mat-primary .mat-ripple-element,.mat-fab.mat-warn .mat-ripple-element,.mat-flat-button.mat-accent .mat-ripple-element,.mat-flat-button.mat-primary .mat-ripple-element,.mat-flat-button.mat-warn .mat-ripple-element,.mat-mini-fab.mat-accent .mat-ripple-element,.mat-mini-fab.mat-primary .mat-ripple-element,.mat-mini-fab.mat-warn .mat-ripple-element,.mat-raised-button.mat-accent .mat-ripple-element,.mat-raised-button.mat-primary .mat-ripple-element,.mat-raised-button.mat-warn .mat-ripple-element{background-color:rgba(255,255,255,.1)}.mat-flat-button:not([class*=mat-elevation-z]),.mat-stroked-button:not([class*=mat-elevation-z]){box-shadow:0 0 0 0 rgba(0,0,0,.2),0 0 0 0 rgba(0,0,0,.14),0 0 0 0 rgba(0,0,0,.12)}.mat-raised-button:not([class*=mat-elevation-z]){box-shadow:0 3px 1px -2px rgba(0,0,0,.2),0 2px 2px 0 rgba(0,0,0,.14),0 1px 5px 0 rgba(0,0,0,.12)}.mat-raised-button:not([disabled]):active:not([class*=mat-elevation-z]){box-shadow:0 5px 5px -3px rgba(0,0,0,.2),0 8px 10px 1px rgba(0,0,0,.14),0 3px 14px 2px rgba(0,0,0,.12)}.mat-raised-button[disabled]:not([class*=mat-elevation-z]){box-shadow:0 0 0 0 rgba(0,0,0,.2),0 0 0 0 rgba(0,0,0,.14),0 0 0 0 rgba(0,0,0,.12)}.mat-fab:not([class*=mat-elevation-z]),.mat-mini-fab:not([class*=mat-elevation-z]){box-shadow:0 3px 5px -1px rgba(0,0,0,.2),0 6px 10px 0 rgba(0,0,0,.14),0 1px 18px 0 rgba(0,0,0,.12)}.mat-fab:not([disabled]):active:not([class*=mat-elevation-z]),.mat-mini-fab:not([disabled]):active:not([class*=mat-elevation-z]){box-shadow:0 7px 8px -4px rgba(0,0,0,.2),0 12px 17px 2px rgba(0,0,0,.14),0 5px 22px 4px rgba(0,0,0,.12)}.mat-fab[disabled]:not([class*=mat-elevation-z]),.mat-mini-fab[disabled]:not([class*=mat-elevation-z]){box-shadow:0 0 0 0 rgba(0,0,0,.2),0 0 0 0 rgba(0,0,0,.14),0 0 0 0 rgba(0,0,0,.12)}.mat-checkbox-frame{border-color:rgba(0,0,0,.54)}.mat-checkbox-checkmark{fill:#fafafa}.mat-checkbox-checkmark-path{stroke:#fafafa!important}@media (-ms-high-contrast:black-on-white){.mat-checkbox-checkmark-path{stroke:#000!important}}.mat-checkbox-mixedmark{background-color:#fafafa}.mat-checkbox-checked.mat-primary .mat-checkbox-background,.mat-checkbox-indeterminate.mat-primary .mat-checkbox-background{background-color:#3f51b5}.mat-checkbox-checked.mat-accent .mat-checkbox-background,.mat-checkbox-indeterminate.mat-accent .mat-checkbox-background{background-color:#ff4081}.mat-checkbox-checked.mat-warn .mat-checkbox-background,.mat-checkbox-indeterminate.mat-warn .mat-checkbox-background{background-color:#f44336}.mat-checkbox-disabled.mat-checkbox-checked .mat-checkbox-background,.mat-checkbox-disabled.mat-checkbox-indeterminate .mat-checkbox-background{background-color:#b0b0b0}.mat-checkbox-disabled:not(.mat-checkbox-checked) .mat-checkbox-frame{border-color:#b0b0b0}.mat-checkbox-disabled .mat-checkbox-label{color:rgba(0,0,0,.54)}@media (-ms-high-contrast:active){.mat-checkbox-disabled{opacity:.5}.mat-checkbox-background{background:0 0}}.mat-checkbox .mat-ripple-element{background-color:#000}.mat-checkbox-checked:not(.mat-checkbox-disabled).mat-primary .mat-ripple-element,.mat-checkbox:active:not(.mat-checkbox-disabled).mat-primary .mat-ripple-element{background:#3f51b5}.mat-checkbox-checked:not(.mat-checkbox-disabled).mat-accent .mat-ripple-element,.mat-checkbox:active:not(.mat-checkbox-disabled).mat-accent .mat-ripple-element{background:#ff4081}.mat-checkbox-checked:not(.mat-checkbox-disabled).mat-warn .mat-ripple-element,.mat-checkbox:active:not(.mat-checkbox-disabled).mat-warn .mat-ripple-element{background:#f44336}.mat-form-field-label,.mat-hint{color:rgba(0,0,0,.6)}.mat-form-field.mat-focused .mat-form-field-label{color:#3f51b5}.mat-form-field.mat-focused .mat-form-field-label.mat-accent{color:#ff4081}.mat-form-field.mat-focused .mat-form-field-label.mat-warn{color:#f44336}.mat-focused .mat-form-field-required-marker{color:#ff4081}.mat-form-field-ripple{background-color:rgba(0,0,0,.87)}.mat-form-field.mat-focused .mat-form-field-ripple{background-color:#3f51b5}.mat-form-field.mat-focused .mat-form-field-ripple.mat-accent{background-color:#ff4081}.mat-form-field.mat-focused .mat-form-field-ripple.mat-warn{background-color:#f44336}.mat-form-field-type-mat-native-select.mat-focused:not(.mat-form-field-invalid) .mat-form-field-infix::after{color:#3f51b5}.mat-form-field-type-mat-native-select.mat-focused:not(.mat-form-field-invalid).mat-accent .mat-form-field-infix::after{color:#ff4081}.mat-form-field-type-mat-native-select.mat-focused:not(.mat-form-field-invalid).mat-warn .mat-form-field-infix::after,.mat-form-field.mat-form-field-invalid .mat-form-field-label,.mat-form-field.mat-form-field-invalid .mat-form-field-label .mat-form-field-required-marker,.mat-form-field.mat-form-field-invalid .mat-form-field-label.mat-accent{color:#f44336}.mat-form-field.mat-form-field-invalid .mat-form-field-ripple,.mat-form-field.mat-form-field-invalid .mat-form-field-ripple.mat-accent{background-color:#f44336}.mat-error{color:#f44336}.mat-form-field-appearance-legacy .mat-form-field-label,.mat-form-field-appearance-legacy .mat-hint{color:rgba(0,0,0,.54)}.mat-form-field-appearance-legacy .mat-form-field-underline{bottom:1.25em;background-color:rgba(0,0,0,.42)}.mat-form-field-appearance-legacy.mat-form-field-disabled .mat-form-field-underline{background-image:-webkit-gradient(linear,left top,right top,from(rgba(0,0,0,.42)),color-stop(33%,rgba(0,0,0,.42)),color-stop(0,transparent));background-image:linear-gradient(to right,rgba(0,0,0,.42) 0,rgba(0,0,0,.42) 33%,transparent 0);background-size:4px 100%;background-repeat:repeat-x}.mat-form-field-appearance-standard .mat-form-field-underline{background-color:rgba(0,0,0,.42)}.mat-form-field-appearance-standard.mat-form-field-disabled .mat-form-field-underline{background-image:-webkit-gradient(linear,left top,right top,from(rgba(0,0,0,.42)),color-stop(33%,rgba(0,0,0,.42)),color-stop(0,transparent));background-image:linear-gradient(to right,rgba(0,0,0,.42) 0,rgba(0,0,0,.42) 33%,transparent 0);background-size:4px 100%;background-repeat:repeat-x}.mat-form-field-appearance-fill .mat-form-field-flex{background-color:rgba(0,0,0,.04)}.mat-form-field-appearance-fill.mat-form-field-disabled .mat-form-field-flex{background-color:rgba(0,0,0,.02)}.mat-form-field-appearance-fill .mat-form-field-underline::before{background-color:rgba(0,0,0,.42)}.mat-form-field-appearance-fill.mat-form-field-disabled .mat-form-field-label{color:rgba(0,0,0,.38)}.mat-form-field-appearance-fill.mat-form-field-disabled .mat-form-field-underline::before{background-color:transparent}.mat-form-field-appearance-outline .mat-form-field-outline{color:rgba(0,0,0,.12)}.mat-form-field-appearance-outline .mat-form-field-outline-thick{color:rgba(0,0,0,.87)}.mat-form-field-appearance-outline.mat-focused .mat-form-field-outline-thick{color:#3f51b5}.mat-form-field-appearance-outline.mat-focused.mat-accent .mat-form-field-outline-thick{color:#ff4081}.mat-form-field-appearance-outline.mat-focused.mat-warn .mat-form-field-outline-thick,.mat-form-field-appearance-outline.mat-form-field-invalid.mat-form-field-invalid .mat-form-field-outline-thick{color:#f44336}.mat-form-field-appearance-outline.mat-form-field-disabled .mat-form-field-label{color:rgba(0,0,0,.38)}.mat-form-field-appearance-outline.mat-form-field-disabled .mat-form-field-outline{color:rgba(0,0,0,.06)}.mat-form-field-type-mat-native-select .mat-form-field-infix::after{color:rgba(0,0,0,.54)}.mat-form-field-type-mat-native-select.mat-form-field-disabled .mat-form-field-infix::after,.mat-input-element:disabled{color:rgba(0,0,0,.38)}.mat-input-element{caret-color:#3f51b5}.mat-input-element::-ms-input-placeholder{color:rgba(0,0,0,.42)}.mat-input-element::placeholder{color:rgba(0,0,0,.42)}.mat-input-element::-moz-placeholder{color:rgba(0,0,0,.42)}.mat-input-element::-webkit-input-placeholder{color:rgba(0,0,0,.42)}.mat-input-element:-ms-input-placeholder{color:rgba(0,0,0,.42)}.mat-accent .mat-input-element{caret-color:#ff4081}.mat-form-field-invalid .mat-input-element,.mat-warn .mat-input-element{caret-color:#f44336}.mat-form-field-type-mat-native-select.mat-form-field-invalid .mat-form-field-infix::after{color:#f44336}.mat-select-value{color:rgba(0,0,0,.87)}.mat-select-placeholder{color:rgba(0,0,0,.42)}.mat-select-disabled .mat-select-value{color:rgba(0,0,0,.38)}.mat-select-arrow{color:rgba(0,0,0,.54)}.mat-select-panel{background:#fff}.mat-select-panel:not([class*=mat-elevation-z]){box-shadow:0 2px 4px -1px rgba(0,0,0,.2),0 4px 5px 0 rgba(0,0,0,.14),0 1px 10px 0 rgba(0,0,0,.12)}.mat-select-panel .mat-option.mat-selected:not(.mat-option-multiple){background:rgba(0,0,0,.12)}.mat-form-field.mat-focused.mat-primary .mat-select-arrow{color:#3f51b5}.mat-form-field.mat-focused.mat-accent .mat-select-arrow{color:#ff4081}.mat-form-field .mat-select.mat-select-invalid .mat-select-arrow,.mat-form-field.mat-focused.mat-warn .mat-select-arrow{color:#f44336}.mat-form-field .mat-select.mat-select-disabled .mat-select-arrow{color:rgba(0,0,0,.38)}", ".flip-container{-webkit-perspective:1000px;perspective:1000px}.flip-container.flipit .flipper{-webkit-transform:rotateY(180deg);transform:rotateY(180deg)}.flip-container,.flip-container .back,.flip-container .front{width:100%;height:900px}.flip-container .flipper{-webkit-transition:1s ease-out;transition:1s ease-out;-webkit-transform-style:preserve-3d;transform-style:preserve-3d;position:relative}.flip-container .back,.flip-container .front{-webkit-backface-visibility:hidden;backface-visibility:hidden;position:absolute;top:0;left:0}.flip-container .front{z-index:2;-webkit-transform:rotateY(0);transform:rotateY(0)}.flip-container .front .err{font-size:10px;color:red;font-family:monospace}.flip-container .back{-webkit-transform:rotateY(180deg);transform:rotateY(180deg);box-shadow:inset 0 0 7px #000;overflow:scroll}.flexcol{margin:20px 30px;display:-webkit-box;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;flex-flow:column}.flexcol>*{margin-top:10px;-webkit-box-flex:1;flex-grow:1}.flexrow{display:-webkit-box;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;flex-flow:row wrap}.flexrow>*{margin-top:10px;-webkit-box-flex:0;flex:0 0 48%;margin-right:2%}.flexrow>button{margin-top:10px;margin-left:20px;-webkit-box-flex:0;flex:0 0 1}.header{background:#0081cb;color:#fff;padding:5px 30px;display:-webkit-box;display:flex;-webkit-box-align:center;align-items:center}.editdiv{font-size:9px;color:#666;float:right;padding:10px;font-family:monospace}.editdiv span{font-size:10px;border:1px solid #0081cb;border-radius:5px;padding:0 5px;color:#0081cb}.editdiv span:hover{cursor:pointer;color:#fff;background-color:#0081cb}"]
                }] }
    ];
    /** @nocollapse */
    SpotfireEditorComponent.ctorParameters = function () { return [
        { type: FormBuilder },
        { type: PersistanceService },
        { type: DocumentService }
    ]; };
    return SpotfireEditorComponent;
}(SpotfireViewerComponent));
export { SpotfireEditorComponent };
if (false) {
    /** @type {?} */
    SpotfireEditorComponent.prototype.form;
    /**
     * When user hits Update button, depending on what settings are modified, call the right level of
     * method to update the dashboard
     * @type {?}
     */
    SpotfireEditorComponent.prototype.dataTables;
    /** @type {?} */
    SpotfireEditorComponent.prototype.pages;
    /** @type {?} */
    SpotfireEditorComponent.prototype.possibleValues;
    /** @type {?} */
    SpotfireEditorComponent.prototype.custLabels;
    /** @type {?} */
    SpotfireEditorComponent.prototype.update;
    /** @type {?} */
    SpotfireEditorComponent.prototype.fb;
    /**
     * @type {?}
     * @private
     */
    SpotfireEditorComponent.prototype.storSvc;
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoic3BvdGZpcmUtZWRpdG9yLmNvbXBvbmVudC5qcyIsInNvdXJjZVJvb3QiOiJuZzovL0B0aWJjby9zcG90ZmlyZS13cmFwcGVyLyIsInNvdXJjZXMiOlsibGliL2VkaXRvci9zcG90ZmlyZS1lZGl0b3IuY29tcG9uZW50LnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7Ozs7O0FBQUEsT0FBTyxFQUFFLFNBQVMsRUFBRSxpQkFBaUIsRUFBRSxNQUFNLGVBQWUsQ0FBQztBQUM3RCxPQUFPLEVBQUUsU0FBUyxFQUFFLFVBQVUsRUFBRSxXQUFXLEVBQUUsV0FBVyxFQUFFLE1BQU0sZ0JBQWdCLENBQUM7QUFFakYsT0FBTyxFQUFFLHFCQUFxQixFQUFFLGNBQWMsRUFBRSxNQUFNLDJCQUEyQixDQUFDO0FBQ2xGLE9BQU8sRUFBdUIsVUFBVSxFQUFFLE1BQU0sdUJBQXVCLENBQUM7QUFDeEUsT0FBTyxFQUFFLGtCQUFrQixFQUFFLE1BQU0sdUJBQXVCLENBQUM7QUFDM0QsT0FBTyxFQUFFLHVCQUF1QixFQUFFLE1BQU0scUNBQXFDLENBQUM7QUFDOUUsT0FBTyxFQUFFLGVBQWUsRUFBRSxNQUFNLHFCQUFxQixDQUFDO0FBRXREO0lBTzZDLG1EQUF1QjtJQVdoRSxpQ0FBbUIsRUFBZSxFQUFVLE9BQTJCLEVBQUUsQ0FBa0I7UUFBM0YsWUFDSSxrQkFBTSxDQUFDLENBQUMsU0FDWDtRQUZrQixRQUFFLEdBQUYsRUFBRSxDQUFhO1FBQVUsYUFBTyxHQUFQLE9BQU8sQ0FBb0I7Ozs7O1FBTHZFLGdCQUFVLEdBQUcsRUFBRSxDQUFDO1FBQ2hCLFdBQUssR0FBRyxFQUFFLENBQUM7UUFDWCxvQkFBYyxHQUFHLEVBQUUsQ0FBQztRQUNwQixnQkFBVSxHQUFHLFVBQVUsQ0FBQztRQU14QixZQUFNOzs7O1FBQUcsVUFBQyxDQUFDO1lBQ1AsS0FBSSxDQUFDLElBQUksR0FBRyxLQUFLLENBQUM7WUFDbEIsQ0FBQyxDQUFDLGVBQWUsRUFBRSxDQUFDOztnQkFDZCxHQUFHOzs7O1lB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QUNQLFFBQVEsRUFBRSxpQkFBaUI7b0JBQzNCLCs3SEFBNkM7b0JBQzdDLFFBQVEsRUFBRSxnQkFBZ0I7b0JBQzFCLGFBQWEsRUFBRSxpQkFBaUIsQ0FBQyxJQUFJOztpQkFFeEM7Ozs7Z0JBZDRDLFdBQVc7Z0JBSS9DLGtCQUFrQjtnQkFFbEIsZUFBZTs7SUFpS3hCLDhCQUFDO0NBQUEsQUEvSkQsQ0FPNkMsdUJBQXVCLEdBd0puRTtTQXhKWSx1QkFBdUI7OztJQUNoQyx1Q0FBZ0I7Ozs7OztJQUtoQiw2Q0FBZ0I7O0lBQ2hCLHdDQUFXOztJQUNYLGlEQUFvQjs7SUFDcEIsNkNBQXdCOztJQU14Qix5Q0FpREM7O0lBckRXLHFDQUFzQjs7Ozs7SUFBRSwwQ0FBbUMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBDb21wb25lbnQsIFZpZXdFbmNhcHN1bGF0aW9uIH0gZnJvbSAnQGFuZ3VsYXIvY29yZSc7XG5pbXBvcnQgeyBGb3JtR3JvdXAsIFZhbGlkYXRvcnMsIEZvcm1Db250cm9sLCBGb3JtQnVpbGRlciB9IGZyb20gJ0Bhbmd1bGFyL2Zvcm1zJztcblxuaW1wb3J0IHsgU3BvdGZpcmVDdXN0b21pemF0aW9uLCBTcG90ZmlyZUZpbHRlciB9IGZyb20gJy4uL3Nwb3RmaXJlLWN1c3RvbWl6YXRpb24nO1xuaW1wb3J0IHsgRG9jdW1lbnQgYXMgU3BvdERvYywgQ1VTVExBQkVMUyB9IGZyb20gJy4uL3Nwb3RmaXJlLXdlYnBsYXllcic7XG5pbXBvcnQgeyBQZXJzaXN0YW5jZVNlcnZpY2UgfSBmcm9tICcuLi9wZXJzaXRlbmNlLnNlcnZpY2UnO1xuaW1wb3J0IHsgU3BvdGZpcmVWaWV3ZXJDb21wb25lbnQgfSBmcm9tICcuLi92aWV3ZXIvc3BvdGZpcmUtdmlld2VyLmNvbXBvbmVudCc7XG5pbXBvcnQgeyBEb2N1bWVudFNlcnZpY2UgfSBmcm9tICcuLi9kb2N1bWVudC5zZXJ2aWNlJztcblxuQENvbXBvbmVudCh7XG4gICAgc2VsZWN0b3I6ICdzcG90ZmlyZS1lZGl0b3InLFxuICAgIHRlbXBsYXRlVXJsOiAnc3BvdGZpcmUtZWRpdG9yLmNvbXBvbmVudC5odG1sJyxcbiAgICBleHBvcnRBczogJ3Nwb3RmaXJlRWRpdG9yJyxcbiAgICBlbmNhcHN1bGF0aW9uOiBWaWV3RW5jYXBzdWxhdGlvbi5Ob25lLFxuICAgIHN0eWxlVXJsczogWycuL215LXRoZW1lLnNjc3MnLCAnLi9zcG90ZmlyZS1lZGl0b3IuY29tcG9uZW50LnNjc3MnXVxufSlcbmV4cG9ydCBjbGFzcyBTcG90ZmlyZUVkaXRvckNvbXBvbmVudCBleHRlbmRzIFNwb3RmaXJlVmlld2VyQ29tcG9uZW50IHtcbiAgICBmb3JtOiBGb3JtR3JvdXA7XG4gICAgLyoqXG4gICAgICAqIFdoZW4gdXNlciBoaXRzIFVwZGF0ZSBidXR0b24sIGRlcGVuZGluZyBvbiB3aGF0IHNldHRpbmdzIGFyZSBtb2RpZmllZCwgY2FsbCB0aGUgcmlnaHQgbGV2ZWwgb2ZcbiAgICAgICogbWV0aG9kIHRvIHVwZGF0ZSB0aGUgZGFzaGJvYXJkXG4gICAgICAqL1xuICAgIGRhdGFUYWJsZXMgPSB7fTtcbiAgICBwYWdlcyA9IFtdO1xuICAgIHBvc3NpYmxlVmFsdWVzID0gJyc7XG4gICAgY3VzdExhYmVscyA9IENVU1RMQUJFTFM7XG5cbiAgICBjb25zdHJ1Y3RvcihwdWJsaWMgZmI6IEZvcm1CdWlsZGVyLCBwcml2YXRlIHN0b3JTdmM6IFBlcnNpc3RhbmNlU2VydmljZSwgZDogRG9jdW1lbnRTZXJ2aWNlKSB7XG4gICAgICAgIHN1cGVyKGQpO1xuICAgIH1cblxuICAgIHVwZGF0ZSA9IChlKSA9PiB7XG4gICAgICAgIHRoaXMuZWRpdCA9IGZhbHNlO1xuICAgICAgICBlLnN0b3BQcm9wYWdhdGlvbigpO1xuICAgICAgICBjb25zdCBpc0QgPSAoeikgPT4gdGhpcy5mb3JtLmdldCh6KS5kaXJ0eTtcbiAgICAgICAgY29uc3Qgb25seVRydWVQcm9wcyA9ICh0KSA9PiBPYmplY3Qua2V5cyh0KS5maWx0ZXIoa2V5ID0+IHRba2V5XSA9PT0gdHJ1ZSlcbiAgICAgICAgICAgIC5yZWR1Y2UoKG9iaiwga2V5KSA9PiB7IG9ialtrZXldID0gdFtrZXldOyByZXR1cm4gb2JqOyB9LCB7fSk7XG4gICAgICAgIGNvbnNvbGUubG9nKCdbU1BPVEZJUkUtRURJVE9SXSBTcG90ZmlyZUVkaXRvckNvbXBvbmVudCBVcGRhdGUnLCB0aGlzLmZvcm0uZ2V0UmF3VmFsdWUoKSxcbiAgICAgICAgICAgIGB1OiR7aXNEKCd1cmwnKX0sIHA6JHtpc0QoJ3BhdGgnKX0sIGE6JHtpc0QoJ3BhZ2UnKX0sIGM6JHtpc0QoJ2N1c3QnKX0sIGY6JHtpc0QoJ2ZpbHRlcnMnKX0sIG06JHtpc0QoJ21hcmtpbmcnKX1gKTtcbiAgICAgICAgY29uc3QgY3VzID0gbmV3IFNwb3RmaXJlQ3VzdG9taXphdGlvbih0aGlzLmZvcm0uZ2V0KCdjdXN0JykudmFsdWUpO1xuICAgICAgICBpZiAoaXNEKCd1cmwnKSkge1xuICAgICAgICAgICAgdGhpcy5kb2NTdmMub3BlbldlYlBsYXllciQodGhpcy5zcG90UGFyYW1zKS5zdWJzY3JpYmUoKTtcbiAgICAgICAgICAgIC8vICAgICAgICAgICAgdGhpcy5vcGVuV2ViUGxheWVyKHRoaXMuZm9ybS5nZXQoJ3VybCcpLnZhbHVlLCB0aGlzLmZvcm0uZ2V0KCdwYXRoJykudmFsdWUsIGN1cyk7XG4gICAgICAgIH0gZWxzZSBpZiAoaXNEKCdwYXRoJykgfHwgaXNEKCdmaWx0ZXJzJykgfHwgaXNEKCdtYXJraW5nJykgfHwgaXNEKCdjdXN0JykpIHtcbiAgICAgICAgICAgIHRoaXMucGF0aCA9IGlzRCgncGF0aCcpID8gdGhpcy5mb3JtLmdldCgncGF0aCcpLnZhbHVlIDogdGhpcy5wYXRoO1xuICAgICAgICAgICAgdGhpcy5wYWdlID0gaXNEKCdwYWdlJykgPyB0aGlzLmZvcm0uZ2V0KCdwYWdlJykudmFsdWUgOiB0aGlzLnBhZ2U7XG4gICAgICAgICAgICBjb25zb2xlLmxvZygnW1NQT1RGSVJFLUVESVRPUl0gTWFya2luZyA6ICcsIHRoaXMuZm9ybS5nZXQoJ21hcmtpbmcnKS52YWx1ZSk7XG4gICAgICAgICAgICB0aGlzLmN1c3RvbWl6YXRpb24gPSBjdXM7XG4gICAgICAgICAgICB0aGlzLnBhZ2VzID0gW107XG4gICAgICAgICAgICBjb25zdCBhbGxGaWx0ZXJzOiBBcnJheTxTcG90ZmlyZUZpbHRlcj4gPSBbXTtcbiAgICAgICAgICAgIGlmICh0aGlzLmZvcm0uZ2V0KCdmaWx0ZXJzJykudmFsdWUpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBmbHRlcnNWYWx1ZSA9IHRoaXMuZm9ybS5nZXQoJ2ZpbHRlcnMnKS52YWx1ZTtcbiAgICAgICAgICAgICAgICBPYmplY3Qua2V5cyhmbHRlcnNWYWx1ZSkuZm9yRWFjaChkYXRhVGFibGVOYW1lID0+IHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgZmx0ID0gZmx0ZXJzVmFsdWVbZGF0YVRhYmxlTmFtZV07XG4gICAgICAgICAgICAgICAgICAgIE9iamVjdC5rZXlzKGZsdCkuZm9yRWFjaChkYXRhQ29sdW1uTmFtZSA9PlxuICAgICAgICAgICAgICAgICAgICAgICAgYWxsRmlsdGVycy5wdXNoKG5ldyBTcG90ZmlyZUZpbHRlcih7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZGF0YVRhYmxlTmFtZTogZGF0YVRhYmxlTmFtZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkYXRhQ29sdW1uTmFtZTogZGF0YUNvbHVtbk5hbWUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZmlsdGVyU2V0dGluZ3M6IHsgdmFsdWVzOiBmbHRbZGF0YUNvbHVtbk5hbWVdIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIH0pKSk7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLmZpbHRlcnMgPSBhbGxGaWx0ZXJzO1xuICAgICAgICAgICAgaWYgKHRoaXMuc2lkKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5zdG9yU3ZjLnNldCgndXJsJywgdGhpcy5mb3JtLmdldCgndXJsJykudmFsdWUpO1xuICAgICAgICAgICAgICAgIHRoaXMuc3RvclN2Yy5zZXQoJ3BhdGgnLCB0aGlzLmZvcm0uZ2V0KCdwYXRoJykudmFsdWUpO1xuICAgICAgICAgICAgICAgIHRoaXMuc3RvclN2Yy5zZXQoJ3BhZ2UnLCB0aGlzLmZvcm0uZ2V0KCdwYWdlJykudmFsdWUpO1xuICAgICAgICAgICAgICAgIHRoaXMuc3RvclN2Yy5zZXQoJ2N1c3QnLCBvbmx5VHJ1ZVByb3BzKHRoaXMuY3VzdG9taXphdGlvbikpO1xuICAgICAgICAgICAgICAgIHRoaXMuc3RvclN2Yy5zZXQoJ2ZsdHMnLCB0aGlzLmZpbHRlcnMpO1xuICAgICAgICAgICAgICAgIHRoaXMuc3RvclN2Yy5zZXQoJ21hcmsnLCB0aGlzLm1hcmtpbmdPbik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLmRvY1N2Yy5vcGVuUGF0aCQodGhpcy5zcG90UGFyYW1zKS5zdWJzY3JpYmUoKTtcbiAgICAgICAgfSBlbHNlIGlmIChpc0QoJ3BhZ2UnKSkge1xuICAgICAgICAgICAgLy8gaWYgb25seSBwYWdlIGhhcyBjaGFuZ2VkLCBqdXN0IHJlZnJlc2ggaXRcbiAgICAgICAgICAgIC8vXG4gICAgICAgICAgICBpZiAodGhpcy5zaWQpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnN0b3JTdmMuc2V0KCdwYWdlJywgdGhpcy5mb3JtLmdldCgncGFnZScpLnZhbHVlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMuZG9jU3ZjLm9wZW5QYWdlJCh0aGlzLmZvcm0uZ2V0KCdwYWdlJykudmFsdWUpLnN1YnNjcmliZSgpO1xuICAgICAgICB9XG4gICAgfVxuICAgIGRvRm9ybShkb2M6IFNwb3REb2MpIHtcblxuICAgICAgICB0aGlzLmZvcm0gPSB0aGlzLmZiLmdyb3VwKHtcbiAgICAgICAgICAgIHVybDogW3RoaXMudXJsLCBWYWxpZGF0b3JzLnJlcXVpcmVkXSxcbiAgICAgICAgICAgIHBhdGg6IFt0aGlzLnBhdGgsIFZhbGlkYXRvcnMucmVxdWlyZWRdLFxuICAgICAgICAgICAgcGFnZTogdGhpcy5mYi5jb250cm9sKHsgdmFsdWU6IHRoaXMucGFnZSwgZGlzYWJsZWQ6IGZhbHNlIH0pLCAvLyAhdGhpcy51cmwgfSksXG4gICAgICAgICAgICBjdXN0OiB0aGlzLmZiLmdyb3VwKHRoaXMuY3VzdG9taXphdGlvbiBhcyBTcG90ZmlyZUN1c3RvbWl6YXRpb24pLFxuICAgICAgICAgICAgZmlsdGVyczogdGhpcy5mYi5ncm91cCh7fSksXG4gICAgICAgICAgICBtYXJraW5nOiB0aGlzLmZiLmdyb3VwKHt9KVxuICAgICAgICB9KTtcblxuXG4gICAgICAgIC8vIHRoZW4gc3Vic2NyaWJlIHRvIG9ic2VydmFibGVzIHRvIHJldHJpZXZlcyBzb21lIGluZm8gYWJvdXQgdGhlIGRvY3VtZW50XG4gICAgICAgIC8vXG4gICAgICAgIGRvYy5nZXREb2N1bWVudE1ldGFkYXRhJCgpLnN1YnNjcmliZShnID0+IHRoaXMubWV0YWRhdGEgPSBnKTtcbiAgICAgICAgLyogIGRvYy5nZXREb2N1bWVudFByb3BlcnRpZXMkKCkuc3Vic2NyaWJlKGcgPT4gY29uc29sZS5sb2coJy0tPiBnZXREb2N1bWVudFByb3BlcnRpZXMnLCBnKSk7XG4gICAgICAgICAgZG9jLmdldEJvb2ttYXJrcyQoKS5zdWJzY3JpYmUoZyA9PiBjb25zb2xlLmxvZygnLS0+IGdldEJvb2ttYXJrcycsIGcpKTtcbiAgICAgICAgICBkb2MuZ2V0Qm9va21hcmtOYW1lcyQoKS5zdWJzY3JpYmUoZyA9PiBjb25zb2xlLmxvZygnLS0+IGdldEJvb2ttYXJrTmFtZXMnLCBnKSk7XG4gICAgICAgICAgZG9jLmdldFJlcG9ydHMkKCkuc3Vic2NyaWJlKGcgPT4gY29uc29sZS5sb2coJy0tPiBnZXRSZXBvcnRzJywgZykpO1xuICAgICAgICAgICovXG4gICAgICAgIGRvYy5nZXRQYWdlcyQoKS5zdWJzY3JpYmUoZyA9PiB0aGlzLnBhZ2VzID0gZyk7XG4gICAgICAgIGRvYy5nZXRBY3RpdmVQYWdlJCgpLnN1YnNjcmliZShnID0+IHRoaXMuZm9ybS5nZXQoJ3BhZ2UnKS5wYXRjaFZhbHVlKGcucGFnZVRpdGxlKSk7XG5cbiAgICAgICAgLy8gICB0aGlzLmRvYy5leHBvcnRBY3RpdmVWaXN1YWxBc0ltYWdlKDEwMCwgMjAwKTtcbiAgICAgICAgLy8gdGhpcy5tYXJraW5nID0gZG9jLm1hcmtpbmc7XG4gICAgICAgIC8vICB0aGlzLm1hcmtpbmcuZ2V0TWFya2luZ05hbWVzKGcgPT4gY29uc29sZS5sb2coJ1NGSU5GTycsICdnZXRNYXJraW5nTmFtZXMoKSA9ICcsIGcpKTtcblxuXG4gICAgICAgIC8vIGdldCBUYWJsZSBpbmZvXG4gICAgICAgIC8vXG4gICAgICAgIGNvbnN0IGRpZmZlcmVuY2UgPSAoYSwgYikgPT4gYi5maWx0ZXIoaSA9PiBhLmluZGV4T2YoaSkgPCAwKTtcbiAgICAgICAgZG9jLm9uRG9jdW1lbnRSZWFkeSQoKS5zdWJzY3JpYmUoX18gPT4ge1xuICAgICAgICAgICAgZG9jLmdldERhdGEoKS5nZXRBbGxUYWJsZXMkKCkuc3Vic2NyaWJlKHRhYmxlcyA9PiB7XG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ1tTUE9URklSRS1FRElUT1JdIGdldEFsbFRhYmxlcyQgcmV0dXJucycsIHRhYmxlcywgdGhpcy5maWx0ZXJzLCB0aGlzLm1hcmtpbmdPbik7XG4gICAgICAgICAgICAgICAgY29uc3QgdG9MaXN0ID0gKGcpID0+IGcubWFwKGYgPT4gYCcke2Z9J2ApLmpvaW4oJywgJyksXG4gICAgICAgICAgICAgICAgICAgIGVyclR4dDEgPSAnW3Nwb3RmaXJlLUVESVRPcl0gQXR0cmlidXQgbWFya2luZy1vbiBjb250YWlucyB1bmtud29uJyxcbiAgICAgICAgICAgICAgICAgICAgZXJyVHh0MiA9ICdbc3BvdGZpcmUtRURJVE9yXSBQb3NzaWJsZSB2YWx1ZXMgZm9yJyxcbiAgICAgICAgICAgICAgICAgICAgZmlsOiBGb3JtR3JvdXAgPSB0aGlzLmZvcm0uZ2V0KCdmaWx0ZXJzJykgYXMgRm9ybUdyb3VwLFxuICAgICAgICAgICAgICAgICAgICBtYXI6IEZvcm1Hcm91cCA9IHRoaXMuZm9ybS5nZXQoJ21hcmtpbmcnKSBhcyBGb3JtR3JvdXAsXG4gICAgICAgICAgICAgICAgICAgIHROYW1lcyA9IE9iamVjdC5rZXlzKHRhYmxlcyksXG4gICAgICAgICAgICAgICAgICAgIHRkaWZmID0gdGhpcy5tYXJraW5nT24gPyBkaWZmZXJlbmNlKE9iamVjdC5rZXlzKHRoaXMubWFya2luZ09uKSwgdE5hbWVzKSA6IFtdO1xuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdUYWJsZXMgOiAnLCB0TmFtZXMsIHRkaWZmLCBmaWwpO1xuXG4gICAgICAgICAgICAgICAgaWYgKHRkaWZmLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5lcnJvck1lc3NhZ2VzLnB1c2goYCR7ZXJyVHh0MX0gdGFibGUgbmFtZXM6ICR7dG9MaXN0KHRkaWZmKX1gKTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5wb3NzaWJsZVZhbHVlcyA9IGAke2VyclR4dDJ9IHRhYmxlIG5hbWVzIGFyZTogJHt0b0xpc3QodE5hbWVzKX0gYDtcbiAgICAgICAgICAgICAgICAgICAgLy8gICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAvLyBVcGRhdGUgbWFya2luZyBhbmQgZmlsdGVycyBmaWVsZHNcbiAgICAgICAgICAgICAgICAvL1xuICAgICAgICAgICAgICAgIE9iamVjdC5rZXlzKHRhYmxlcykuZm9yRWFjaCh0bmFtZSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGNvbHVtbnMgPSB0YWJsZXNbdG5hbWVdO1xuICAgICAgICAgICAgICAgICAgICBtYXIuYWRkQ29udHJvbCh0bmFtZSwgbmV3IEZvcm1Db250cm9sKHRoaXMubWFya2luZ09uID8gdGhpcy5tYXJraW5nT25bdG5hbWVdIDogbnVsbCkpO1xuICAgICAgICAgICAgICAgICAgICBpZiAoIWZpbC5jb250YWlucyh0bmFtZSkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGZpbC5hZGRDb250cm9sKHRuYW1lLCBuZXcgRm9ybUdyb3VwKHt9KSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgY29uc3QgZnJtOiBGb3JtR3JvdXAgPSBmaWwuZ2V0KHRuYW1lKSBhcyBGb3JtR3JvdXA7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGNOYW1lcyA9IE9iamVjdC5rZXlzKGNvbHVtbnMpO1xuICAgICAgICAgICAgICAgICAgICAvKlxuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygnQ29sdW1ucyA6ICcsIGNOYW1lcywgdGhpcy5tYXJraW5nT24pO1xuICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5tYXJraW5nT24pIHtcbiAgICAgICAgICAgICAgICAgICAgICBjb25zdCBjZGlmZiA9IHRoaXMubWFya2luZ09uW3RuYW1lXSA/IHRoaXMuZGlmZmVyZW5jZSh0aGlzLm1hcmtpbmdPblt0bmFtZV0sIGNOYW1lcykgOiBbXTtcbiAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygnQ29sdW1ucyA6ICcsIGNOYW1lcywgY2RpZmYpO1xuICAgICAgICAgICAgICAgICAgICAgIGlmIChfLnNpemUoY2RpZmYpID4gMCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5lcnJvck1lc3NhZ2VzLnB1c2goYCR7ZXJyVHh0MX0gY29sdW1uIG5hbWVzOiAke3RvTGlzdChjZGlmZil9YCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnBvc3NpYmxlVmFsdWVzID0gYCR7ZXJyVHh0Mn0gY29sdW1ucyBvZiB0YWJsZSAke3RuYW1lfSBhcmU6ICR7dG9MaXN0KGNOYW1lcyl9IGA7XG4gICAgICAgICAgICAgICAgICAgICAgICAvLyAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICovXG5cbiAgICAgICAgICAgICAgICAgICAgY05hbWVzLmZvckVhY2goY25hbWUgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgbGV0IGZsdDIgPSBudWxsO1xuICAgICAgICAgICAgICAgICAgICAgICAgKHRoaXMuZmlsdGVycyBhcyBTcG90ZmlyZUZpbHRlcltdIHx8IFtdKS5zb21lKGVsZW1lbnQgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChlbGVtZW50LmRhdGFUYWJsZU5hbWUgPT09IHRuYW1lICYmIGVsZW1lbnQuZGF0YUNvbHVtbk5hbWUgPT09IGNuYW1lKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZsdDIgPSBlbGVtZW50O1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGZybS5hZGRDb250cm9sKGNuYW1lLCBuZXcgRm9ybUNvbnRyb2woZmx0MiA/IGZsdDIuZmlsdGVyU2V0dGluZ3MudmFsdWVzIDogbnVsbCkpO1xuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB0aGlzLmRhdGFUYWJsZXMgPSB0YWJsZXM7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSk7XG4gICAgfVxufVxuIl19